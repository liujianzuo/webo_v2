(function(f){var c={};var i=function(k){return c[k];};var r=function(k){if(!c[k]){var m={exports:{}};try{f[k].call(m.exports,m,m.exports,r,i)}catch(e){};c[k]=m.exports;}return c[k];};return r('a');})({a:function(e,t,n,r){n("A"),$CONFIG.verify!="enterprise"?(n("v"),n("W"),n("aG"),n("al"),n("ap")):($CONFIG.jumpNick!=1&&n("v"),n("aT"),n("aV")),n("aW"),n("aX"),n("Aa"),n("AB")},A:function(e,t,n,r){var i=n("b"),s=n("B");i.E("pl_personalInfo_loginname")&&s(i.E("pl_personalInfo_loginname"))},b:function(e,t,n,r){e.exports=window.STK.getPKG("theia")},B:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("C"),u=n("e"),a=n("E"),f=n("h"),l=n("H"),c=n("i"),h=n("I"),p=n("j"),d=n("L"),v=n("m"),m=n("M"),g=n("S"),y=n("p"),b=n("T"),w=n("u"),E=n("U"),S={};S.email=a,S.password=f,S.mobile=l,S.activation=c,e.exports=function(e){var t={},n,r,a,f,l,c,x,T,N,C,k=["email","password","mobile","activation"],L,A,O={email:{E01:"",E02:"#L{建议使用QQ邮箱，帮你找到在微博的QQ好友。}",E03:"#L{请输入正确的邮箱地址}",E04:"#L{微博已停止雅虎邮箱注册}"},mobile:{E01:"",E02:"#L{暂时只支持中国大陆的手机号}",E03:"#L{请输入手机号码}",E04:"#L{手机号长度11位，以13/14/15/17/18开头}"},activation:{E01:"",E02:"#L{请输入短信激活码}",E03:"#L{激活码输入有误}"}},M={formCheck:function(e,t){_(t)},close:function(){var e=i.core.json.jsonToStr(r.getData())==i.core.json.jsonToStr(N)&&i.core.json.jsonToStr(a.getData())==i.core.json.jsonToStr(C);e?(n.set.revert(),f.mobile_tip[0].innerHTML="",f.activation_tip[0].innerHTML="",f.email_tip[0].innerHTML="",f.password_tip[0].innerHTML="",f.password_tip[1].innerHTML=""):n.set.edit()},reset:function(){f.mobile[0].value=C.mobile,f.activation[0].value=i.queryToJson(f.activation[0].getAttribute("action-data")).text,f.email[0].value=N.email,f.password[0].value=N.password,f.password[1].value=C.password,f.mobile_tip[0].innerHTML="",f.activation_tip[0].innerHTML="",f.email_tip[0].innerHTML="",f.password_tip[0].innerHTML="",f.password_tip[1].innerHTML=""},open:function(){var e=l.email||l.mobile;e.value="",b.setCursor(e)}},_=function(e,t){t=t||!1;for(var n in e){var r=e[n];if(t&&r.state)continue;var i=l[n+"_tip"];i&&(i.innerHTML=d("newFormTips",{data:r}))}},D={submit:function(){var e=A.getData();e.setting_rid=$CONFIG.setting_rid;var t=window.$CONFIG||{};t.key&&(e.password=E(e.password,t.key,t.key_plus)),l.email?e.type="email":e.type="mobile",L.setLoading(),p.request("loginname",{onSuccess:function(e){L.setNormal();if(e.data&&e.data.html){var t=y();t.setContent(e.data.html),i.custEvent.add(t,"hide",function(){location.reload()}),t.show().setMiddle()}else{var n=g({showCallback:function(){setTimeout(function(){n&&n.anihide()},2e3)},hideCallback:function(){n&&n.destroy(),n=undefined,location.reload()},msg:e.msg||s("#L{保存成功}"),type:"succ"});n.setLayerXY(L.getDom()),n.aniShow()}},onError:function(e){if(e.data)_(e.data),L.setNormal();else{L.setNormal();var t=g({showCallback:function(){setTimeout(function(){t&&t.anihide()},2e3)},hideCallback:function(){t&&t.destroy(),t=undefined},msg:e.msg||s("#L{保存失败}"),type:"del"});t.setLayerXY(L.getDom()),t.aniShow()}}},e)},setCurrent:function(e){A=e,l=h(A.domList),L=v(l.btn_submit);var t=l.email||l.mobile;t.value="",b.setCursor(t)}},P={btn_submit:function(e){i.preventDefault();var t=A.check();t?setTimeout(function(){D.submit()},0):_(A.states(),!0)},btn_cancel:function(){n.handle.close(),i.preventDefault()},btn_sms_activation:function(e){i.preventDefault();if(!A.ctls.mobile.msg.state||A.ctls["mobile"].msg.type!="ok"&&A.ctls["mobile"].msg.type!="loading"){var r=i.queryToJson(l.mobile.getAttribute("action-data"));if(l["mobile"].value==""||l["mobile"].value==r["text"])l.mobile.value="",b.setCursor(l.mobile)}else{e=e.data||{},e.mobile=A.ctls.mobile.value(),e.type="userpwd";var t=function(e){l.sms_timer.innerHTML=e.last,l.btn_sms_activation_disable.style.display=e.last==0?"none":"",l.btn_sms_activation.style.display=e.last==0?"":"none"};T=w({time:60},t),T.start();var n=A.ctls.activation.dataType.get("msg");n.type="tip",n.msg=s("#L{激活码发送成功，60秒内未收到请重新获取}"),p.request("sendcode",{onSuccess:function(e){_({activation:n})},onError:function(e){T.stop(),(!e.data||e.data.type!="mobile")&&_({activation:{type:"err",msg:e.msg}})}},e)}},changeForm:function(e){var t=e.data.type,n,s,o;t=="email"?(n=r,s=f.emailForm[0],o=f.mobileForm[0]):t=="mobile"&&(n=a,o=f.emailForm[0],s=f.mobileForm[0]);if(A==n)return;i.addClassName(e.el,"cur");var u=i.core.dom.next(e.el);u?i.removeClassName(u,"cur"):i.removeClassName(i.core.dom.prev(e.el),"cur"),s.style.display="",o.style.display="none",D.setCurrent(n)}},H={loader:function(){n=m(e),n.is.cached()&&H.init(),i.custEvent.add(n,"renderSuccess",H.init)},init:function(){H.pars(),H.build(),H.bind(),H.initCurrent()},pars:function(){f=i.builder(e).list},initCurrent:function(){D.setCurrent(a),N=r.getData(),C=a.getData()},build:function(){var t;r=u(f.emailForm[0]),t=h(r.domList);for(var n=0,s,l,c,d=k.length;n<d;n++){s=k[n],l=t[s];if(t[s]&&S[s]){c=i.queryToJson(l.getAttribute("action-data")||""),c.hook=r,s=="email"&&(c.proxy=p,c.iokey="checkloginname",c.type="userexist"),O[s]&&(c.errText=O[s]);var v=S[s](l,c);r.add(s,v)}}a=u(f.mobileForm[0]),t=h(a.domList);for(var n=0,s,l,c,d=k.length;n<d;n++){s=k[n],l=t[s];if(t[s]&&S[s]){c=i.queryToJson(l.getAttribute("action-data")||""),c.hook=a,s=="mobile"&&(c.proxy=p,c.iokey="checkloginname",c.type="userexist"),O[s]&&(c.errText=O[s]);var v=S[s](l,c);a.add(s,v)}}x=o(e)},bind:function(){i.custEvent.define(r,["check"]),i.custEvent.add(r,"check",M.formCheck),i.custEvent.define(a,["check"]),i.custEvent.add(a,"check",M.formCheck),i.custEvent.add(n,"close",M.close),i.custEvent.add(n,"afterDiscard",M.reset),i.custEvent.add(n,"open",M.open),c=n.dEvt();for(var e in P)c.add(e,"click",P[e])},destroy:function(){i.custEvent.remove(r,"check",M.formCheck),i.custEvent.remove(a,"check",M.formCheck);for(var e in P)c.remove(e,"click",P[e]);x.destroy()}};return H.loader(),t.destroy=H.destroy,t}},c:function(e,t,n,r){var i=n("b");window.$LANG||(window.$LANG={}),e.exports=function(e){var t=[].splice.call(arguments,1,arguments.length),n=[e,$LANG].concat(t),r=i.core.util.language.apply(this,n);return r}},C:function(e,t,n,r){var i=n("b"),s=n("d"),o=i.core.dom.uniqueID,u={text:"text"},a=function(e){var t=[];for(var n in e)t.push(e[n]);return t};e.exports=function(e,t){var n,r={blur:function(e){var t=i.fixEvent(e).target;a.text.reset(t),i.custEvent.fire(d,"blur",{type:options.actionType,el:t});var n=t.getAttribute("no_cls");n!="true"&&i.removeClassName(t,options.focusCS)},focus:function(e){var t=i.fixEvent(e).target;a.text.place(t),i.custEvent.fire(d,"focus",{type:options.actionType,el:t});var n=t.getAttribute("no_cls");n!="true"&&i.addClassName(t,options.focusCS)},keyup:function(){var e=i.fixEvent().target;i.custEvent.fire(d,"keyup",{type:options.actionType,el:e})}},a={text:{place:function(e){e.value.replace(/^\s+|\s+$/g,"")==l[o(e)].data[u.text]&&(e.value="")},reset:function(e){s.isEmpty(e.value)&&(e.value=l[o(e)].data[u.text]||"")}}},f=function(e){h.buildItem(e),h.active(e.el)},l={},c={click:f,focusin:f},h={init:function(){h.parseParam(),h.bind()},parseParam:function(){options=i.parseParam({actionType:"text_copy",focusCS:"W_input_focus"},t),u=i.parseParam(u,t)},bind:function(){n=i.core.evt.delegatedEvent(e);for(var t in c)n.add(options.actionType,t,c[t])},destroy:function(){n.destroy();for(var e in l)for(var t in r)i.removeEvent(e.el,t,r[t])},buildItem:function(e){var t=o(e.el);if(l[t])return;l[t]={el:e.el||"",data:{}};for(var n in u)l[t].data[u[n]]=e.data[u[n]]||"";for(var s in r)i.addEvent(e.el,s,r[s])},active:function(e){a.text.place(e);var t=e.getAttribute("no_cls");t!="true"&&i.addClassName(e,options.focusCS)}},p={isCopyText:function(e){var t=e.getAttribute("action-type"),n=i.queryToJson(e.getAttribute("action-data"));return e.value.replace(/^\s+|\s+$/g,"")==(n[t].replace(/^\s+|\s+$/g,"")||"")},build:h.buildItem};h.init();var d={};return d.API=p,d.destroy=h.destroy,d}},d:function(e,t,n,r){var i=n("b"),s=n("D"),o={};o.isEmpty=function(e){return/^\s*$/g.test(e.replace(/^\s+|\s+$/g,""))},o.isNumber=function(e){return/^[+\-]?\d+(\.\d+)?$/.test(e)},o.isName=function(e){return/^[0-9a-zA-Z\u4e00-\u9fa5_-]+$/.test(e)},o.isRealName=function(e){return/^[\u4e00-\u9fa5]{2,6}$/.test(e)?!0:/^[a-zA-Z]{2,20}$/.test(e)?!0:/[a-zA-Z0-9\u3000|\s|\t|\uff00-\uffff～！@#￥%……&×（）——『』【】、。‘“《》\?\~\!\@\#\$\%\^\&\*\\\+\`\=\[\]\(\)\{\}\|\;\'\:\"\,\/\<\>]+/.test(e)?!1:!0},o.isCompany=function(e){return/^[^"'<>]+$/.test(e)},o.isChinese=function(e){return/[\u4e00-\u9fa5]+$/.test(e)},o.isCName=function(e){return/^[\u4e00-\u9fa5]+[\u00b7\.]?[\u4e00-\u9fa5]+$/.test(e)},o.isEmail=function(e){if(!/^[0-9a-z_][_.0-9a-z-]{0,31}@([0-9a-z][0-9a-z-]{0,30}\.){1,4}[a-z]{2,4}$/.test(e))return!1;if(e&&e!=""&&e.indexOf("@")!=-1){var t=e.indexOf("@"),n=e.substring(0,t);return n.length>64||e.length>256?!1:!0}return!1},o.isYahoo=function(e){return/^.*@((yahoo\.com\.cn)||(yahoo\.cn))$/.test(e)},o.isEmailName=function(e){return/^[0-9a-z_][_.0-9a-z-]{0,31}$/.test(e)},o.isIDNumber=function(e){return/^[\d]{15}$/.test(e)||/^[\d]{17}([Xx\d]{1}$)$/.test(e)},o.isMobile=function(e){return/^1[3|4|5|7|8][0-9]{9}$/.test(e)},o.isWeird=function(e){return!/^[0-9a-zA-Z~!@#$%^&*()_+`\-={}|\[\]\\\:\";'<\>?,.\/]+$/i.test(e)},o.isPassportID=function(e){return/^[a-zA-Z0-9]{8,20}$/.test(e)},o.isAbroadName=function(e){return/^[a-zA-Z\u4e00-\u9fa5]+([\u00b7\.\- ]?[a-zA-Z\u4e00-\u9fa5]+)*$/.test(e)},o.lenLimit=function(e,t,n){var r=i.bLength(e);return!(r<t||r>n)},o.isUrl=function(e){return/^http:\/\/([\w-]+(\.[\w-]+)+(\/[\w-   .\/\?%@&+=\u4e00-\u9fa5]*)?)?$/i.test(e)},o.turnBoolean=function(e){switch(typeof e){case"boolean":return e;case"number":return!!e;case"string":return e=="true"||e=="1"}},o.reNullChar=function(e){return e.replace(/^\s+|\s+$/g,"")};var u=[s("a","z"),s("z","a"),s("0","9"),s("9","0")];o.isOrder=function(e){return e&&e.length&&e.length>1&&function(){for(var t=0;t<u.length;t++)if(u[t].indexOf(e)>=0)return!0;return!1}()},o.isWeakPasswd=function(e){var t=["000000","111111","11111111","112233","123123","123321","123456","12345678","654321","666666","888888","abcdef","abcabc","abc123","a1b2c3","aaa111","123qwe","qwerty","qweasd","admin","password","p@ssword","passwd","iloveyou","5201314"];if(i.inArray(e,t))return!0;if(/^([a-zA-Z0-9])\1+$/.test(e))return!0;if(o.isOrder(e))return!0;if(/^([a-zA-Z]+)([0-9]+)$/.test(e)||/^([0-9]+)([a-zA-Z]+)$/.test(e)){var n=RegExp.$1,r=RegExp.$2;if(o.isOrder(n)&&o.isOrder(r))return!0}return!1},o.isStrongPasswd=function(e){var t=e.match(/[a-z]/ig),n=e.match(/[0-9]/ig),r=e.match(/([^a-z0-9])/ig);if(t&&n&&r)return!0;if(t&&n)return t.length+n.length>=11;if(t&&r)return t.length+r.length>=11;if(n&&r)return n.length+r.length>=11},o.isMobileSea=function(e,t){switch(t){case"0086":return o.isMobile(e);case"00852":return/^[569]\d{7}$/.test(e);case"00853":return/^6\d{7}$/.test(e);case"00886":return/^9\d{8}$/.test(e);case"001":return/^\d{10}$/.test(e);case"0060":return/^1\d{8}$/.test(e);case"0061":return/^4\d{8}$/.test(e);case"0081":return/^[789]0\d{8}$/.test(e);case"0082":return/^1[016789]\d{8}$/.test(e);case"0065":return/^[89]\d{7}$/.test(e);case"0044":return/^(7[45789]\d{8}|7624\d{6})$/.test(e);case"0033":return/^((6\d{8})|(7[345678]\d{7}))$/.test(e);case"007":return/^((90[12345689]\d{7})|(9[1236]\d{8})|(95[0123]\d{7}))$/.test(e);case"0091":return/^[987]\d{9}$/.test(e);case"0066":return/^[98]\d{8}$/.test(e);case"0049":return/^(15[12579]\d{7}|16[023]\d{7}|160\d{8}|17[012345789]\d{7}|176\d{8}|700\d{8})$/.test(e);default:return!0}},e.exports=o},D:function(e,t,n,r){e.exports=function(e,t){if(!e||!t)throw"orderStr error!";typeof e!="string"&&(e+=""),typeof t!="string"&&(t+="");var n=e.charCodeAt(0),r=t.charCodeAt(0),i=n>r;if(i){var s=n;n=r,r=s}var o=[];for(var u=n;u<=r;u++)o.push(String.fromCharCode(u));return i&&o.reverse(),o.join("")}},e:function(e,t,n,r){var i=n("b"),s=["input","textarea","select","a","div","ul","li","em"];e.exports=function(e,t){var n={},r,o="form",u={ctls:{},states:{}},a={reset:function(e){for(var t in e)u.states[t]=e[t]}},f={init:function(){f.pars(),f.build(),f.bind()},pars:function(){if(!e)throw"from is undefined";r=i.parseParam({proxy:null},t)},build:function(){n.domList=i.builder(e).list},bind:function(){i.custEvent.define(n,["reset"]),i.custEvent.add(n,"reset",a.reset)},add:function(e,t){u.ctls[e]=t},getData:function(){var t={};for(var n in u.ctls){var r=u.ctls[n];t[r.name()]=r.value()}return i.parseParam(i.htmlToJson(e,s),t)},check:function(e){if(e){var t=u.ctls[e];return u.states[e]=t.check(),u.states[e].type}var n=!0;for(var r in u.ctls){var t=u.ctls[r];t.pars.iorecords?u.states[r]=t.msg:u.states[r]=t.check(),n=n&&u.states[r].state}return n},reset:function(){for(var e in u.ctls)u.states[e].reset()},states:function(){for(var e in u.ctls)u.states[e]=u.ctls[e].msg;return u.states},destroy:function(){for(var e in u.ctls)u.ctls[e].destroy()}};return f.init(),n.ctls=function(){return u.ctls}(),n.states=f.states,n.add=f.add,n.getData=f.getData,n.check=f.check,n.reset=f.reset,n.destroy=f.destroy,n}},E:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{您填写的邮箱将作为微博登录名}",E03:"#L{请输入正确的邮箱地址}",E04:"#L{微博已停止雅虎邮箱注册}"};e.exports=function(e,t){var n;t=t||{};var r=function(){var e=l.value(),t=!1;if(!l.pars.must&&l.rule.isEmpty(e)){l.msg.state=!0,l.msg.type="empty",l.msg.code="E01",l.cache_msg=i.core.json.clone(l.msg);return}!t&&l.rule.isEmpty(e)&&(t=!0,l.msg.type="err",l.msg.code="E03"),!t&&l.rule.isEmail(e)&&l.rule.isYahoo(e)&&(t=!0,l.msg.type="err",l.msg.code="E04"),!t&&!l.rule.isEmail(e)&&(t=!0,l.msg.type="err",l.msg.code="E03"),!t&&!l.rule.lenLimit(e,5,64)&&(t=!0,l.msg.type="err",l.msg.code="E03"),t?l.msg.state=!1:(l.msg.state=!0,l.msg.type="ok",l.msg.code="E01"),l.cache_msg=i.core.json.clone(l.msg)},a={verify:function(){l.pars.iorecords=!0;var n={type:l.type,value:encodeURIComponent(l.value())};n.type=t.type||l.type;var r=e.getAttribute("from");r&&(n=i.core.json.merge(n,{from:r})),l.pars.proxy.request(l.pars.iokey,{onSuccess:function(e){l.msg.type="ok",l.msg=i.parseParam(l.msg,e.data||{}),l.msg.state=!0,l.cache_msg=i.core.json.clone(l.msg),l.fire()},onError:function(e){l.msg=i.parseParam(l.msg,e.data||{}),l.msg.msg=e.msg,l.msg.state=!1,l.msg.type="err",l.cache_msg=i.core.json.clone(l.msg),l.fire()}},n)}},f={focus:function(){l.cache_value=l.value(),l.msg.state=!1,l.msg.action="focus",l.msg.type="tip",l.msg.code="E02",l.fire()},blur:function(){e.value=l.rule.reNullChar(e.value),l.msg.action="blur";var t=l.value();if(t&&l.cache_value==t&&l.pars.proxy&&l.pars.iokey){l.msg=i.core.json.clone(l.cache_msg),l.fire(),l.cache_value=null;return}l.cache_msg=null,l.pars.iodelay===0&&!l.pars.proxy&&!l.pars.iokey?(r(),l.fire()):n=setTimeout(function(){r(),l.msg.state&&l.pars.proxy&&l.pars.iokey&&!l.rule.isEmpty(t)&&(l.msg.type="loading",a.verify()),l.fire(),clearTimeout(n),n=null},l.pars.iodelay)}},l=o(e,t,{evtAct:f,check:r}),c=i.core.obj.sup(l,["initPars"]);return l.initPars=function(){c.initPars(),l.errText=s(t.errText||u),l.type="email"},l.pars.auto&&l.init(),l.value()&&setTimeout(function(){i.fireEvent(e,"blur")},100),l}},f:function(e,t,n,r){var i=n("b"),s,o=function(e){if(typeof e=="string")return i.core.util.language(e,s);for(var t in e)e[t]=o(e[t]);return e};e.exports=function(e,t){return s=t||window.$LANG||{},o(e)}},F:function(e,t,n,r){var i=n("b"),s=n("g"),o=n("G"),u=n("d");e.exports=function(e,t,n){var r=s(),a=[];return r.preInit=function(){r.id=i.core.dom.uniqueID(e),r.dataType=o,r.rule=u,r.pars=i.parseParam(r.dataType.get("initPars"),t)},r.init=function(){r.initPars(),r.build(),r.bind()},r.initPars=function(){r.check(),r.msg.msg=r.errText[r.msg.code]||"",r.msg.action="init",r.cache_value=null,r.old_value=r.value();var e=["must","disabled"];for(var t=0,n=e.length;t<n;t++){var i=e[t];r.pars[i]=r.rule.turnBoolean(r.pars[i])}},r.build=function(){r.rule.isEmpty(e.defaultValue)&&(r.pars.text?e.value=r.pars.text:e.value=""),r.pars.disabled&&r.disabled(r.pars.disabled),r.node=e},r.bind=function(){for(var t in n.evtAct)i.addEvent(e,t,n.evtAct[t]);if(r.pars.iokey){var s=function(){r.pars.iorecords=!1};i.addEvent(e,"change",s)}},r.check=function(){return r.msg=r.dataType.get("msg"),r.msg.id=r.id,r.msg.action="check",r.pars.disabled?(r.msg.state=!0,r.msg.type="empty",r.msg.code="E01"):n.check&&n.check(),r.msg.msg=r.errText[r.msg.code],r.msg},r.setMust=function(e){e=r.rule.turnBoolean(e);if(e==undefined)return;r.pars.must=e},r.setMsg=function(e){r.pars.iokey&&(r.pars.iorecords=!1),r.msg=i.parseParam(r.dataType.get("msg"),e)},r.valCacheCtrl={set:function(e){a.push(e)},isVal:function(e){return i.core.arr.indexOf(i.trim(e),a)>=0}},r.fire=function(){r.errText[r.msg.code]&&(r.msg.msg=r.errText[r.msg.code]);var e={};e[r.type]=r.msg,r.pars.hook&&i.custEvent.fire(r.pars.hook,"check",e)},r.disabled=function(t){t=r.rule.turnBoolean(t);if(t==undefined)return;r.pars.disabled=t,t?e.disabled=!0:e.disabled=!1},r.name=function(){return e.getAttribute("name")||r.id},r.value=function(t){if(typeof t=="undefined")return e.value===r.pars.text?"":e.value.replace(/^\s+|\s+$/g,"");e.value=t},r.reset=function(e){r.value(r.old_value),r.pars=i.parseParam(r.dataType.get("initPars"),t),r.check(),r.msg.action="reset",!e&&r.fire()},r.destroy=function(){for(var t in n.evtAct)i.removeEvent(e,t,n.evtAct[t])},r.preInit(),r}},g:function(e,t,n,r){var i=n("b");e.exports=function(){var e={};e.frame=["id","preInit","init","initPars","build","bind","errText","setMust","setMsg","disabled","check","name","value","reset","fire","destroy"];for(var t in e.frame)e[e.frame[t]]=i.core.func.empty;return e}},G:function(e,t,n,r){var i=n("b"),s=n("f"),o={msg:{id:"",state:!0,type:"empty",code:"",action:"",msg:"",iodata:null,iorecords:!1},initPars:{text:"",hook:null,type:"",proxy:null,iokey:null,disabled:!1,iodelay:0,must:!0,auto:!0},errText:{E00:"#L{系统繁忙}"}},u={};u.get=function(e){return e=="errText"&&(o[e]=s(o[e])),i.core.json.clone(o[e])||{}},e.exports=u},h:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{请输入6-16位数字、字母或常用符号，字母区分大小写}",E03:"#L{请输入密码}",E04:"#L{请输入6-16位数字、字母或常用符号，字母区分大小写}",E05:"#L{请输入6-16位数字、字母或常用符号，字母区分大小写}",E06:"#L{您的密码很安全}",E07:"#L{您的密码还可以更复杂些}",E08:"#L{弱：您输入的密码强度过弱，请重新输入，试试字母、数字、常用符号的组合}"};e.exports=function(e,t){t=t||{};var n=function(e){return h.rule.isWeakPasswd(e)?0:h.rule.isStrongPasswd(e)?2:1},r=function(){var e=h.value().replace(/^\s+|\s+$/g,""),t=!1;if(!h.pars.must&&h.rule.isEmpty(e)){h.msg.state=!0,h.msg.type="empty",h.msg.code="E01";return}!t&&h.rule.isEmpty(e)&&(t=!0,h.msg.type="err",h.msg.code="E03"),!t&&!h.rule.lenLimit(e,6,16)&&(t=!0,h.msg.type="err",h.msg.code="E04"),!t&&h.rule.isWeird(e)&&(t=!0,h.msg.type="err",h.msg.code="E05");if(!t){var r=n(e);h.msg.type="power"+r,r==0?(h.msg.type="err",h.msg.code="E08",h.msg.state=!1):(h.msg.state=!0,h.msg.code=r==1?"E07":"E06")}else h.msg.state=!1},a=i.core.dom.next(e),f={init:function(){f.auto()},auto:function(){h.rule.isEmpty(h.value())?f.show():f.hide()},show:function(){a&&(a.style.display="",i.addEvent(a,"click",function(){e.focus(),i.removeEvent(a,"click",arguments.callee)}))},hide:function(){a&&(a.style.display="none")}},l=!1,c={focus:function(){l=!0,setTimeout(function(){l=!1},100),h.cache_value=h.value(),h.msg.state=!1,h.msg.action="focus",h.msg.type="tip",h.msg.code="E02",h.fire(),f.hide()},keydown:function(e){var t,n;if(!(t=e)||!(n=t.keyCode))return;n==32&&i.stopEvent()},keyup:function(e){var t,n;if(!(t=e)||!(n=t.keyCode))return;if(n==32)return;if(l)return;h.msg.action="keyup",r(),h.fire()},blur:function(){e.value=h.rule.reNullChar(e.value),h.msg.action="blur",r(),h.fire(),f.auto()}},h=o(e,t,{evtAct:c,check:r}),p=i.core.obj.sup(h,["initPars"]);return h.initPars=function(){p.initPars(),h.errText=s(u),h.type="password"},h.pars.auto&&h.init(),f.init(),h}},H:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{请输入原手机号码}",E03:"#L{请输入手机号码}",E04:"#L{原有手机号输入有误，非中国大陆地区号码请增加区号}"};e.exports=function(e,t){var n,r;t=t||{};var a=function(){var e=l.value(),t=!1;if(!l.pars.must&&l.rule.isEmpty(e)){l.msg.state=!0,l.msg.type="empty",l.msg.code="E01",l.cache_msg=i.core.json.clone(l.msg);return}!t&&l.rule.isEmpty(e)&&(t=!0,l.msg.type="err",l.msg.code="E03"),!t&&!/^\d+(\-\d+)?$/.test(e)&&(t=!0,l.msg.type="err",l.msg.code="E04"),t?l.msg.state=!1:(l.msg.state=!0,l.msg.type="ok",l.msg.code="E01"),l.cache_msg=i.core.json.clone(l.msg)},f={focus:function(){l.cache_value=l.value(),l.msg.state=!1,l.msg.action="focus",l.msg.type="tip",l.msg.code="E02",l.fire()},blur:function(){e.value=l.rule.reNullChar(e.value),l.msg.action="blur";var s=l.value();if(s&&l.cache_value==s&&l.pars.proxy&&l.pars.iokey){l.msg=i.core.json.clone(l.cache_msg),l.fire(),l.cache_value=null;return}l.cache_msg=null,l.pars.iodelay===0&&!l.pars.proxy&&!l.pars.iokey?(a(),l.fire()):n=setTimeout(function(){a();if(l.msg.state&&l.pars.proxy&&l.pars.iokey){l.msg.type="loading",l.pars.iorecords=!0;var e;t.type?e={type:t.type,value:encodeURIComponent(l.value())}:e={type:"unbindcheck",mobile:encodeURIComponent(l.value())},r=l.pars.proxy.request(l.pars.iokey,{onSuccess:function(e){l.msg.type="ok",l.msg=i.parseParam(l.msg,e.data||{}),l.msg.state=!0,l.cache_msg=i.core.json.clone(l.msg),l.fire()},onError:function(e){l.msg=i.parseParam(l.msg,e.data||{}),l.msg.msg=e.msg,l.msg.state=!1,l.msg.type="err",l.cache_msg=i.core.json.clone(l.msg),l.fire()}},e)}l.fire()},l.pars.iodelay)}},l=o(e,t,{evtAct:f,check:a}),c=i.core.obj.sup(l,["initPars"]);return l.initPars=function(){c.initPars(),l.errText=s(t.errText||u),l.type="mobile"},l.trans=function(){return r},l.pars.auto&&l.init(),l}},i:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{请输入验证码}",E03:"#L{验证码输入错误}"};e.exports=function(e,t){t=t||{};var n=function(){var e=a.value().replace(/^\s+|\s+$/g,""),t=!1;if(!a.pars.must&&a.rule.isEmpty(e)){a.msg.state=!0,a.msg.type="empty",a.msg.code="E01";return}!t&&a.rule.isEmpty(e)&&(t=!0,a.msg.type="err",a.msg.code="E02"),!t&&!a.rule.lenLimit(e,6,6)&&(t=!0,a.msg.type="err",a.msg.code="E03"),!t&&!a.rule.isNumber(e)&&(t=!0,a.msg.type="err",a.msg.code="E03"),t?a.msg.state=!1:(a.msg.state=!0,a.msg.type="empty",a.msg.code="E01")},r={focus:function(){a.cache_value=a.value(),a.msg.state=!1,a.msg.action="focus",a.msg.type="tip",a.msg.code="E02",a.fire()},blur:function(){e.value=a.rule.reNullChar(e.value),a.msg.action="blur",n(),a.fire()}},a=o(e,t,{evtAct:r,check:n}),f=i.core.obj.sup(a,["initPars"]);return a.initPars=function(){f.initPars(),a.errText=s(t.errText||u),a.type="activation"},a.pars.auto&&a.init(),a}},I:function(e,t,n,r){var i=n("b");e.exports=function(e){for(var t in e)e[t]&&e[t].length==1&&(e[t]=e[t][0]);return e}},j:function(e,t,n,r){var i=n("J"),s=i(),o=s.register;o("getarea",{url:"/nguide/aj/area",method:"post"}),o("language",{url:"/set/aj5/prefer/lang",method:"post"}),o("nickname",{url:"/set/aj5/userinfo/commitnickname",method:"post"}),o("checkform",{url:"/set/aj5/userinfo/checknickname",method:"post"}),o("loginname",{url:"/set/aj5/userinfo/commituserpwd",method:"post"}),o("sendcode",{url:"/set/aj5/mobile/sendsms",method:"post"}),o("checkloginname",{url:"/set/aj5/userinfo/formcheck",method:"get"}),o("personalDataFrame",{url:"/set/aj5/userinfo/displayuserinfo",method:"post"}),o("personalData",{url:"/set/aj5/userinfo/commituserinfo",method:"post"}),o("enterpriseInfoFrame",{url:"/set/aj5/userinfo/displayqiyeinfo",method:"post"}),o("enterpriseInfo",{url:"/set/aj5/userinfo/commitqiyeinfo",method:"post"}),o("qcodeFrame",{url:"/set/aj5/userinfo/displayqrcode",method:"post"}),o("jobFrame",{url:"/set/aj5/userinfo/displaycompany",method:"post"}),o("job",{url:"/set/aj5/userinfo/commitcompany",method:"post"}),o("jobDel",{url:"/set/aj5/userinfo/delcompany",method:"post"}),o("companylist",{url:"/set/aj5/userinfo/companyrelate",method:"post"}),o("jobCommend",{url:"/set/aj5/userinfo/companyuser",method:"post"}),o("follow",{url:"/set/aj5/userinfo/attadd",method:"post"}),o("eduFrame",{url:"/set/aj5/userinfo/displayedu",method:"post"}),o("edu",{url:"/set/aj5/userinfo/commitedu",method:"post"}),o("eduDel",{url:"/set/aj5/userinfo/delschool",method:"post"}),o("schoollist",{url:"/set/aj5/userinfo/schoollist",method:"post"}),o("eduCommend",{url:"/set/aj5/userinfo/eduuser",method:"post"}),o("departmentlist",{url:"/set/aj5/userinfo/department",method:"post"}),o("tagFrame",{url:"/set/aj5/userinfo/displaytag",method:"post"}),o("tagadd",{url:"/set/aj5/userinfo/committag",method:"post"}),o("tagdel",{url:"/set/aj5/userinfo/deltag",method:"post"}),o("tagchooser",{url:"/set/aj5/userinfo/tagchooser",method:"post"}),o("tagsuggest",{url:"/set/aj5/userinfo/tagsuggest",method:"post"}),o("domainFrame",{url:"/set/aj5/userinfo/displaydomain",method:"post"}),o("domaincommit",{url:"/set/aj5/userinfo/commitdomain",method:"post"}),o("receiveFrame",{url:"/set/aj5/userinfo/displayaddress",method:"post"}),o("province",{url:"/set/aj5/userinfo/getaddrprovince",method:"post"}),o("city",{url:"/set/aj5/userinfo/getaddrcity",method:"post"}),o("area",{url:"/set/aj5/userinfo/getaddrarea",method:"post"}),o("setDefault",{url:"/set/aj5/userinfo/addressdefault",method:"post"}),o("addresscommit",{url:"/set/aj5/userinfo/commitaddress",method:"post"}),o("addressdel",{url:"/set/aj5/userinfo/deladdress",method:"post"}),o("setIndex",{url:"/set/aj5/userinfo/displayaddrcard",method:"post"}),o("recomSave",{url:"/set/aj5/privacy/editprivacy?type=recom",method:"post"}),o("findSave",{url:"/set/aj5/privacy/editprivacy?type=find",method:"post"}),o("geoSave",{url:"/set/aj5/privacy/editprivacy?type=geo",method:"post"}),o("contactSave",{url:"/set/aj5/privacy/editprivacy?type=contact",method:"post"}),o("blackListFrame",{url:"/set/aj5/privacy/getblacklist?unfold=1",method:"get"}),o("blackListData",{url:"/set/aj5/privacy/getblacklist",method:"get"}),o("blackListDel",{url:"/set/aj5/privacy/delblack",method:"post"}),o("feedUserFrame",{url:"/set/aj5/privacy/getfeeduser?unfold=1",method:"get"}),o("feedUserData",{url:"/set/aj5/privacy/getfeeduser",method:"get"}),o("feedUserDel",{url:"/set/aj5/privacy/delfeeduser",method:"post"}),o("feedUserAdd",{url:"/set/aj5/privacy/addfeeduser",method:"post"}),o("feedUserSuggest",{url:"/set/aj5/privacy/chooser",method:"get"}),o("feedKeywordFrame",{url:"/set/aj5/privacy/getfeedkeyword?unfold=1",method:"get"}),o("feedKeywordDel",{url:"/set/aj5/privacy/delfeedkeyword",method:"post"}),o("feedKeywordAdd",{url:"/set/aj5/privacy/addfeedkeyword",method:"post"}),o("feedSourceFrame",{url:"/set/aj5/privacy/getfeedsource?unfold=1",method:"get"}),o("feedSourceData",{url:"/set/aj5/privacy/getfeedsource",method:"get"}),o("feedSourceDel",{url:"/set/aj5/privacy/delfeedsource",method:"post"}),o("feedWbFrame",{url:"/set/aj5/privacy/getfeedwb?unfold=1",method:"get"}),o("feedMessageFrame",{url:"/set/aj5/privacy/getmessageuser?unfold=1",method:"get"}),o("feedMessageData",{url:"/set/aj5/privacy/getmessageuser",method:"get"}),o("feedMessageDel",{url:"/set/aj5/privacy/delmessageuser",method:"post"}),o("feedMessageAdd",{url:"/set/aj5/privacy/addmessageuser",method:"post"}),o("feedGroupFrame",{url:"/set/aj5/privacy/getfeedgroup?unfold=1",method:"get"}),o("feedGroupData",{url:"/set/aj5/privacy/getfeedgroup",method:"get"}),o("feedGroupDel",{url:"/set/aj5/privacy/delfeedgroup",method:"post"}),o("feedGroupAdd",{url:"/set/aj5/privacy/addfeedgroup",method:"post"}),o("setlanguage",{url:"/set/aj5/prefer/lang",method:"post"}),o("setwatermarking",{url:"/set/aj5/prefer/watermark",method:"post"}),o("setwebim",{url:"/set/aj5/prefer/webim",method:"post"}),o("setmail",{url:"/set/aj5/prefer/mail",method:"post"}),o("setlabel",{url:"/set/aj5/prefer/yellowlabel",method:"post"}),o("setbadge",{url:"/set/aj5/prefer/badge",method:"post"}),o("atme",{url:"/set/aj5/message/atme",method:"post"}),o("atmecommit",{url:"/set/aj5/message/atmecommit",method:"post"}),o("friends",{url:"/set/aj5/message/friends",method:"post"}),o("friendscommit",{url:"/set/aj5/message/friendscommit",method:"post"}),o("newfans",{url:"/set/aj5/message/newfans",method:"post"}),o("newfanscommit",{url:"/set/aj5/message/newfanscommit",method:"post"}),o("comment",{url:"/set/aj5/message/comment",method:"post"}),o("commentcommit",{url:"/set/aj5/message/commentcommit",method:"post"}),o("sinanews",{url:"/set/aj5/message/sinanews",method:"post"}),o("sinanewscommit",{url:"/set/aj5/message/sinanewscommit",method:"post"}),o("sinat",{url:"/set/aj5/message/sinat",method:"post"}),o("sinatcommit",{url:"/set/aj5/message/sinatcommit",method:"post"}),o("message",{url:"/set/aj5/message/message",method:"post"}),o("messagecommit",{url:"/set/aj5/message/messagecommit",method:"post"}),o("praisecommit",{url:"/set/aj5/message/attitudecommit",method:"post"}),o("updateFace",{url:"/set/aj5/photo/setversion",method:"get"}),o("bind",{url:"/set/aj5/mobile/bind",method:"post"}),o("unbind",{url:"/set/aj5/mobile/unbind",method:"post"}),o("setcode",{url:"/set/aj5/mobile/sendcode",method:"post"}),o("setting",{url:"/set/aj5/mobile/setting",method:"post"}),o("checkphone",{url:"/set/aj5/mobile/checkphone",method:"get"}),e.exports=s},J:function(e,t,n,r){var i=n("b"),s={};s.ajax=n("k"),s.jsonp=n("K"),s.ijax=n("l");var o=i.core.json.merge;e.exports=function(){var e={},t={},n={},r=function(e,t){return function(r,i){try{t.onComplete(r,i)}catch(s){}try{r.code==="100000"?t.onSuccess(r,i):t.onError(r,i)}catch(s){}for(var o in n[e])try{n[e][o](r,i)}catch(s){}}},u=function(e,t,r){return function(i){try{t.onComplete(i,r)}catch(s){}try{i.code==="100000"?t.onSuccess(i,r):t.onError(i,r)}catch(s){}for(var o in n[e])try{n[e][o](i,r)}catch(s){}}};return e.register=function(e,r){if(typeof t[e]!="undefined")throw e+" registered";t[e]=r,n[e]={}},e.addHook=function(e,t){var r=i.core.util.getUniqueKey();return n[e][r]=t,r},e.rmHook=function(e,t){n[e]&&n[e][t]&&delete n[e][t]},e.getTrans=function(e,n){var i=o(t[e],n);i.onComplete=r(e,n);var u=t[e].requestMode,a="ajax";if(u==="jsonp"||u==="ijax")a=u;return s[a](i)},e.request=function(e,n,r){var s=o(t[e],n);s.onComplete=u(e,n,r),s=i.core.obj.cut(s,["noqueue"]),s.args=r;var a=t[e].requestMode;return a==="jsonp"?i.jsonp(s):a==="ijax"?i.ijax(s):i.ajax(s)},e}},k:function(e,t,n,r){var i=n("b"),s=function(e,t,n){t=t|0||1,n=n||"fail";var r=e.args;r.__rnd&&delete r.__rnd,(new Image).src="http://weibolog.sinaapp.com/?t="+t+"&u="+encodeURIComponent(e.url)+"&p="+encodeURIComponent(i.core.json.jsonToQuery(r))+"&m="+n};e.exports=function(e){var t={},n=[],r=null,o=!1,u=i.parseParam({url:"",method:"get",responseType:"json",timeout:3e4,onTraning:i.funcEmpty,isEncode:!0},e);u.onComplete=function(t){o=!1,e.onComplete(t,u.args),setTimeout(a,0)},u.onFail=function(t){o=!1;if(typeof e.onFail=="function")try{e.onFail(t,u.args)}catch(n){}setTimeout(a,0);try{s(u)}catch(n){}},u.onTimeout=function(t){try{s(u),e.onTimeout(t)}catch(n){}};var a=function(){if(!n.length)return;if(o===!0)return;o=!0,u.args=n.shift();if(u.method.toLowerCase()=="post"){var e=i.core.util.URL(u.url);e.setParam("__rnd",+(new Date)),u.url=e.toString()}r=i.ajax(u)},f=function(e){while(n.length)n.shift();o=!1;if(r)try{r.abort()}catch(t){}r=null};return t.request=function(t){t||(t={}),e.noQueue&&f();if(!e.uniqueRequest||!r)n.push(t),t._t=0,a()},t.abort=f,t}},K:function(e,t,n,r){var i=n("b");e.exports=function(e){var t=i.parseParam({url:"",method:"get",responseType:"json",varkey:"_v",timeout:3e4,onComplete:i.funcEmpty,onTraning:i.funcEmpty,onFail:i.funcEmpty,isEncode:!0},e),n=[],r={},s=!1,o=function(){if(!n.length)return;if(s===!0)return;s=!0,r.args=n.shift(),r.onComplete=function(e){s=!1,t.onComplete(e,r.args),setTimeout(o,0)},r.onFail=function(e){s=!1,t.onFail(e),setTimeout(o,0)},i.jsonp(i.core.json.merge(t,{args:r.args,onComplete:function(e){r.onComplete(e)},onFail:function(e){try{r.onFail(e)}catch(t){}}}))},u={};return u.request=function(e){e||(e={}),n.push(e),e._t=1,o()},u.abort=function(e){while(n.length)n.shift();s=!1,r=null},u}},l:function(e,t,n,r){var i=n("b");e.exports=function(e){var t=i.parseParam({url:"",timeout:3e4,isEncode:!0,abaurl:null,responseName:null,varkey:"callback",abakey:"callback"},e),n=[],r=null,s=!1;t.onComplete=function(n,r){s=!1,e.onComplete(n,t.form,r),t.form=null,t.args=null,setTimeout(o,0)},t.onFail=function(n,r){s=!1,e.onFail(n,t.form,r),t.form=null,t.args=null,setTimeout(o,0)};var o=function(){var e;if(!n.length)return;if(s===!0)return;s=!0,e=n.shift(),t.args=e.args,t.form=e.form,r=i.ijax(t)},u=function(e){while(n.length)n.shift();s=!1;if(r)try{r.abort()}catch(t){}r=null},a={};return a.request=function(t,r){if(!i.isNode(t))throw"[kit.io.ijax.request] need a form as first parameter";r||(r={}),e.noQueue&&u(),n.push({form:t,args:r}),o()},a.abort=u,a}},L:function(e,t,n,r){var i=n("b"),s=n("c"),o={formTips:["<#et createGuide data>",'<#if (data.type=="empty")></#if>','<#if (data.type=="tip")>','<p class="notice"><span class="icon_warnS"></span>${data.msg}</p>',"</#if>",'<#if (data.type=="err")>','<p class="error"><span class="icon_delS"></span>${data.msg}</p>',"</#if>",'<#if (data.type=="loading")>','<p class="notice"><span class="loading"></span></p>',"</#if>",'<#if (data.type=="warn")>','<p class="notice"><span class="icon_warnS"></span>${data.msg}</p>',"</#if>",'<#if (data.type=="ok")>','<span class="icon_succ"></span>',"</#if>",'<#if (data.type=="power0")>','<p class="notice"><span class="color_week">#L{弱}：</span>${data.msg}</p>',"</#if>",'<#if (data.type=="power1")>','<p class="notice"><span class="color_middle">#L{中}：</span>${data.msg}</p>',"</#if>",'<#if (data.type=="power2")>','<p class="notice"><span class="color_strong">#L{强}：</span>${data.msg}</p>',"</#if>","</#et>"].join(""),newFormTips:["<#et createGuide data>",'<#if (data.type=="empty")></#if>','<#if (data.type=="tip")>','<div class="W_tips empty clearfix">','<p class="icon">','<span class="icon_warnS"></span>',"</p>",'<p class="txt S_txt2">${data.msg}</p>',"</div>","</#if>",'<#if (data.type=="err")>','<div class="W_tips empty clearfix">','<p class="icon">','<span class="icon_rederrorS"></span>',"</p>",'<p class="txt S_txt2">${data.msg}</p>',"</div>","</#if>",'<#if (data.type=="loading")>','<div class="W_tips empty clearfix">','<p class="icon">','<span class="loading"></span>',"</p>",'<p class="txt S_txt2"></p>',"</div>","</#if>",'<#if (data.type=="warn")>','<div class="W_tips empty clearfix">','<p class="icon">','<span class="icon_rederrorS"></span>',"</p>",'<p class="txt S_txt2">${data.msg}</p>',"</div>","</#if>",'<#if (data.type=="ok")>',"</#if>",'<#if (data.type=="power0")>','<p class="notice"><span class="color_week">#L{弱}：</span>${data.msg}</p>',"</#if>",'<#if (data.type=="power1")>','<p class="notice"><span class="color_middle">#L{中}：</span>${data.msg}</p>',"</#if>",'<#if (data.type=="power2")>','<p class="notice"><span class="color_strong">#L{强}：</span>${data.msg}</p>',"</#if>","</#et>"].join(""),nickRecommend:["<#et userlist data>","<#list data as item>",'<label for="${item.id}" action-type="selected_nickname" action-data="name=${item.name}"><input type="radio" class="W_radio" value="" name="nickRecommend" id="${item.id}">${item.name}</label>',"</#list>","</#et>"].join(""),tipsUserInfo:["<#et createGuide data>",'<#if (data.type=="empty")></#if>','<#if (data.type=="tip")>','<i class="W_icon icon_warnS"></i><span class="txt S_txt1">${data.msg}</span>',"</#if>",'<#if (data.type=="err")>','<i class="W_icon icon_rederrorS"></i><span class="txt S_txt1">${data.msg}</span>',"</#if>",'<#if (data.type=="loading")>','<div class="W_tips empty clearfix">','<p class="icon">','<span class="loading"></span>',"</p>",'<p class="txt S_txt2"></p>',"</div>","</#if>",'<#if (data.type=="warn")>','<span class="icon_rederrorS"></span>',"${data.msg}","</#if>",'<#if (data.type=="ok")>',"</#if>","</#et>"].join(""),descTipsUserInfo:["<#et createGuide data>",'<#if (data.type=="empty")></#if>','<#if (data.type=="tip")>','<span class="S_txt2">${data.msg}</span>',"</#if>",'<#if (data.type=="err")>','<span class="c_red">${data.msg}</span>',"</#if>",'<#if (data.type=="warn")>','<span class="c_red">${data.msg}</span>',"</#if>",'<#if (data.type=="ok")>',"</#if>","</#et>"].join("")};e.exports=function(e,t){var n=i.parseParam({isEasy:!0,data:{}},t);return n.isEasy?s(i.core.util.easyTemplate(o[e],n.data||{}).toString()):s(o[e])}},m:function(e,t,n,r){var i=n("b"),s=n("c");e.exports=function(e,t){if(!i.isNode(e))throw"submitBtn need node !";var n={},r=i.sizzle("span",e)[0];return t?t=i.parseParam({loadHtml:"#L{保存}",normalHtml:"#L{保存}"},t):t={loadHtml:'<b class="loading"></b>'+r.innerHTML,normalHtml:r.innerHTML},n.setLoading=function(){r&&(r.innerHTML=s(t.loadHtml))},n.setNormal=function(){r&&(r.innerHTML=s(t.normalHtml))},n.getDom=function(){return e},n}},M:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("I"),u=n("n"),a=n("N"),f=n("R"),l=n("s"),c={IO:null,IOKey:"",param:{}};e.exports=function(e,t){var n,r,h,p={opened:!1,edited:!1,cached:!1},d,v={init:function(){v.parseParam(),v.parseDOM(),v.bind(),v.autoOpen()},parseParam:function(){t=i.parseParam(c,t||{})},parseDOM:function(){d=i.core.dom.uniqueID(e),r=o(i.builder(e).list),i.getStyle(r.content,"display")!=="none"&&v.set.open(),i.isNode(i.core.dom.firstChild(r.content))&&v.set.cache()},bind:function(){n=i.core.evt.delegatedEvent(e);for(var t in v.evts)n.add("drawer_"+t,"click",v.evts[t]);f.register("drawer.close",v.handle.canBeClose),i.custEvent.define(m,["renderSuccess","afterDiscard","close","open"])},autoOpen:function(){var t=i.URL(location.href).getHash("open");t&&t.indexOf("pl_")!=0&&(t="pl_"+t),e==i.E(t)&&(h=t,v.handle.canBeOpen())},is:{edited:function(){return p.edited},opened:function(){return p.opened},cached:function(){return p.cached}},set:{open:function(){p.opened=!0},close:function(){p.opened=!1},edit:function(){p.edited=!0},revert:function(){p.edited=!1},cache:function(){p.cached=!0},empty:function(){p.cached=!1}},render:{content:function(e){r.content.innerHTML=e},concise:function(e){r.concise.innerHTML=e}},evts:{toggle:function(e){return i.preventDefault(e.evt),v.is.opened()?v.handle.canBeClose():v.handle.canBeOpen(),!1},open:function(e){return i.preventDefault(e.evt),v.handle.canBeOpen(),!1},close:function(e){return i.preventDefault(e.evt),v.handle.canBeClose(),!1}},handle:{getContent:function(n){t.IO&&t.IOKey&&t.IO.getTrans(t.IOKey,{onSuccess:function(t){t.data.html&&v.render.content(t.data.html),t.data.desc&&v.render.concise(t.data.desc),v.set.cache(),typeof n=="function"&&n(),i.custEvent.fire(m,"renderSuccess");if(h){var r=i.core.dom.position(e);window.scrollTo(r.l,r.t-50),h=undefined}},onError:function(e){l(e.msg)},onFailed:function(){l(ret.msg)}}).request(t.param||{})},open:function(){r.drawer_toggle.innerHTML=u(r.drawer_toggle).close,i.addClassName(e,"account_unfold"),i.removeClassName(e,"SW_fun_bg"),i.setStyle(r.concise,"display","none"),i.setStyle(r.content,"display",""),v.set.open()},close:function(){r.drawer_toggle.innerHTML=u(r.drawer_toggle).open,i.removeClassName(e,"account_unfold"),i.addClassName(e,"SW_fun_bg"),i.setStyle(r.concise,"display",""),i.setStyle(r.content,"display","none"),v.set.close()},clean:function(){v.render.content(""),v.set.empty()},reload:function(){v.handle.getContent()},canBeOpen:function(){if(!f.exec("drawer.close",v.handle.canBeOpen))return;v.is.cached()?(v.handle.open(),h&&setTimeout(function(){var t=i.core.dom.position(e);window.scrollTo(t.l,t.t-50),h=undefined},0),i.custEvent.fire(m,"open")):v.handle.getContent(v.handle.open)},canBeClose:function(e){return v.is.opened()&&i.custEvent.fire(m,"close"),v.is.edited()?(a(s("#L{当前信息尚未保存。修改其他项目将导致当前正在编辑的信息丢失，是否继续？}"),{OK:function(){v.set.revert(),v.handle.close(),typeof e=="function"&&e(),i.custEvent.fire(m,"afterDiscard")}}),!1):(v.handle.close(),!0)}},dom:{all:function(){return r},content:function(){return r.content},concise:function(){return r.concise},toggleBtn:function(){return r.drawer_toggle}}},m={is:v.is,set:v.set,render:v.render,handle:{close:v.handle.canBeClose,clean:v.handle.clean},dom:v.dom,dEvt:function(){return n}};return function(){if(e.firstElementChild.getAttribute("action-type")=="jump"){var t=e.firstElementChild;t.addEventListener("click",function(){window.open("http://company.verified.weibo.com/verify/orgapply")},!1)}}(),v.init(),m}},n:function(e,t,n,r){var i=n("b");e.exports=function(e){return i.isNode(e)?i.queryToJson(e.getAttribute("action-data")||""):{}}},N:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("o"),u=n("O"),a=n("p"),f='<div node-type="outer" class="layer_point"><dl class="point clearfix"><dt><span class="" node-type="icon"></span></dt><dd node-type="inner"><p class="S_txt1" node-type="textLarge"></p><p class="S_txt2" node-type="textComplex"></p><p class="S_txt2" node-type="textSmall"></p></dd></dl><div class="btn"><a href="javascript:void(0)" class="W_btn_d" node-type="OK"></a><a href="javascript:void(0)" class="W_btn_b" node-type="cancel"></a></div></div>',l={success:"icon_succM",error:"icon_errorM",warn:"icon_warnM","delete":"icon_delM",question:"icon_questionM"},c=s,h=null;e.exports=function(e,t){var n,r,s,p,d,v;n=i.parseParam({title:c("#L{提示}"),icon:"question",textLarge:e,textComplex:"",textSmall:"",OK:i.funcEmpty,OKText:c("#L{确定}"),cancel:i.funcEmpty,cancelText:c("#L{取消}")},t),n.icon=l[n.icon],r={},h||(h=o(function(){var e=u(f);return e})),s=h.getOne(),p=a(),p.setContent(s.getOuter()),s.getDom("icon").className=n.icon,s.getDom("textLarge").innerHTML=n.textLarge,s.getDom("textComplex").innerHTML=n.textComplex,s.getDom("textSmall").innerHTML=n.textSmall,s.getDom("OK").innerHTML="<span>"+n.OKText+"</span>",s.getDom("cancel").innerHTML="<span>"+n.cancelText+"</span>",p.setTitle(n.title);var m=function(){d=!0,v=i.htmlToJson(s.getDom("textComplex")),p.hide()};return i.addEvent(s.getDom("OK"),"click",m),i.addEvent(s.getDom("cancel"),"click",p.hide),i.custEvent.add(p,"hide",function(){i.custEvent.remove(p,"hide",arguments.callee),i.removeEvent(s.getDom("OK"),"click",m),i.removeEvent(s.getDom("cancel"),"click",p.hide),h.setUnused(s),d?n.OK(v):n.cancel(v)}),p.show().setMiddle(),s.getDom("OK").focus(),r.cfm=s,r.dia=p,r}},o:function(e,t,n,r){var i=n("b");e.exports=function(e,t){var n,r,s;n=i.parseParam({},t),s=[];var o=function(){var t=e();return s.push({store:t,used:!0}),t},u=function(e){i.foreach(s,function(t,n){if(e===t.store)return t.used=!0,!1})},a=function(e){i.foreach(s,function(t,n){if(e===t.store)return t.used=!1,!1})},f=function(){for(var e=0,t=s.length;e<t;e+=1)if(s[e].used===!1)return s[e].used=!0,s[e].store;return o()};return r={},r.setUsed=u,r.setUnused=a,r.getOne=f,r.getLength=function(){return s.length},r}},O:function(e,t,n,r){var i=n("b"),s=function(e){var t={};return e.style.display=="none"?(e.style.visibility="hidden",e.style.display="",t.w=e.offsetWidth,t.h=e.offsetHeight,e.style.display="none",e.style.visibility="visible"):(t.w=e.offsetWidth,t.h=e.offsetHeight),t},o=function(e,t){t=t||"topleft";var n=null;e.style.display=="none"?(e.style.visibility="hidden",e.style.display="",n=i.core.dom.position(e),e.style.display="none",e.style.visibility="visible"):n=i.core.dom.position(e);if(t!=="topleft"){var r=s(e);t==="topright"?n.l=n.l+r.w:t==="bottomleft"?n.t=n.t+r.h:t==="bottomright"&&(n.l=n.l+r.w,n.t=n.t+r.h)}return n};e.exports=function(e){var t=i.core.dom.builder(e),n=t.list.outer[0],r=t.list.inner[0],u=i.core.dom.uniqueID(n),a={},f=i.core.evt.custEvent.define(a,"show");i.core.evt.custEvent.define(f,"hide");var l=null;return a.show=function(){return n.style.display="",i.core.evt.custEvent.fire(f,"show"),a},a.hide=function(){return n.style.display="none",i.custEvent.fire(f,"hide"),a},a.getPosition=function(e){return o(n,e)},a.getSize=function(e){if(e||!l)l=s.apply(a,[n]);return l},a.html=function(e){return e!==undefined&&(r.innerHTML=e),r.innerHTML},a.text=function(e){return e!==undefined&&(r.innerHTML=i.core.str.encodeHTML(e)),i.core.str.decodeHTML(r.innerHTML)},a.appendChild=function(e){return r.appendChild(e),a},a.getUniqueID=function(){return u},a.getOuter=function(){return n},a.getInner=function(){return r},a.getParentNode=function(){return n.parentNode},a.getDomList=function(){return t.list},a.getDomListByKey=function(e){return t.list[e]},a.getDom=function(e,n){return t.list[e]?t.list[e][n||0]:!1},a.getCascadeDom=function(e,n){return t.list[e]?i.core.dom.cascadeNode(t.list[e][n||0]):!1},a}},p:function(e,t,n,r){var i=n("b"),s=n("P"),o=n("c"),u=n("o"),a=n("q"),f=n("Q"),l='<div class="W_layer" node-type="outer" style="display:none;position:absolute;z-index:10001"><div class="bg"><table border="0" cellspacing="0" cellpadding="0"><tr><td><div class="content" node-type="layoutContent"><div class="title" node-type="title"><span node-type="title_content"></span></div><a href="javascript:void(0);" class="W_close" title="#L{关闭}" node-type="close"></a><div node-type="inner"></div></div></td></tr></table></div></div>',c=o,h=null,p,d=function(){var e=a(c(p.template));return i.custEvent.add(e,"show",function(){f.showUnderNode(e.getOuter())}),i.custEvent.add(e,"hide",function(){f.back(),e.setMiddle()}),s(e.getDom("title"),{actObj:e,moveDom:e.getOuter()}),e.destroy=function(){v(e);try{e.hide(!0)}catch(t){}},e},v=function(e){e.setTitle("").clearContent(),h.setUnused(e)};e.exports=function(e){var t,n=e&&e.template?!0:!1;return p=i.parseParam({template:l},e||{}),n?t=d():(h||(h=u(d)),t=h.getOne(),i.custEvent.add(t,"hide",function(){i.custEvent.remove(t,"hide",arguments.callee),v(t)})),t}},P:function(e,t,n,r){var i=n("b");e.exports=function(e,t){var n,r,s,o,u,a,f,l,c=function(){h(),p()},h=function(){n=i.parseParam({moveDom:e,perchStyle:"border:solid #999999 2px;",dragtype:"perch",actObj:{},pagePadding:5},t),s=n.moveDom,r={},o={},u=i.drag(e,{actObj:n.actObj}),n.dragtype==="perch"&&(a=i.C("div"),f=!1,l=!1,s=a),e.style.cursor="move"},p=function(){i.custEvent.add(n.actObj,"dragStart",d),i.custEvent.add(n.actObj,"dragEnd",v),i.custEvent.add(n.actObj,"draging",m)},d=function(t,r){document.body.style.cursor="move";var s=i.core.util.pageSize().page;o=i.core.dom.position(n.moveDom),o.pageX=r.pageX,o.pageY=r.pageY,o.height=n.moveDom.offsetHeight,o.width=n.moveDom.offsetWidth,o.pageHeight=s.height,o.pageWidth=s.width;if(n.dragtype==="perch"){var u=[];u.push(n.perchStyle),u.push("position:absolute"),u.push("z-index:"+(n.moveDom.style.zIndex+10)),u.push("width:"+n.moveDom.offsetWidth+"px"),u.push("height:"+n.moveDom.offsetHeight+"px"),u.push("left:"+o.l+"px"),u.push("top:"+o.t+"px"),a.style.cssText=u.join(";"),l=!0,setTimeout(function(){l&&(document.body.appendChild(a),f=!0)},100)}e.setCapture!==undefined&&e.setCapture()},v=function(t,r){document.body.style.cursor="auto",e.setCapture!==undefined&&e.releaseCapture(),n.dragtype==="perch"&&(l=!1,n.moveDom.style.top=a.style.top,n.moveDom.style.left=a.style.left,f&&(document.body.removeChild(a),f=!1))},m=function(e,t){var r=o.t+(t.pageY-o.pageY),i=o.l+(t.pageX-o.pageX),u=r+o.height,a=i+o.width,f=o.pageHeight-n.pagePadding,l=o.pageWidth-n.pagePadding;if(u<f&&r>0)s.style.top=r+"px";else{var c;u>=f&&(c=f-o.height);if(r<0||c<0)c=0;s.style.top=c+"px"}a<l&&i>0?s.style.left=i+"px":(i<0&&(s.style.left="0px"),a>=l&&(s.style.left=l-o.width+"px"))};return c(),r.destroy=function(){document.body.style.cursor="auto",typeof s.setCapture=="function"&&s.releaseCapture(),n.dragtype==="perch"&&(l=!1,f&&(document.body.removeChild(a),f=!1)),i.custEvent.remove(n.actObj,"dragStart",d),i.custEvent.remove(n.actObj,"dragEnd",v),i.custEvent.remove(n.actObj,"draging",m),u.destroy&&u.destroy(),n=null,s=null,o=null,u=null,a=null,f=null,l=null},r.getActObj=function(){return n.actObj},r}},q:function(e,t,n,r){var i=n("b"),s=n("O");e.exports=function(e,t){if(!e)throw"ui.mod.dialog need template as first parameter";var n,r,o,u,a,f,l,c,h,p,d,v;h=!0;var m=function(){h!==!1&&r.hide()},g=function(){n=i.parseParam({t:null,l:null,width:null,height:null},t),r=s(e,n),u=r.getOuter(),a=r.getDom("title"),c=r.getDom("title_content"),f=r.getDom("inner"),l=r.getDom("close"),i.addEvent(l,"click",function(e){return i.preventDefault(e),d(),!1}),i.custEvent.add(r,"show",function(){i.hotKey.add(document.documentElement,["esc"],m,{type:"keyup",disableInInput:!0})}),i.custEvent.add(r,"hide",function(){i.hotKey.remove(document.documentElement,["esc"],m,{type:"keyup"}),h=!0})};return g(),v=i.objSup(r,["show","hide"]),d=function(e){return typeof p=="function"&&!e&&p()===!1?!1:(v.hide(),i.contains(document.body,r.getOuter())&&document.body.removeChild(r.getOuter()),o)},o=r,o.show=function(){return i.contains(document.body,r.getOuter())||document.body.appendChild(r.getOuter()),v.show(),o},o.hide=d,o.setPosition=function(e){return u.style.top=e.t+"px",u.style.left=e.l+"px",o},o.setMiddle=function(){var e=i.core.util.winSize(),t=r.getSize(!0),n=i.core.util.scrollPos().top+(e.height-t.h)/2;return u.style.top=(n>0?n:0)+"px",u.style.left=(e.width-t.w)/2+"px",o},o.setTitle=function(e){return c.innerHTML=e,o},o.setContent=function(e){return typeof e=="string"?f.innerHTML=e:f.appendChild(e),o},o.clearContent=function(){while(f.children.length)i.removeNode(f.children[0]);return o},o.setAlign=function(){},o.setBeforeHideFn=function(e){p=e},o.clearBeforeHideFn=function(){p=null},o.unsupportEsc=function(){h=!1},o.supportEsc=function(){h=!0},o}},Q:function(e,t,n,r){function d(){o=i.C("div");var e='<div node-type="outer">';i.core.util.browser.IE6&&(e+='<div style="position:absolute;width:100%;height:100%;"></div>'),e+="</div>",o=i.builder(e).list.outer[0],document.body.appendChild(o),f=!0,a=s(o,"lt");var t=function(){var e=i.core.util.winSize();o.style.cssText=i.core.dom.cssText(o.style.cssText).push("width",e.width+"px").push("height",e.height+"px").getCss()};p.add(a,"beforeFix",t),t()}function v(e){var t;return(t=e.getAttribute(l))||e.setAttribute(l,t=i.getUniqueKey()),">"+e.tagName.toLowerCase()+"["+l+'="'+t+'"]'}var i=n("b"),s=n("r"),o,u=[],a,f=!1,l="STK-Mask-Key",c=i.core.dom.setStyle,h=i.core.dom.getStyle,p=i.core.evt.custEvent,m={getNode:function(){return o},show:function(e,t){return f?(e=i.core.obj.parseParam({opacity:.3,background:"#000000"},e),o.style.background=e.background,c(o,"opacity",e.opacity),o.style.display="",a.setAlign("lt"),t&&t()):(d(),m.show(e,t)),m},hide:function(){return o.style.display="none",u=[],m},showUnderNode:function(e,t){return i.isNode(e)&&m.show(t,function(){c(o,"zIndex",h(e,"zIndex"));var t=v(e),n=i.core.arr.indexOf(u,t);n!=-1&&u.splice(n,1),u.push(t),i.core.dom.insertElement(e,o,"beforebegin")}),m},back:function(){if(u.length<1)return m;var e,t;return u.pop(),u.length<1?m.hide():(t=u[u.length-1])&&(e=i.sizzle(t,document.body)[0])?(c(o,"zIndex",h(e,"zIndex")),i.core.dom.insertElement(e,o,"beforebegin")):m.back(),m},destroy:function(){p.remove(a),o.style.display="none"}};e.exports=m},r:function(e,t,n,r){function u(e){return i.core.dom.getStyle(e,"display")!="none"}function a(e){e=i.core.arr.isArray(e)?e:[0,0];for(var t=0;t<2;t++)typeof e[t]!="number"&&(e[t]=0);return e}function f(e,t,n){if(!u(e))return;var r="fixed",o,a,f,l,c=e.offsetWidth,h=e.offsetHeight,p=i.core.util.winSize(),d=0,v=0,m=i.core.dom.cssText(e.style.cssText);if(!s){r="absolute";var g=i.core.util.scrollPos();d=o=g.top,v=a=g.left;switch(t){case"lt":o+=n[1],a+=n[0];break;case"lb":o+=p.height-h-n[1],a+=n[0];break;case"rt":o+=n[1],a+=p.width-c-n[0];break;case"rb":o+=p.height-h-n[1],a+=p.width-c-n[0];break;case"c":default:o+=(p.height-h)/2+n[1],a+=(p.width-c)/2+n[0]}f=l=""}else{o=l=n[1],a=f=n[0];switch(t){case"lt":l=f="";break;case"lb":o=f="";break;case"rt":a=l="";break;case"rb":o=a="";break;case"c":default:o=(p.height-h)/2+n[1],a=(p.width-c)/2+n[0],l=f=""}}t=="c"&&(o<d&&(o=d),a<v&&(a=v)),m.push("position",r).push("top",o+"px").push("left",a+"px").push("right",f+"px").push("bottom",l+"px"),e.style.cssText=m.getCss()}var i=n("b"),s=!(i.core.util.browser.IE6||document.compatMode!=="CSS1Compat"&&i.IE),o=/^(c)|(lt)|(lb)|(rt)|(rb)$/;e.exports=function(e,t,n){var r,u,l=!0,c;if(i.core.dom.isNode(e)&&o.test(t)){var h={getNode:function(){return e},isFixed:function(){return l},setFixed:function(t){return(l=!!t)&&f(e,r,u),this},setAlign:function(t,n){return o.test(t)&&(r=t,u=a(n),l&&f(e,r,u)),this},destroy:function(){s||s&&i.core.evt.removeEvent(window,"scroll",p),i.core.evt.removeEvent(window,"resize",p),i.core.evt.custEvent.undefine(c)}};c=i.core.evt.custEvent.define(h,"beforeFix"),h.setAlign(t,n);function p(t){t=t||window.event,i.core.evt.custEvent.fire(c,"beforeFix",t.type),l&&(!s||r=="c")&&f(e,r,u)}return s||i.core.evt.addEvent(window,"scroll",p),i.core.evt.addEvent(window,"resize",p),h}}},R:function(e,t,n,r){$=n("b");var i={},s={register:function(e,t){if(typeof e!="string"||typeof t!="function")return;i[e]||(i[e]=[]),i[e].push(t)},list:function(e){return e&&i[e]?i[e]:i},exec:function(e,t){if(i[e]){for(var n in i[e])if(!i[e][n](t))return!1;return!0}}};e.exports=s},s:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("o"),u=n("O"),a=n("p"),f='<div node-type="outer" class="layer_point"><dl class="point clearfix"><dt><span class="" node-type="icon"></span></dt><dd node-type="inner"><p class="S_txt1" node-type="textLarge"></p><p class="S_txt2" node-type="textSmall"></p></dd></dl><div class="btn"><a href="javascript:void(0)" class="W_btn_d" node-type="OK"></a></div></div>',l={success:"icon_succM",error:"icon_errorM",warn:"icon_warnM","delete":"icon_delM",question:"icon_questionM"},c=null,h=function(e,t){e.getDom("icon").className=t.icon,e.getDom("textLarge").innerHTML=t.textLarge,e.getDom("textSmall").innerHTML=t.textSmall,e.getDom("OK").innerHTML="<span>"+t.OKText+"</span>"};e.exports=function(e,t){var n,r,p,d,v;n=i.parseParam({title:s("#L{提示}"),icon:"warn",textLarge:e,textSmall:"",OK:i.funcEmpty,OKText:s("#L{确定}"),timeout:0},t),n.icon=l[n.icon],r={},c||(c=o(function(){var e=u(s(f));return e})),p=c.getOne(),d=a(),d.setContent(p.getOuter()),d.setTitle(n.title),h(p,n);var m=function(e){i.preventDefault(e),d.hide()};return i.addEvent(p.getDom("OK"),"click",m),i.custEvent.add(d,"hide",function(){i.custEvent.remove(d,"hide",arguments.callee),i.removeEvent(p.getDom("OK"),"click",m),c.setUnused(p),clearTimeout(v),n.OK()}),n.timeout&&(v=setTimeout(d.hide,n.timeout)),d.show().setMiddle(),p.getDom("OK").focus(),r.alt=p,r.dia=d,r}},S:function(e,t,n,r){var i=n("b"),s=n("t"),o=i.core.util.easyTemplate;e.exports=function(e){e=i.parseParam({direct:"up",showCallback:i.core.func.empty,hideCallback:i.core.func.empty,type:"succ",msg:""},e);var t=s(e),n=t.getInner(),r=t.getOuter();r.className="W_layer",n.className="bg";var u=e.template||'<#et temp data><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td><div node-type="msgDiv" class="content layer_mini_info"><p class="clearfix"><span class="icon_${data.type}"></span>${data.msg}&nbsp; &nbsp; &nbsp; </p></div></td></tr></tbody></table></#et>',a=i.builder(o(u,{type:e.type,msg:e.msg}).toString());t.setContent(a.box);var f=t.destroy;return t.destroy=function(){f(),t=null},t}},t:function(e,t,n,r){var i=n("b"),s=n("O"),o=10003;e.exports=function(e){var t,n,r,u,a,f='<div node-type="outer" style="position: absolute; clear: both; display:none;overflow:hidden;z-index:10003;" ><div node-type="inner" ></div></div>';return t=i.parseParam({direct:"up",showCallback:i.core.func.empty,hideCallback:i.core.func.empty},e),n=s(f,t),r=n.getOuter(),u=n.getInner(),n.setTipWH=function(){return a=this.getSize(!0),this.tipWidth=a.w,this.tipHeight=a.h,this},n.setTipWH(),n.setContent=function(e){return typeof e=="string"?u.innerHTML=e:u.appendChild(e),this.setTipWH(),this},n.setLayerXY=function(e){if(!e)throw"ui.tipPrototype need pNode as first parameter to set tip position";var n=i.core.dom.position(e),s=n.l,u=e.offsetWidth,a=e.offsetHeight,f=Math.min(Math.max(s+(u-this.tipWidth)/2,i.scrollPos().left),i.scrollPos().left+i.winSize().width-this.tipWidth),l=n.t;t.direct==="down"&&(l+=a);var c=[";"];c.push("z-index:",o++,";"),c.push("height:",this.tipHeight,"px;"),c.push("top:",l,"px;"),c.push("left:",f,"px;"),r.style.cssText+=c.join("")},n.aniShow=function(){var e=this.getOuter();e.style.height="0px",e.style.display="";var n=i.core.ani.tween(e,{end:t.showCallback,duration:250,animationType:"easeoutcubic"});if(t.direct==="down")n.play({height:this.tipHeight},{staticStyle:"overflow:hidden;position:absolute;"});else{var r=parseInt(e.style.top,10)-this.tipHeight;n.play({height:this.tipHeight,top:Math.max(r,i.scrollPos().top)},{staticStyle:"overflow:hidden;position:absolute;"})}},n.anihide=function(){var e=this.getOuter(),n=this,r=i.core.ani.tween(e,{end:function(){e.style.display="none",e.style.height=n.tipHeight+"px",t.hideCallback()},duration:300,animationType:"easeoutcubic"});if(t.direct==="down")r.play({height:0},{staticStyle:"overflow:hidden;position:absolute;"});else{var s=parseInt(e.style.top,10)+this.tipHeight;r.play({height:0,top:s},{staticStyle:"overflow:hidden;position:absolute;"})}},document.body.appendChild(r),n.destroy=function(){document.body.removeChild(r),n=null},n}},T:function(e,t,n,r){var i={},s=document.selection;i.selectionStart=function(e){if(!s)try{return e.selectionStart}catch(t){return 0}var n=s.createRange(),r,i,o=0,u=document.body.createTextRange();try{u.moveToElementText(e)}catch(t){}for(o;u.compareEndPoints("StartToStart",n)<0;o++)u.moveStart("character",1);return o},i.selectionBefore=function(e){return e.value.slice(0,i.selectionStart(e))},i.selectText=function(e,t,n){e.focus();if(!s){e.setSelectionRange(t,n);return}var r=e.createTextRange();r.collapse(1),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()},i.insertText=function(e,t,n,r){e.focus(),r=r||0;if(!s){var o=e.value,u=n-r,a=u+t.length;e.value=o.slice(0,u)+t+o.slice(n,o.length),i.selectText(e,a,a);return}var f=s.createRange();f.moveStart("character",-r),f.text=t},i.replaceText=function(e,t){e.focus();var n=e.value,r=i.getSelectedText(e),o=r.length;if(r.length==0)i.insertText(e,t,i.getCursorPos(e));else{var u=i.getCursorPos(e);if(!s){var f=u+r.length;e.value=n.slice(0,u)+t+n.slice(u+o,n.length),i.setCursor(e,u+t.length);return}var a=s.createRange();a.text=t,i.setCursor(e,u+t.length)}},i.getCursorPos=function(e){var t=0;if(STK.core.util.browser.IE){e.focus();var n=null;n=s.createRange();var r=n.duplicate();r.moveToElementText(e),r.setEndPoint("EndToEnd",n),e.selectionStartIE=r.text.length-n.text.length,e.selectionEndIE=e.selectionStartIE+n.text.length,t=e.selectionStartIE}else if(e.selectionStart||e.selectionStart=="0")t=e.selectionStart;return t},i.getSelectedText=function(e){var t="",n=function(e){return e.selectionStart!=undefined&&e.selectionEnd!=undefined?e.value.substring(e.selectionStart,e.selectionEnd):""};return window.getSelection?t=n(e):t=s.createRange().text,t},i.setCursor=function(e,t,n){t=t==null?e.value.length:t,n=n==null?0:n,e.focus();if(e.createTextRange){var r=e.createTextRange();r.move("character",t),r.moveEnd("character",n),r.select()}else e.setSelectionRange&&e.setSelectionRange(t,t+n)},i.unCoverInsertText=function(e,t,n){n=n==null?{}:n,n.rcs=n.rcs==null?e.value.length:n.rcs*1,n.rccl=n.rccl==null?0:n.rccl*1;var r=e.value,i=r.slice(0,n.rcs),s=r.slice(n.rcs+n.rccl,r==""?0:r.length);e.value=i+t+s,this.setCursor(e,n.rcs+(t==null?0:t.length))},e.exports=i},u:function(e,t,n,r){var i=n("b"),s={ss:1,mm:60,hh:3600,dd:86400};e.exports=function(e,t){var n={},r,o,u={init:function(){r=i.parseParam({time:0,loop:"ss"},e),t=t||function(){}},start:function(e){var e=r.time,n=function(){t({last:e,dd:Math.floor(e/s.dd),hh:Math.floor(e%s.dd/s.hh),mm:Math.floor(e%s.dd%s.hh/s.mm),ss:e%s.mm}),e==0&&clearInterval(o),e-=s[r.loop]};o=setInterval(n,s[r.loop]*1e3)},stop:function(){clearInterval(o)},destroy:function(){}};return u.init(),n.start=u.start,n.stop=u.stop,n.destroy=u.destroy,n}},U:function(e,t,n,r){function i(){}(function(){function r(e,t,n){e!=null&&("number"==typeof e?this.fromNumber(e,t,n):t==null&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function i(){return new r(null)}function s(e,t,n,r,i,s){while(--s>=0){var o=t*this[e++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=o&67108863}return i}function o(e,t,n,r,i,s){var o=t&32767,u=t>>15;while(--s>=0){var a=this[e]&32767,f=this[e++]>>15,l=u*a+f*o;a=o*a+((l&32767)<<15)+n[r]+(i&1073741823),i=(a>>>30)+(l>>>15)+u*f+(i>>>30),n[r++]=a&1073741823}return i}function u(e,t,n,r,i,s){var o=t&16383,u=t>>14;while(--s>=0){var a=this[e]&16383,f=this[e++]>>14,l=u*a+f*o;a=o*a+((l&16383)<<14)+n[r]+i,i=(a>>28)+(l>>14)+u*f,n[r++]=a&268435455}return i}function p(e){return f.charAt(e)}function d(e,t){var n=l[e.charCodeAt(t)];return n==null?-1:n}function v(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function m(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0}function g(e){var t=i();return t.fromInt(e),t}function y(e,t){var n;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else{if(t!=4){this.fromRadix(e,t);return}n=2}this.t=0,this.s=0;var i=e.length,s=!1,o=0;while(--i>=0){var u=n==8?e[i]&255:d(e,i);if(u<0){e.charAt(i)=="-"&&(s=!0);continue}s=!1,o==0?this[this.t++]=u:o+n>this.DB?(this[this.t-1]|=(u&(1<<this.DB-o)-1)<<o,this[this.t++]=u>>this.DB-o):this[this.t-1]|=u<<o,o+=n,o>=this.DB&&(o-=this.DB)}n==8&&(e[0]&128)!=0&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&r.ZERO.subTo(this,this)}function b(){var e=this.s&this.DM;while(this.t>0&&this[this.t-1]==e)--this.t}function w(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else{if(e!=4)return this.toRadix(e);t=2}var n=(1<<t)-1,r,i=!1,s="",o=this.t,u=this.DB-o*this.DB%t;if(o-->0){u<this.DB&&(r=this[o]>>u)>0&&(i=!0,s=p(r));while(o>=0)u<t?(r=(this[o]&(1<<u)-1)<<t-u,r|=this[--o]>>(u+=this.DB-t)):(r=this[o]>>(u-=t)&n,u<=0&&(u+=this.DB,--o)),r>0&&(i=!0),i&&(s+=p(r))}return i?s:"0"}function E(){var e=i();return r.ZERO.subTo(this,e),e}function S(){return this.s<0?this.negate():this}function x(e){var t=this.s-e.s;if(t!=0)return t;var n=this.t;t=n-e.t;if(t!=0)return t;while(--n>=0)if((t=this[n]-e[n])!=0)return t;return 0}function T(e){var t=1,n;return(n=e>>>16)!=0&&(e=n,t+=16),(n=e>>8)!=0&&(e=n,t+=8),(n=e>>4)!=0&&(e=n,t+=4),(n=e>>2)!=0&&(e=n,t+=2),(n=e>>1)!=0&&(e=n,t+=1),t}function N(){return this.t<=0?0:this.DB*(this.t-1)+T(this[this.t-1]^this.s&this.DM)}function C(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function k(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function L(e,t){var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,s=Math.floor(e/this.DB),o=this.s<<n&this.DM,u;for(u=this.t-1;u>=0;--u)t[u+s+1]=this[u]>>r|o,o=(this[u]&i)<<n;for(u=s-1;u>=0;--u)t[u]=0;t[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function A(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB,i=this.DB-r,s=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&s)<<i,t[o-n]=this[o]>>r;r>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}function O(e,t){var n=0,r=0,i=Math.min(e.t,this.t);while(n<i)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){r-=e.s;while(n<this.t)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<e.t)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()}function M(e,t){var n=this.abs(),i=e.abs(),s=n.t;t.t=s+i.t;while(--s>=0)t[s]=0;for(s=0;s<i.t;++s)t[s+n.t]=n.am(0,i[s],t,s,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&r.ZERO.subTo(t,t)}function _(e){var t=this.abs(),n=e.t=2*t.t;while(--n>=0)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function D(e,t,n){var s=e.abs();if(s.t<=0)return;var o=this.abs();if(o.t<s.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=i());var u=i(),a=this.s,f=e.s,l=this.DB-T(s[s.t-1]);l>0?(s.lShiftTo(l,u),o.lShiftTo(l,n)):(s.copyTo(u),o.copyTo(n));var c=u.t,h=u[c-1];if(h==0)return;var p=h*(1<<this.F1)+(c>1?u[c-2]>>this.F2:0),d=this.FV/p,v=(1<<this.F1)/p,m=1<<this.F2,g=n.t,y=g-c,b=t==null?i():t;u.dlShiftTo(y,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),r.ONE.dlShiftTo(c,b),b.subTo(u,u);while(u.t<c)u[u.t++]=0;while(--y>=0){var w=n[--g]==h?this.DM:Math.floor(n[g]*d+(n[g-1]+m)*v);if((n[g]+=u.am(0,w,n,y,0,c))<w){u.dlShiftTo(y,b),n.subTo(b,n);while(n[g]<--w)n.subTo(b,n)}}t!=null&&(n.drShiftTo(c,t),a!=f&&r.ZERO.subTo(t,t)),n.t=c,n.clamp(),l>0&&n.rShiftTo(l,n),a<0&&r.ZERO.subTo(n,n)}function P(e){var t=i();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(r.ZERO)>0&&e.subTo(t,t),t}function H(e){this.m=e}function B(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function j(e){return e}function F(e){e.divRemTo(this.m,null,e)}function I(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function q(e,t){e.squareTo(t),this.reduce(t)}function R(){if(this.t<1)return 0;var e=this[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function U(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function z(e){var t=i();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(r.ZERO)>0&&this.m.subTo(t,t),t}function W(e){var t=i();return e.copyTo(t),this.reduce(t),t}function X(e){while(e.t<=this.mt2)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=e[t]&32767,r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;n=t+this.m.t,e[n]+=this.m.am(0,r,e,t,0,this.m.t);while(e[n]>=e.DV)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function V(e,t){e.squareTo(t),this.reduce(t)}function $(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function J(){return(this.t>0?this[0]&1:this.s)==0}function K(e,t){if(e>4294967295||e<1)return r.ONE;var n=i(),s=i(),o=t.convert(this),u=T(e)-1;o.copyTo(n);while(--u>=0){t.sqrTo(n,s);if((e&1<<u)>0)t.mulTo(s,o,n);else{var a=n;n=s,s=a}}return t.revert(n)}function Q(e,t){var n;return e<256||t.isEven()?n=new H(t):n=new U(t),this.exp(e,n)}function G(){this.i=0,this.j=0,this.S=new Array}function Y(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;n=0;for(t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0}function Z(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function et(){return new G}function st(e){rt[it++]^=e&255,rt[it++]^=e>>8&255,rt[it++]^=e>>16&255,rt[it++]^=e>>24&255,it>=tt&&(it-=tt)}function ot(){st((new Date).getTime())}function ft(){if(nt==null){ot(),nt=et(),nt.init(rt);for(it=0;it<rt.length;++it)rt[it]=0;it=0}return nt.next()}function lt(e){var t;for(t=0;t<e.length;++t)e[t]=ft()}function ct(){}function ht(e,t){return new r(e,t)}function pt(e,t){var n="",r=0;while(r+t<e.length)n+=e.substring(r,r+t)+"\n",r+=t;return n+e.substring(r,e.length)}function dt(e){return e<16?"0"+e.toString(16):e.toString(16)}function vt(e,t){if(t<e.length+11)return alert("Message too long for RSA"),null;var n=new Array,i=e.length-1;while(i>=0&&t>0){var s=e.charCodeAt(i--);s<128?n[--t]=s:s>127&&s<2048?(n[--t]=s&63|128,n[--t]=s>>6|192):(n[--t]=s&63|128,n[--t]=s>>6&63|128,n[--t]=s>>12|224)}n[--t]=0;var o=new ct,u=new Array;while(t>2){u[0]=0;while(u[0]==0)o.nextBytes(u);n[--t]=u[0]}return n[--t]=2,n[--t]=0,new r(n)}function mt(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function gt(e,t){e!=null&&t!=null&&e.length>0&&t.length>0?(this.n=ht(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function yt(e){return e.modPowInt(this.e,this.n)}function bt(e){var t=vt(e,this.n.bitLength()+7>>3);if(t==null)return null;var n=this.doPublic(t);if(n==null)return null;var r=n.toString(16);return(r.length&1)==0?r:"0"+r}var e,t=0xdeadbeefcafe,n=(t&16777215)==15715070;n&&navigator.appName=="Microsoft Internet Explorer"?(r.prototype.am=o,e=30):n&&navigator.appName!="Netscape"?(r.prototype.am=s,e=26):(r.prototype.am=u,e=28),r.prototype.DB=e,r.prototype.DM=(1<<e)-1,r.prototype.DV=1<<e;var a=52;r.prototype.FV=Math.pow(2,a),r.prototype.F1=a-e,r.prototype.F2=2*e-a;var f="0123456789abcdefghijklmnopqrstuvwxyz",l=new Array,c,h;c="0".charCodeAt(0);for(h=0;h<=9;++h)l[c++]=h;c="a".charCodeAt(0);for(h=10;h<36;++h)l[c++]=h;c="A".charCodeAt(0);for(h=10;h<36;++h)l[c++]=h;H.prototype.convert=B,H.prototype.revert=j,H.prototype.reduce=F,H.prototype.mulTo=I,H.prototype.sqrTo=q,U.prototype.convert=z,U.prototype.revert=W,U.prototype.reduce=X,U.prototype.mulTo=$,U.prototype.sqrTo=V,r.prototype.copyTo=v,r.prototype.fromInt=m,r.prototype.fromString=y,r.prototype.clamp=b,r.prototype.dlShiftTo=C,r.prototype.drShiftTo=k,r.prototype.lShiftTo=L,r.prototype.rShiftTo=A,r.prototype.subTo=O,r.prototype.multiplyTo=M,r.prototype.squareTo=_,r.prototype.divRemTo=D,r.prototype.invDigit=R,r.prototype.isEven=J,r.prototype.exp=K,r.prototype.toString=w,r.prototype.negate=E,r.prototype.abs=S,r.prototype.compareTo=x,r.prototype.bitLength=N,r.prototype.mod=P,r.prototype.modPowInt=Q,r.ZERO=g(0),r.ONE=g(1),G.prototype.init=Y,G.prototype.next=Z;var tt=256,nt,rt,it;if(rt==null){rt=new Array,it=0;var ut;if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto&&typeof window.crypto.random=="function"){var at=window.crypto.random(32);for(ut=0;ut<at.length;++ut)rt[it++]=at.charCodeAt(ut)&255}while(it<tt)ut=Math.floor(65536*Math.random()),rt[it++]=ut>>>8,rt[it++]=ut&255;it=0,ot()}ct.prototype.nextBytes=lt,mt.prototype.doPublic=yt,mt.prototype.setPublic=gt,mt.prototype.encrypt=bt,this.RSAKey=mt}).call(i),e.exports=function(e,t,n){var r=new i.RSAKey;return r.setPublic(t,n),r.encrypt(e)}},v:function(e,t,n,r){var i=n("b"),s=n("V");s(i.E("pl_personalInfo_nickname"))},V:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("T"),u=n("C"),a=n("e"),f=n("w"),l=n("I"),c=n("j"),h=n("L"),p=n("m"),d=n("M"),v=n("S"),m=n("N"),g=n("s"),y={};y.nickname=f,e.exports=function(e){var t={},n,r,o,f,b,w,E=["nickname","realname"],S,x,T=!1,N={formCheck:function(e,t){C(t)},close:function(){f["nickname"].value!=""?n.set.edit():(n.set.revert(),f.nickname_tip.innerHTML="")},reset:function(){f.nickname.value="",C({nickname:{state:!1,type:"empty"}})}},C=function(e,t){t=t||!1;for(var n in e){var r=e[n];if(t&&r.state)continue;if(r["type"]=="confirm")m(r.msg,{OKText:s("#L{修改昵称}"),OK:function(){$CONFIG.is_abnormal==1&&T?verify_layer.show():k.submit(1)}});else if(r["type"]=="alert")g(r.msg);else{var i=f[n+"_tip"];i&&(i.innerHTML=h("newFormTips",{data:r}))}}},k={submit:function(e){var t=o.getData();t.setting_rid=$CONFIG.setting_rid,e&&(t.updtime=1),S.setLoading(),c.request("nickname",{onSuccess:function(e){var t=e.data.desc||"";if(!$CONFIG.verified||$CONFIG.verified_type!=0)n.render.concise(t),f.oldnick.innerHTML=e.data.desc;f.nickname.value="",S.setNormal();var r=v({showCallback:function(){setTimeout(function(){r&&r.anihide()},2e3)},hideCallback:function(){r&&r.destroy(),r=undefined,S.setNormal()},msg:e.msg||s("#L{保存成功}"),type:"succ"});r.setLayerXY(x||S.getDom()),r.aniShow()},onError:function(e){if(e.data)C([e.data]);else{var t=v({showCallback:function(){setTimeout(function(){t&&t.anihide()},2e3)},hideCallback:function(){t&&t.destroy(),t=undefined,S.setNormal()},msg:e.msg||s("#L{保存失败}"),type:"del"});t.setLayerXY(x||S.getDom()),t.aniShow()}}},t)}},L={initVerifyLayer:function(){verify_layer=window.SECURE_VERIFY_LAYER;var e=verify_layer.STK;verify_layer&&e.Ready(function(){verify_layer.set("styles",{zIndex:"9999"}).set("language",{T00001:s("#L{验证浮层}"),T00002:s("#L{为了验证您是本人，请填写验证信息以保证帐号安全}"),T00003:s("#L{邮箱}"),T00004:s("#L{手机}"),T00005:s("#L{密保}"),T00006:s("#L{微盾}"),T00007:s("#L{验证码}"),T00008:s("#L{免费获取验证码}"),T00009:s("#L{验证码已发送至邮箱}"),T00010:s("#L{去邮箱查看}"),T00011:s("#L{我真的不是盗号的}"),T00012:s("#L{取消}"),T00013:s("#L{密保问题}"),T00014:s("#L{密保答案}"),T00015:s("#L{微盾号}"),T00016:s("#L{动态码}"),T00017:s("#L{未通过安全验证的用户将面临极大的盗号风险！}"),T00018:s("#L{以下途径可增强帐号安全性：}"),T00019:s("#L{绑定方式}"),T00020:s("#L{绑定邮箱}"),T00021:s("#L{绑定手机}"),T00022:s("#L{绑定微盾}"),T00023:s("#L{立即绑定}"),T00024:s("#L{请输入验证码}"),T00025:s("#L{请输入密保答案}"),T00026:s("#L{请输入微盾动态码}"),T00027:s("#L{立即绑定}"),T00028:s("#L{验证码错误}"),T00029:s("#L{微盾动态码错误}"),T00030:s("#L{密保答案错误}"),T00031:s("#L{验证码已发送至手机，请查收}"),T00032:s("#L{秒后重新获取短信}"),T00033:s("#L{再次获取验证码}")}).set("proxy",{url:"http://account.weibo.com/set/securityproxy"}).init(),verify_layer.register("validate_success",function(e){T=!1}),verify_layer.register("mail_validate_success",function(e){T=!1,k.submit(1)}),verify_layer.register("mobile_validate_success",function(e){T=!1,k.submit(1)}),verify_layer.register("aq_validate_success",function(e){T=!1,k.submit(1)}),verify_layer.register("vsn_validate_success",function(e){T=!1,k.submit(1)}),verify_layer.register("validate_failure",function(){alert("验证失败")})})},loadScript:function(e,t){t=t||{};var n={charset:"utf-8",type:"text/javascript"},r=function(e,t){e=e||{},t=t||{};for(var n in t)e[n]=t[n]};r(n,t);var i=document.createElement("script"),s=document||n.doc,o=0,u=n.onload||n.onLoad;n.src=e,delete n.onload,delete n.onLoad,delete n.doc;var a=u?function(){++o===1&&u()}:function(){};return i.onload=a,i.onreadystatechange=function(){var e=this.readyState.toLowerCase();(e==="loaded"||e==="complete")&&a()},r(i,n),s.getElementsByTagName("head")[0].appendChild(i),i}},A={btn_submit:function(e){i.preventDefault();var t=o.check();t?setTimeout(function(){x=e.el;var t=o.ctls.nickname.trans();t&&t.abort(),$CONFIG.is_abnormal==1&&T?verify_layer.show():k.submit()},0):C(o.states(),!0)},btn_cancel:function(){n.handle.close(),i.preventDefault()}},O={loader:function(){n=d(e),n.is.cached()&&O.init(),i.custEvent.add(n,"renderSuccess",O.init)},init:function(){O.pars(),O.build(),O.bind()},pars:function(){$CONFIG.is_abnormal==1&&L.loadScript("http://i.sso.sina.com.cn/js/abnormal_login_verify_layer.js",{onLoad:function(){L.initVerifyLayer(),T=!0}})},build:function(){o=a(e),f=l(o.domList);for(var t=0,n,s,h,d=E.length;t<d;t++){n=E[t],s=f[n];if(f[n]&&y[n]){h=i.queryToJson(s.getAttribute("action-data")||""),h.hook=o,h.proxy=c,h.iokey="checkform";var v=y[n](s,h);o.add(n,v)}}w=u(e),S=p(f.btn_submit),r=o.getData()},bind:function(){i.custEvent.define(o,["check"]),i.custEvent.add(o,"check",N.formCheck),i.custEvent.add(n,"close",N.close),i.custEvent.add(n,"afterDiscard",N.reset),b=n.dEvt();for(var e in A)b.add(e,"click",A[e])},destroy:function(){i.custEvent.remove(o,"check",N.formCheck);for(var e in A)b.remove(e,"click",A[e]);w.destroy()}};return O.loader(),t.destroy=O.destroy,t}},w:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:'#L{4-30个字符，支持中英文、数字、"_"或减号}',E03:"#L{昵称不能全是数字}",E04:'#L{4-30个字符，支持中英文、数字、"_"或减号}',E05:'#L{4-30个字符，支持中英文、数字、"_"或减号}',E06:"#L{请输入昵称}"};e.exports=function(e,t){var n,r;t=t||{};var a=function(){var e=c.value(),t=!1;if(!c.pars.must&&c.rule.isEmpty(e)){c.msg.state=!0,c.msg.type="empty",c.msg.code="E01",c.cache_msg=i.core.json.clone(c.msg);return}!t&&c.rule.isEmpty(e)&&(t=!0,c.msg.type="err",c.msg.code="E06"),!t&&c.rule.isNumber(e)&&(t=!0,c.msg.type="err",c.msg.code="E03"),!t&&!c.rule.isName(e)&&(t=!0,c.msg.type="err",c.msg.code="E04"),!t&&!c.rule.lenLimit(e,4,30)&&(t=!0,c.msg.type="err",c.msg.code="E05"),t?c.msg.state=!1:(c.msg.state=!0,c.msg.type="ok",c.msg.code="E01"),c.cache_msg=i.core.json.clone(c.msg)},f={verify:function(){c.pars.iorecords=!0,r=c.pars.proxy.request(c.pars.iokey,{onSuccess:function(e){c.msg=i.parseParam(c.msg,e||{}),c.msg.type="ok",c.msg.state=!0,c.cache_msg=i.core.json.clone(c.msg),c.fire()},onError:function(e){c.msg=i.parseParam(c.msg,e||{}),c.msg.type=e.data&&e.data.type||"err",c.msg.state=!1,c.cache_msg=i.core.json.clone(c.msg),c.fire()}},{nickname:encodeURIComponent(c.value())})}},l={focus:function(){c.cache_value=c.value(),c.msg.state=!1,c.msg.action="focus",c.msg.type="tip",c.msg.code="E02",c.fire()},blur:function(){e.value=c.rule.reNullChar(e.value),c.msg.action="blur";var t=c.value();if(t&&c.cache_value==t&&c.pars.proxy&&c.pars.iokey){c.msg=i.core.json.clone(c.cache_msg),c.fire();return}c.cache_msg=null,c.cache_value=null,c.pars.iodelay===0&&!c.pars.proxy&&!c.pars.iokey?(a(),c.fire()):n=setTimeout(function(){a(),c.msg.state&&c.pars.proxy&&c.pars.iokey&&!c.rule.isEmpty(t)&&(c.msg.type="loading",f.verify()),c.fire(),clearTimeout(n),n=null},c.pars.iodelay)}},c=o(e,t,{evtAct:l,check:a}),h=i.core.obj.sup(c,["initPars"]);return c.initPars=function(){h.initPars(),c.errText=s(u),c.type="nickname"},c.trans=function(){return r},c.pars.auto&&c.init(),c}},W:function(e,t,n,r){var i=n("b"),s=n("x");s(i.E("pl_personalInfo_job"))},x:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("X"),u=n("e"),a=n("y"),f=n("Y"),l=n("C"),c=n("z"),h=n("aA"),p=n("aD"),d=n("S"),v=n("N"),m=n("aE"),g=n("af"),y=n("j"),b=n("L"),w=n("aF"),E=n("ag"),S=n("M"),x={};x.company=a,x.job=f,x.city=c;var T=s('<div class="pf_item clearfix" node-type="job_1"><div class="label S_txt2">#L{公司}</div><div node-type="joblist" class="con"></div></div>'),N=s('<#et morelist data><div class="hideblock" node-type="joblist_item" action-type="joblist_item"><p class="limited"><a href="${data.href}" target="_blank" node-type="joblist_item_company" jobid="${data.rowid}" changed="changed">${decodeURIComponent(data.company)} </a><span node-type="joblist_item_time"><#if (data.start || data.end) >(</#if> <#if (data.start) >${data.start}#L{年}</#if><#if (data.start || data.end) ><em>-</em></#if><#if (data.end) > ${data.end}</#if><#if (data.end && data.end != "至今") >#L{年}</#if> <#if (data.start || data.end) >)</#if></span><span class="visibility S_txt2">${data.privacy}</span></p><p node-type="joblist_item_area">#L{地区：}${data.area}</p><p class="bsp" node-type="joblist_item_position"><#if (data.department) >#L{职位：} ${decodeURIComponent(data.department)} </#if></p><div class="action"><a href="javascript:void(0)" class="W_ico12 icon_edit" action-type="job_edit" company="${decodeURIComponent(data.company)}" <#if (data.department) > department="${decodeURIComponent(data.department)}"</#if> action-data="${data.datastr}"></a><a href="javascript:void(0)" class="W_ico12 icon_close" action-type="job_delete" action-data="rowid=${data.rowid}"></a></div><div node-type="commend" data="id=${data.rowid}" state="show"></div></div></#et>');e.exports=function(e){var t={},n,r,a,f,C=["company","job"],k,L,A,O,M,_,D=!1,P,H,B,j,F,I=[],q={showTips:function(e){var t,r,i;for(i in e)t=e[i],i=="job"&&(i="companyPosition"),r=n[i+"_tip"][0],r&&(r.innerHTML=b("newFormTips",{data:t})),r.style.display=""},renderCommend:function(){var e=n.commend||[];for(var t=0,r=I.length;t<r;t++)I[t]&&I[t].destroy&&I[t].destroy();for(var t=0,r=e.length;t<r;t++){var o=w(e[t],s("#L{推荐同事}"),"jobCommend");i.custEvent.add(o,"open",function(){for(var e=0,t=I.length;e<t;e++)I[e].hide()}),e[t]&&I.push(o)}},save:function(e,t){B&&(e.id=B),e.name=encodeURIComponent(e.name),e.remark=encodeURIComponent(e.remark),y.request("job",{onSuccess:function(r){var o=r.data.id||"",u=r.data.desc||"";F.render.concise(u);var a=n.province&&n.province[0],l=n.city&&n.city[0];e["end"]=="9999"&&(e.end="至今");var c;a.options[a["selectedIndex"]].value=="100"?c=a.options[a.selectedIndex].innerHTML:c=a.options[a.selectedIndex].innerHTML+"，"+l.options[l.selectedIndex].innerHTML;var h={rowid:o,start:e.start||"",end:e.end||"",area:c,location:a.options[a.selectedIndex].value+","+l.options[l.selectedIndex].value,visible:e.privacy};for(var p in h)h[p]=g(h[p]);var d=i.core.json.jsonToQuery(m(h));h.datastr=decodeURIComponent(d),h.company=e.name,h.department=e.remark,h.privacy=n.secrecy_title[0].innerHTML,h.href="http://weibo.com/find/f?type=2&search=1&comp="+e.name;var v=i.core.util.easyTemplate(N,h).toString(),y=i.builder(v).box,b;for(var E=0;E<y.childNodes.length;E++)if(y.childNodes[E].nodeType==1){b=y.childNodes[E];break}var S=i.builder(b).list.commend,x=n.joblist&&n.joblist[0];if(!x){var C=i.builder(T).box;f.appendChild(C),n.job_1=[x=i.sizzle("[node-type=job_1]")[0]],n.joblist=[x=i.sizzle("[node-type=joblist]")[0]]}y&&i.core.dom.insertElement(x,y,"afterbegin"),n.joblist_item||(n.joblist_item=[]),n.joblist_item.push(b),n.stime[0].options[0].selected=!0,n.etime[0].options[0].selected=!0;for(var E=0;E<n.joblist_item.length;E++)n["joblist_item"][E]==H&&n.joblist_item.splice(E,E+1);i.removeNode(H),H=undefined,i.removeNode(M),_.style.display="",D=!1,q.removeEmpty();for(var E=0,k=I.length;E<k;E++)I[E].hide();var L=w(S[0],s("#L{推荐同事}"),"jobCommend");i.custEvent.add(L,"open",function(){for(var e=0,t=I.length;e<t;e++)I[e].hide()}),I.push(L),t&&t.successCallback&&t.successCallback()},onError:function(e){e.data&&q.showTips(e.data);var n=d({showCallback:function(){setTimeout(function(){n&&n.anihide()},2e3)},hideCallback:function(){n&&n.destroy(),n=undefined},msg:e.msg||s("#L{保存失败}"),type:"del"});n.setLayerXY(t.el),n.aniShow()}},e)},editReset:function(e){var t=[s("#L{仅自己可见}"),s("#L{我关注的人可见}"),s("#L{所有人可见}")];n.company[0].value=e.company||i.queryToJson(n.company[0].getAttribute("action-data")).text,n.job[0].value=e.job||i.queryToJson(n.job[0].getAttribute("action-data")).text,q.showTips({company:{state:!1,type:"empty"}}),q.showTips({job:{state:!1,type:"empty"}}),n.date_tips[0].innerHTML="",e.stime?n.stime[0].value=e.stime:n.stime[0].value="1",e.etime?n.etime[0].value=e.etime:n.etime[0].value="1";if(e.location){e.location=e.location.split(",");var r=e.location[0],o=e.location[1];O.reset({city:!0,proDef:r,cityDef:o})}var u=i.sizzle("[action-type=secrecy]",M)[0],a=i.sizzle("[node-type=secrecy_title]",M)[0];u.setAttribute("value",e.secrecy),a.innerHTML=t[e.secrecy]},removeEmpty:function(){var e,t;e=n.joblist&&n.joblist[0],e&&E(e).length==0&&(t=n.job_1&&n.job_1[0],t&&(i.removeNode(t),n.joblist[0]&&(n.joblist[0]=undefined),n.job_1[0]&&(n.job_1[0]=undefined)))}},R={change:function(){parseInt(n.stime[0].value,10)>parseInt(n.etime[0].value,10)&&parseInt(n["etime"][0].value,10)!=1?n.date_tips[0].innerHTML=b("newFormTips",{data:{type:"err",msg:s("#L{请输入正确的离职年份}")}}):n.date_tips[0].innerHTML=""}},U={select:function(e,t){A.setAttribute("value",t.data.index);var n=i.sizzle("[node-type=secrecy_title]",A)[0];n&&(n.innerHTML=t.data.name),setTimeout(function(){L.hide()},100)},show:function(e,t){P||(P=o({act:A,extra:[L.getDom("outer")],delay:50,onmouseover:L.show,onmouseout:L.hide}))},hide:function(e,t){P&&(P.destroy(),P=null)}},z={formCheck:function(e,t){q.showTips(t)},close:function(){if(D){var e=i.queryToJson(n.company[0].getAttribute("action-data")),t=i.queryToJson(n.job[0].getAttribute("action-data")),r=i.core.dom.dir(n.secrecy_title[0],{dir:"parent",expr:"[action-type=secrecy]"});if(n["company"][0].value!=e["text"]||n["job"][0].value!=t["text"]||n["stime"][0].value!="1"||n["etime"][0].value!="1"||n["province"][0].value!="11"||n["city"][0].value!="1"||r[0]&&r[0].getAttribute("value")!="2"){F.set.edit();return}n.joblist_item&&n.joblist_item.length?(_.style.display="",i.removeNode(M),D=!1):q.editReset({company:"",job:"",secrecy:"2",location:"11,1",stime:"",etime:""})}else if(!n.joblist_item||!n.joblist_item.length)_.style.display="none",D=!0,M.style.display="",q.editReset({company:"",job:"",secrecy:"2",location:"11,1",stime:"",etime:""});F.set.revert()},reset:function(){M.parentNode&&(H&&(H.style.display=""),!n.joblist_item||!n.joblist_item.length?(_.style.display="none",D=!0,M.style.display="",q.editReset({company:"",job:"",secrecy:"2",location:"11,1",stime:"",etime:""})):(_.style.display="",i.removeNode(M),D=!1)),H=undefined,B=undefined}},W={secrecy:function(e){i.preventDefault(),A=e.el,i.hasClassName(A,"W_arrow_turn")||i.addClassName(A,"W_arrow_turn");if(!L){L=h();var t=["select","show","hide","addClass","removeClass"];i.custEvent.define(L,t);for(var n=0,r=t.length;n<r;n++){var s=t[n];i.custEvent.add(L,s,U[s])}}i.custEvent.add(L,"addClass",function(){i.hasClassName(A,"W_arrow_turn")||i.addClassName(A,"W_arrow_turn")}),i.custEvent.add(L,"removeClass",function(){i.hasClassName(A,"W_arrow_turn")&&i.removeClassName(A,"W_arrow_turn")}),i.core.util.browser.IE6||i.core.util.browser.IE7?L.setLayout(e.el,{offsetX:0,offsetY:-5}):L.rectsPosition({evt:i.fixEvent(),node:A,offsetX:0,offsetY:0}),L.show()},add:function(e){if(D)return;H=undefined,B=undefined,i.core.dom.insertElement(f,M,"afterbegin"),D=!0,M.style.display="",_.style.display="none",q.editReset({company:"",job:"",secrecy:"2",location:"11,1",stime:"",etime:""}),i.preventDefault()},edit:function(e){H&&(H.style.display="");var t=e.data;B=t.rowid;var n=i.core.dom.dir(e.el,{expr:"[node-type=joblist_item]"});H=n&&n[0],i.core.dom.insertElement(f,M,"afterbegin"),_.style.display="none",D=!0,M.style.display="",t["end"]=="至今"&&(t.end="9999");var r=e.el.getAttribute("company")||"",s=e.el.getAttribute("department")||"";q.editReset({company:r,job:s,stime:t.start,etime:t.end,location:t.location,secrecy:t.visible}),t.department?q.showTips({job:{msg:"",state:!0,type:"ok"}}):q.showTips({job:{state:!1,type:"empty"}}),i.preventDefault()},del:function(e){var t=i.core.dom.dir(e.el,{expr:"[node-type=joblist_item]"});t=t&&t[0];var r=!1;D&&H==t&&(r=!0),v(s("#L{确认是否删除此公司信息？}"),{OK:function(){var t=e.data;y.getTrans("jobDel",{onSuccess:function(t){r&&(i.removeNode(M),_.style.display="",D=!1,H=undefined,B=undefined);var s=t.data.desc||"";F.render.concise(s);var o=i.core.dom.dir(e.el,{expr:"[node-type=joblist_item]"});o=o&&o[0],i.removeNode(o),B=undefined,H=undefined,q.removeEmpty();for(var u=0;u<n.joblist_item.length;u++)n["joblist_item"][u]==o&&n.joblist_item.splice(u,u+1);i.core.dom.firstChild(f)||W.add()},onError:function(t){var n=d({showCallback:function(){setTimeout(function(){n&&n.anihide()},600)},hideCallback:function(){n&&n.destroy(),n=undefined},msg:t&&t.data.msg,type:"error"});n.setLayerXY(e.el),n.aniShow()}}).request({id:t.rowid})}}),i.preventDefault()},save:function(e){var t=i.htmlToJson(M);t=a.getData();if(STK.core.util.browser.IE){var r=i.sizzle('[action-type="secrecy"]',M)[0];t.privacy=r&&r.getAttribute("value")||0}var o=a.check();t.start>t.end&&t.end!="1"&&(o=!1,n.date_tips[0].innerHTML=b("newFormTips",{data:{type:"err",msg:s("#L{请输入正确的离职年份}")}})),t.start=="1"&&delete t.start,t.end=="1"&&delete t.end,o?q.save(t,e):q.showTips(a.states()),i.preventDefault()},cancel:function(){M.parentNode&&(H&&(H.style.display=""),_.style.display="",M.style.display="none",D=!1),H=undefined,B=undefined,i.preventDefault()}},X={loader:function(){F=S(e,{IO:y,IOKey:"jobFrame"}),F.is.cached()&&X.init(),i.custEvent.add(F,"renderSuccess",X.init)},init:function(){X.parseDOM(),X.initPlugin(),X.buildCheck(),X.bind(),q.renderCommend()},parseDOM:function(){n=i.core.dom.builder(e).list,M=n&&n.editor&&n.editor[0],_=i.sizzle("[action-type=add]",e)[0],f=n&&n.joblist_out&&n.joblist_out[0],M.style.display==""&&(D=!0)},initPlugin:function(){O=c(n.cityselector[0],{city:!0}),q.editReset({company:"",job:"",secrecy:"2",location:"11,1",stime:"",etime:""}),j=p(n.company[0],{trans:y,tranName:"companylist",path:"item",height:i.core.util.browser.IE6?0:30,name:"school_name",width:200,noSuggest:" "})},buildCheck:function(){a=u(e);for(var t=0,n=C.length,s,o;t<n;t++)s=a.domList[C[t]]&&a.domList[C[t]][0],o=i.queryToJson(s.getAttribute("action-data")||""),o.hook=a,o.proxy=y,o.iokey="checkform",a.add(C[t],x[C[t]](s,o));r=l(e)},bind:function(){i.custEvent.define(a,["check"]),i.custEvent.add(a,"check",z.formCheck),i.custEvent.add(F,"close",z.close),i.custEvent.add(F,"afterDiscard",z.reset),i.addEvent(n.stime[0],"change",R.change),i.addEvent(n.etime[0],"change",R.change),k=F.dEvt(),k.add("secrecy","click",W.secrecy),k.add("add","click",W.add),k.add("save","click",W.save),k.add("cancel","click",W.cancel),k.add("job_edit","click",W.edit),k.add("job_delete","click",W.del)}},V=function(){j&&j.destroy&&j.destroy(),O&&O.destroy&&O.destroy(),i.custEvent.remove(a,"check",z.formCheck),i.custEvent.undefine(a,["check"]),i.removeEvent(n.stime[0],"change",R.change),i.removeEvent(n.etime[0],"change",R.change),k.remove("edit","click",W.switchEdit),k.remove("secrecy","click",W.secrecy),k.remove("add","click",W.add),k.remove("save","click",W.save),k.remove("cancel","click",W.cancel),k.remove("job_edit","click",W.edit),k.remove("job_delete","click",W.del)};return t.destroy=V,X.loader(),t}},X:function(e,t,n,r){var i=n("b");e.exports=function(e){var t=e.delay||300,n=e.moutDelay||t,r=e.isover||!1,s=e.act,o=e.extra||[],u=null,a=function(t){r&&e.onmouseover.apply(s,[t])},f=function(t){r||e.onmouseout.apply(s,[t])},l=function(e){r=!0,u&&clearTimeout(u),u=setTimeout(function(){a(e)},t)},c=function(e){r=!1,u&&clearTimeout(u),u=setTimeout(function(){f(e)},n)};i.core.evt.addEvent(s,"mouseover",l),i.core.evt.addEvent(s,"mouseout",c);for(var h=0,p=o.length;h<p;h+=1)i.core.evt.addEvent(o[h],"mouseover",l),i.core.evt.addEvent(o[h],"mouseout",c);var d={};return d.destroy=function(){i.core.evt.removeEvent(s,"mouseover",l),i.core.evt.removeEvent(s,"mouseout",c);for(var e=0,t=o.length;e<t;e+=1)i.core.evt.removeEvent(o[e],"mouseover",l),i.core.evt.removeEvent(o[e],"mouseout",c)},d}},y:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{请输入公司名称}",E03:"#L{请输入正确的公司名称，限制在25字以内}",E04:"#L{请输入名称，25个字以内}"};e.exports=function(e,t){t=t||{};var n=function(){var e=a.value().replace(/^\s+|\s+$/g,""),t=!1;if(!a.pars.must&&a.rule.isEmpty(e)){a.msg.state=!0,a.msg.type="empty",a.msg.code="E01";return}!t&&(a.rule.isEmpty(e)||a.valCacheCtrl.isVal(e))&&(t=!0,a.msg.type="err",a.msg.code="E02"),!t&&!a.rule.lenLimit(e,0,50)&&(t=!0,a.msg.type="err",a.msg.code="E03"),!t&&!a.rule.isCompany(e)&&(t=!0,a.msg.type="err",a.msg.code="E03"),t?a.msg.state=!1:(a.msg.state=!0,a.msg.type="ok",a.msg.code="E01")},r={focus:function(){a.cache_value=a.value(),a.msg.state=!1,a.msg.action="focus",a.msg.type="tip",a.msg.code="E04",a.fire()},blur:function(){e.value=a.rule.reNullChar(e.value),a.msg.action="blur",n(),a.fire()}},a=o(e,t,{evtAct:r,check:n}),f=i.core.obj.sup(a,["initPars"]);return a.initPars=function(){f.initPars(),a.errText=s(u),a.type="company"},a.pars.auto&&a.init(),a}},Y:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{可以填写部门、组别、职位等信息，70个字符以内}",E03:"#L{请填写职能}",E04:"#L{最多可以输入70字符以内的部门/职位}",E05:"#L{最多可以输入70字符以内的部门/职位}"};e.exports=function(e,t){t=t||{};var n=function(){var e=a.value(),t=!1;e=e.replace(/\s|\t/g,"");if(!a.pars.must&&a.rule.isEmpty(e)){a.msg.state=!0,a.msg.type="empty",a.msg.code="E01";return}!t&&a.rule.isEmpty(e)&&(t=!0,a.msg.type="warn",a.msg.code="E03"),!t&&!a.rule.lenLimit(e,0,70)&&(t=!0,a.msg.type="err",a.msg.code="E04"),!t&&!a.rule.isCompany(e)&&(t=!0,a.msg.type="err",a.msg.code="E05"),t?a.msg.state=!1:(a.msg.state=!0,a.msg.type="ok",a.msg.code="E01")},r={focus:function(){a.cache_value=a.value(),a.msg.state=!1,a.msg.action="focus",a.msg.type="tip",a.msg.code="E02",a.fire()},blur:function(){e.value=a.rule.reNullChar(e.value),a.msg.action="blur",n(),a.fire()}},a=o(e,t,{evtAct:r,check:n}),f=i.core.obj.sup(a,["initPars"]);return a.initPars=function(){f.initPars(),a.errText=s(u),a.type="job"},a.init(),a}},z:function(e,t,n,r){var i=n("b"),s=n("Z"),o=n("aa"),u=n("I"),a=n("c");e.exports=function(e,t){t=t||{};var n={},r,f,l,c,h,p,d,v,m=[],g,y,b;i.custEvent.define(n,["cityChange"]),t=i.core.json.merge({city:!1,area:!1,proDef:"",cityDef:"",areaIO:"",areaKey:""},t);var w=t.areaIO,E=t.areaKey,S={DOM:{}},x=function(){T(),C(),L()},T=function(){if(!i.isNode(e))throw"node 没有定义"},N=function(e){var t=e.length,n={},r=[],i=[];for(var s=0;s<t;s++)r.push(e[s].text),i.push(e[s].value);return n.items=r.join(","),n.values=i.join(","),n},C=function(){S.DOM=u(i.builder(e).list),g=S.DOM.province,y=S.DOM.area,b=S.DOM.city,A()},k=function(e,t){if(!p)return;if(m[e.province]&&m[e.province][e.city]){var n=m[e.province][e.city];n.area?(t&&(t.style.display=""),p&&p.setOptions(n)):t&&(t.style.display="none")}else{e.lang=window.$CONFIG&&$CONFIG.lang||"zh-tw",t&&(t.style.display="none"),!m[e.province]&&(m[e.province]={});if(!E||!w)return;p&&w.getTrans(E,{onSuccess:function(n){if(n.data&&i.isArray(n.data)&&n.data.length){var r=N(n.data);m[e.province][e.city]=r,m[e.province][e.city].area=r.items!="",t&&r.items!=""&&(p&&p.setOptions(r),t.style.display="")}}}).request(e)}},L=function(){if(g){r=o(""),r.callback=function(e){f&&f.setOptions(o(e)),!t.city&&e!="400"||e=="100"?(b&&(b.style.display="none"),y&&(y.style.display="none")):e=="400"?b&&(b.style.display=""):t.city?b&&(b.style.display=""):b&&(b.style.display="none");if(!v)i.custEvent.fire(n,"cityChange",{province:g.value});else if(!t.city&&e!="400"||e=="100")i.custEvent.fire(n,"cityChange",{province:g.value});else if(e=="100")y&&(y.style.display="none"),i.custEvent.fire(n,"cityChange",{province:g.value});else{var r={province:g.value,city:b.value};i.custEvent.fire(n,"cityChange",r),p&&k(r,y)}},r.defvalue=t.proDef,r.selectone=!0,l=s(g,r);var e=g.value;h=o(e),h.defvalue=t.cityDef||"",b&&(v=!0,h.selectone=!0,h.callback=function(e){var t={province:g.value,city:b.value};i.custEvent.fire(n,"cityChange",t),p&&k(t,y)},f=s(b,h));if(y&&t.area){d={},d.tipText=a("#L{选择区县}"),d.callback=function(e){i.custEvent.fire(n,"cityChange",{province:g.value,city:b.value,area:y.value})},p=s(y,d);var u={province:g.value,city:b.value};p&&k(u,y)}}},A=function(){t.city?t.proDef=="100"?b&&(b.style.display="none"):b&&(b.style.display=""):(t.proDef=="400"?b&&(b.style.display=""):b&&(b.style.display="none"),y&&(y.style.display="none")),t.area&&t.areaIO&&t.areaKey?t.city&&b&&y&&(y.style.display=""):y&&(y.style.display="none")},O=function(e){e=e||{},t=i.core.json.merge({city:!1,area:!1,proDef:"",cityDef:"",areaIO:t.areaIO,areaKey:t.areaKey},e),A(),_(),x()};x();var M=function(){var e={};return g&&g.value&&(e.province=g.value),(g.value=="400"||t.city)&&b&&b.value&&(e.city=b.value),t.area&&y&&y.value&&(e.area=y.value),e},_=function(){r&&r.callback&&(r.callback=null),l&&l.destroy&&l.destroy(),h&&h.callback&&(h.callback=null),f&&f.destroy&&f.destroy(),d&&d.callback&&(d.callback=null),p&&p.destroy&&p.destroy(),r=f=l=c=p=v=undefined},D=function(){i.custEvent.undefine(n),m=null,_()};return n.destroy=D,n.reset=O,n.getSelectOpts=M,n}},Z:function(e,t,n,r){var i=n("b"),s=n("c");e.exports=function(e,t){t=i.parseParam({selectone:!1,items:"",values:"",callback:i.funcEmpty,defvalue:"",tipText:""},t);var n={},r={prepack:function(e){var n={};if(!t.selectone){var r=e.items?",":"",i=t.tipText?t.tipText:s("#L{不限}");n.items=i+r+(e.items?s("#L{"+e.items+"}"):""),n.values="1000"+r+(e.values?s("#L{"+e.values+"}"):"")}else n.items=e.items?s("#L{"+e.items+"}"):"",n.values=e.values?s("#L{"+e.values+"}"):"";return n}},o={onChange:function(){t.callback(e.value)}},u=function(){l(),f()},a=function(n,i){n=r.prepack(n);var s=n.items.split(","),o=n.values.split(","),u=e.options;u.length=0;var a=-1;for(var f=0,l=s.length;f<l;f++)u[f]=new Option(s[f],o[f]),i&&t.defvalue&&o[f]==t.defvalue&&(a=f);a!=-1?e.selectedIndex=a:!t.selectone&&(e.value=i||1e3)},f=function(){var n=e.getAttribute("defvalue")||t.defvalue;a(t,n)},l=function(){i.addEvent(e,"change",o.onChange)},c=function(){i.removeEvent(e,"change",o.onChange)},h=function(e){t.defvalue=e};return e&&u(),n.setOptions=a,n.destroy=c,n.setDefValue=h,n}},aa:function(e,t,n,r){var i=n("c"),s={prov11:"#L{东城区},#L{西城区},#L{崇文区},#L{宣武区},#L{朝阳区},#L{丰台区},#L{石景山区},#L{海淀区},#L{门头沟区},#L{房山区},#L{通州区},#L{顺义区},#L{昌平区},#L{大兴区},#L{怀柔区},#L{平谷区},#L{密云县},#L{延庆县}",code11:"1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,17,28,29",prov12:"#L{和平区},#L{河东区},#L{河西区},#L{南开区},#L{河北区},#L{红桥区},#L{塘沽区},#L{汉沽区},#L{大港区},#L{东丽区},#L{西青区},#L{津南区},#L{北辰区},#L{武清区},#L{宝坻区},#L{宁河县},#L{静海县},#L{蓟县},#L{滨海新区},#L{保税区}",code12:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,21,23,25,26,27",prov13:"#L{石家庄},#L{唐山},#L{秦皇岛},#L{邯郸},#L{邢台},#L{保定},#L{张家口},#L{承德},#L{沧州},#L{廊坊},#L{衡水}",code13:"1,2,3,4,5,6,7,8,9,10,11",prov14:"#L{太原},#L{大同},#L{阳泉},#L{长治},#L{晋城},#L{朔州},#L{晋中},#L{运城},#L{忻州},#L{临汾},#L{吕梁}",code14:"1,2,3,4,5,6,7,8,9,10,23",prov15:"#L{呼和浩特},#L{包头},#L{乌海},#L{赤峰},#L{通辽},#L{鄂尔多斯},#L{呼伦贝尔},#L{兴安盟},#L{锡林郭勒盟},#L{乌兰察布},#L{巴彦淖尔},#L{阿拉善盟}",code15:"1,2,3,4,5,6,7,22,25,26,28,29",prov21:"#L{沈阳},#L{大连},#L{鞍山},#L{抚顺},#L{本溪},#L{丹东},#L{锦州},#L{营口},#L{阜新},#L{辽阳},#L{盘锦},#L{铁岭},#L{朝阳},#L{葫芦岛}",code21:"1,2,3,4,5,6,7,8,9,10,11,12,13,14",prov22:"#L{长春},#L{吉林},#L{四平},#L{辽源},#L{通化},#L{白山},#L{松原},#L{白城},#L{延边朝鲜族自治州}",code22:"1,2,3,4,5,6,7,8,24",prov23:"#L{哈尔滨},#L{齐齐哈尔},#L{鸡西},#L{鹤岗},#L{双鸭山},#L{大庆},#L{伊春},#L{佳木斯},#L{七台河},#L{牡丹江},#L{黑河},#L{绥化},#L{大兴安岭}",code23:"1,2,3,4,5,6,7,8,9,10,11,12,27",prov32:"#L{南京},#L{无锡},#L{徐州},#L{常州},#L{苏州},#L{南通},#L{连云港},#L{淮安},#L{盐城},#L{扬州},#L{镇江},#L{泰州},#L{宿迁}",code32:"1,2,3,4,5,6,7,8,9,10,11,12,13",prov33:"#L{杭州},#L{宁波},#L{温州},#L{嘉兴},#L{湖州},#L{绍兴},#L{金华},#L{衢州},#L{舟山},#L{台州},#L{丽水}",code33:"1,2,3,4,5,6,7,8,9,10,11",prov34:"#L{合肥},#L{芜湖},#L{蚌埠},#L{淮南},#L{马鞍山},#L{淮北},#L{铜陵},#L{安庆},#L{黄山},#L{滁州},#L{阜阳},#L{宿州},#L{巢湖},#L{六安},#L{亳州},#L{池州},#L{宣城}",code34:"1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,17,18",prov35:"#L{福州},#L{厦门},#L{莆田},#L{三明},#L{泉州},#L{漳州},#L{南平},#L{龙岩},#L{宁德}",code35:"1,2,3,4,5,6,7,8,9",prov36:"#L{南昌},#L{景德镇},#L{萍乡},#L{九江},#L{新余},#L{鹰潭},#L{赣州},#L{吉安},#L{宜春},#L{抚州},#L{上饶}",code36:"1,2,3,4,5,6,7,8,9,10,11",prov37:"#L{济南},#L{青岛},#L{淄博},#L{枣庄},#L{东营},#L{烟台},#L{潍坊},#L{济宁},#L{泰安},#L{威海},#L{日照},#L{莱芜},#L{临沂},#L{德州},#L{聊城},#L{滨州},#L{菏泽}",code37:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17",prov31:"#L{黄浦区},#L{卢湾区},#L{徐汇区},#L{长宁区},#L{静安区},#L{普陀区},#L{闸北区},#L{虹口区},#L{杨浦区},#L{闵行区},#L{宝山区},#L{嘉定区},#L{浦东新区},#L{金山区},#L{松江区},#L{青浦区},#L{南汇区},#L{奉贤区},#L{崇明县}",code31:"1,3,4,5,6,7,8,9,10,12,13,14,15,16,17,18,19,20,30",prov41:"#L{郑州},#L{开封},#L{洛阳},#L{平顶山},#L{安阳},#L{鹤壁},#L{新乡},#L{焦作},#L{濮阳},#L{许昌},#L{漯河},#L{三门峡},#L{南阳},#L{商丘},#L{信阳},#L{周口},#L{驻马店},#L{济源}",code41:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18",prov42:"#L{武汉},#L{黄石},#L{十堰},#L{宜昌},#L{襄阳},#L{鄂州},#L{荆门},#L{孝感},#L{荆州},#L{黄冈},#L{咸宁},#L{随州},#L{恩施土家族苗族自治州},#L{仙桃},#L{潜江},#L{天门},#L{神农架}",code42:"1,2,3,5,6,7,8,9,10,11,12,13,28,29,30,31,32",prov43:"#L{长沙},#L{株洲},#L{湘潭},#L{衡阳},#L{邵阳},#L{岳阳},#L{常德},#L{张家界},#L{益阳},#L{郴州},#L{永州},#L{怀化},#L{娄底},#L{湘西土家族苗族自治州}",code43:"1,2,3,4,5,6,7,8,9,10,11,12,13,31",prov44:"#L{广州},#L{韶关},#L{深圳},#L{珠海},#L{汕头},#L{佛山},#L{江门},#L{湛江},#L{茂名},#L{肇庆},#L{惠州},#L{梅州},#L{汕尾},#L{河源},#L{阳江},#L{清远},#L{东莞},#L{中山},#L{潮州},#L{揭阳},#L{云浮}",code44:"1,2,3,4,5,6,7,8,9,12,13,14,15,16,17,18,19,20,51,52,53",prov45:"#L{南宁},#L{柳州},#L{桂林},#L{梧州},#L{北海},#L{防城港},#L{钦州},#L{贵港},#L{玉林},#L{百色},#L{贺州},#L{河池},#L{来宾},#L{崇左}",code45:"1,22,3,4,5,6,7,8,9,10,11,12,13,14",prov46:"#L{海口},#L{三亚},#L{其他}",code46:"1,2,90",prov50:"#L{万州区},#L{涪陵区},#L{渝中区},#L{大渡口区},#L{江北区},#L{沙坪坝区},#L{九龙坡区},#L{南岸区},#L{北碚区},#L{万盛经济技术开发区},#L{双桥经济技术开发区},#L{渝北区},#L{巴南区},#L{黔江区},#L{长寿区},#L{綦江区},#L{潼南县},#L{铜梁区},#L{大足区},#L{荣昌县},#L{璧山区},#L{梁平县},#L{城口县},#L{丰都县},#L{垫江县},#L{武隆县},#L{忠县},#L{开县},#L{云阳县},#L{奉节县},#L{巫山县},#L{巫溪县},#L{石柱土家族自治县},#L{秀山土家族苗族自治县},#L{酉阳土家族苗族自治县},#L{彭水苗族土家族自治县},#L{江津区},#L{合川区},#L{永川区},#L{南川区}",code50:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,40,41,42,43,81,82,83,84",prov51:"#L{成都},#L{自贡},#L{攀枝花},#L{泸州},#L{德阳},#L{绵阳},#L{广元},#L{遂宁},#L{内江},#L{乐山},#L{南充},#L{眉山},#L{宜宾},#L{广安},#L{达州},#L{雅安},#L{巴中},#L{资阳},#L{阿坝},#L{甘孜},#L{凉山}",code51:"1,3,4,5,6,7,8,9,10,11,13,14,15,16,17,18,19,20,32,33,34",prov52:"#L{贵阳},#L{六盘水},#L{遵义},#L{安顺},#L{铜仁},#L{黔西南},#L{毕节},#L{黔东南},#L{黔南}",code52:"1,2,3,4,22,23,24,26,27",prov53:"#L{昆明},#L{曲靖},#L{玉溪},#L{保山},#L{昭通},#L{楚雄},#L{红河},#L{文山},#L{普洱},#L{西双版纳},#L{大理},#L{德宏},#L{丽江},#L{怒江},#L{迪庆},#L{临沧}",code53:"1,3,4,5,6,23,25,26,27,28,29,31,32,33,34,35",prov54:"#L{拉萨},#L{昌都},#L{山南},#L{日喀则},#L{那曲},#L{阿里},#L{林芝}",code54:"1,21,22,23,24,25,26",prov61:"#L{西安},#L{铜川},#L{宝鸡},#L{咸阳},#L{渭南},#L{延安},#L{汉中},#L{榆林},#L{安康},#L{商洛}",code61:"1,2,3,4,5,6,7,8,9,10",prov62:"#L{兰州},#L{嘉峪关},#L{金昌},#L{白银},#L{天水},#L{武威},#L{张掖},#L{平凉},#L{酒泉},#L{庆阳},#L{定西},#L{陇南},#L{临夏},#L{甘南}",code62:"1,2,3,4,5,6,7,8,9,10,24,26,29,30",prov63:"#L{西宁},#L{海东},#L{海北},#L{黄南},#L{海南},#L{果洛},#L{玉树},#L{海西}",code63:"1,21,22,23,25,26,27,28",prov64:"#L{银川},#L{石嘴山},#L{吴忠},#L{固原},#L{中卫}",code64:"1,2,3,4,5",prov65:"#L{乌鲁木齐},#L{克拉玛依},#L{吐鲁番},#L{哈密},#L{昌吉},#L{博尔塔拉},#L{巴音郭楞},#L{阿克苏},#L{克孜勒苏},#L{喀什},#L{和田},#L{伊犁},#L{塔城},#L{阿勒泰},#L{石河子}",code65:"1,2,21,22,23,27,28,29,30,31,32,40,42,43,44",prov71:"#L{台北市},#L{高雄市},#L{基隆市},#L{台中市},#L{台南市},#L{新竹市},#L{嘉义市},#L{新北市},#L{宜兰县},#L{桃园县},#L{新竹县},#L{苗栗县},#L{台中县},#L{彰化县},#L{南投县},#L{云林县},#L{嘉义县},#L{台南县},#L{高雄县},#L{屏东县},#L{澎湖县},#L{台东县},#L{花莲县},#L{其他}",code71:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,90",prov81:"#L{中西区},#L{东区},#L{九龙城区},#L{观塘区},#L{南区},#L{深水埗区},#L{黄大仙区},#L{湾仔区},#L{油尖旺区},#L{离岛区},#L{葵青区},#L{北区},#L{西贡区},#L{沙田区},#L{屯门区},#L{大埔区},#L{荃湾区},#L{元朗区},#L{其他}",code81:"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,1",prov82:"#L{花地玛堂区},#L{圣安多尼堂区},#L{大堂区},#L{望德堂区},#L{风顺堂区},#L{氹仔},#L{路环},#L{其他}",code82:"2,3,4,5,6,7,8,1",prov400:"#L{美国},#L{英国},#L{法国},#L{俄罗斯},#L{加拿大},#L{巴西},#L{澳大利亚},#L{印尼},#L{泰国},#L{马来西亚},#L{新加坡},#L{菲律宾},#L{越南},#L{印度},#L{日本},#L{新西兰},#L{韩国},#L{德国},#L{意大利},#L{爱尔兰},#L{荷兰},#L{瑞士},#L{乌克兰},#L{南非},#L{芬兰},#L{瑞典},#L{奥地利},#L{西班牙},#L{比利时},#L{挪威},#L{丹麦},#L{波兰},#L{阿根廷},#L{白俄罗斯},#L{哥伦比亚},#L{古巴},#L{埃及},#L{希腊},#L{匈牙利},#L{伊朗},#L{蒙古},#L{墨西哥},#L{葡萄牙},#L{沙特阿拉伯},#L{土耳其},#L{其他}",code400:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,16",prov100:"",code100:"",prov:"#L{安徽},#L{北京},#L{重庆},#L{福建},#L{甘肃},#L{广东},#L{广西},#L{贵州},#L{海南},#L{河北},#L{黑龙江},#L{河南},#L{湖北},#L{湖南},#L{内蒙古},#L{江苏},#L{江西},#L{吉林},#L{辽宁},#L{宁夏},#L{青海},#L{山西},#L{山东},#L{上海},#L{四川},#L{天津},#L{西藏},#L{新疆},#L{云南},#L{浙江},#L{陕西},#L{台湾地区},#L{香港地区},#L{澳门地区},#L{海外},#L{其他}",code:"34,11,50,35,62,44,45,52,46,13,23,41,42,43,15,32,36,22,21,64,63,14,37,31,51,12,54,65,53,33,61,71,81,82,400,100"};e.exports=function(e){var t={};return t.items=i(s["prov"+e])||"",t.values=s["code"+e]||"",t}},aA:function(e,t,n,r){var i=n("b"),s=n("O"),o=n("ab"),u=n("ac"),a=n("aC"),f=n("c"),l=n("ad"),c=["<#et userlist data>",'<div class="layer_menu_list" style="position:absolute;z-index:999;" node-type="outer">','<ul node-type="inner">',"<#list data.items as item>",'<li index="${item.index}" action-type="dd_item" action-data="index=${item.index}&name=${item.name}"><a href="#">${item.name}</a></li>',"</#list>","</ul>","</div>","</#et>"].join(""),h=[{index:2,name:"#L{所有人可见}"},{index:1,name:"#L{我关注的人可见}"},{index:0,name:"#L{仅自己可见}"}],p=["enter","esc","up","down"];e.exports=function(e){var t,n,r,d,v,m,g,y,b={click:{dd_item:function(e){i.preventDefault(),i.custEvent.fire(n,"select",[e]),n.hide()}}},w={refresh:function(){var e=i.sizzle("li.cur",y)[0];e&&i.removeClassName(e,"cur")},indexChange:function(e){var t=i.sizzle("li.cur",y)[0];if(t){g=i.core.dom[e>0?"next":"prev"](t);if(!g){var n=i.sizzle("li",y);g=e<0?n[n.length-1]:n[0]}g&&i.removeClassName(t,"cur")}else{var n=i.sizzle("li",y);g=e<0?n[n.length-1]:n[0]}i.addClassName(g,"cur")}},E={enter:function(){var e=i.queryToJson(g.getAttribute("action-data"));i.custEvent.fire(n,"select",[{data:e}])},esc:function(){n.hide()},up:function(){i.stopEvent(),w.indexChange(-1)},down:function(){i.stopEvent(),w.indexChange(1)}},S={init:function(){S.pars(),S.build(),S.bind()},pars:function(){t=i.parseParam({template:c,items:h,selectedIndex:""},e||{})},build:function(){n=s(f(i.core.util.easyTemplate(t.template,t).toString())),document.body.appendChild(n.getDom("outer")),y=n.getDom("inner")},bind:function(){v=i.delegatedEvent(n.getDom("outer"));for(var e in b){var t=b[e];for(var r in t)v.add(r,e,t[r])}var s=i.core.obj.sup(n,["show","hide"]);n.show=function(){s.show(),i.custEvent.fire(n,"addClass");if(!m){m=u(document.body),i.custEvent.define(m,p);for(var e=0,t=p.length;e<t;e++)i.custEvent.add(m,p[e],E[p[e]])}o.buildIframe(n.getOuter())},n.hide=function(){s.hide(),i.custEvent.fire(n,"removeClass"),i.custEvent.fire(n,"hide"),m&&(m.destroy(),m=null)}},setLayout:function(e,t){if(!i.isNode(e))throw"ui.mod.bubble.setDown need element as first parameter";l(n.getDom("outer"),e,t)},selectedIndex:function(e){if(typeof e=="undefined")return t.selectedIndex;t.selectedIndex=e},rectsPosition:function(e){e=i.parseParam({evt:i.fixEvent(),node:null,layer:n.getDom("outer"),offsetX:0,offsetY:0},e),a.setLayer(e)},destroy:function(){m&&i.custEvent.undefine(m),m&&m.destroy(),i.custEvent.undefine(n),v.destroy()}};return S.init(),n.selectedIndex=S.selectedIndex,n.refresh=w.refresh,n.setLayout=S.setLayout,n.rectsPosition=S.rectsPosition,n.destroy=S.destroy,n}},ab:function(e,t,n,r){var i=n("b"),s=n("aB");e.exports={getIsIe6:function(){return typeof document.body.style.maxHeight=="undefined"},buildIframe:function(e,t){if(!this.getIsIe6())return;t=i.parseParam({redo:!1},t);if(!t.redo){var n=s.retrive(e,"select_iframe_inserted");if(n)return}var r=e;while(r!==document.body){var o=i.getStyle(r,"position");if(o==="absolute")break;r=r.parentNode}var u=i.position(r),a=i.position(e),f=u.l-a.l,l=u.t-a.t,c=i.core.dom.getSize(e),h="<iframe node-type='ie6selectiframe' src='about:blank' tabindex='-1' frameborder='no' style='border:none;filter:alpha(opacity=0);background-color:#ffffff;width:"+c.width+"px;height:"+c.height+"px;position:absolute;top:"+l+"px;left:"+f+"px;z-index:-1;'></iframe>";t.redo&&i.removeNode(i.sizzle('iframe[node-type="ie6selectiframe"]',r)[0]),i.insertHTML(r,h),t.redo||s.store(e,"select_iframe_inserted",!0)},hide:function(e){if(!this.getIsIe6())return;e=e||{};var t=e.except||[];i.foreach(i.sizzle("select",document.body),function(e){if(i.inArray(e,t))return;var n=i.getStyle(e,"display")==="none";if(!n){var r=i.getStyle(e,"visibility")==="hidden";r?s.store(e,"ie6SelectHidden",!0):i.setStyle(e,"visibility","hidden")}})},show:function(){if(!this.getIsIe6())return;i.foreach(i.sizzle("select",document.body),function(e){var t=i.getStyle(e,"display")==="none";if(!t){var n=s.retrive(e,"ie6SelectHidden");!n&&i.setStyle(e,"visibility","visible")}})}}},aB:function(e,t,n,r){function u(e){return e._stk_dom_cache_||(e._stk_dom_cache_=i.getUniqueKey())}function a(e,t,n){var r=u(e);s[r]||(s[r]={});var i=f(e,t);return s[r][t]=n,i}function f(e,t){var n=u(e);return s[n]?s[n][t]||null:null}function l(e,t){var n=u(e),r=f(e,t);return s[n]&&delete s[n][t],r}function c(e){var t=u(e);for(var n in s[t])delete s[t][n]}var i=n("b"),s={},o={};o.store=a,o.retrive=f,o.removeOne=l,o.removeAll=c,e.exports=o},ac:function(e,t,n,r){var i=n("b"),s={13:"enter",27:"esc",32:"space",38:"up",40:"down",9:"tab"};e.exports=function(e,t){t=t||{};var n={},r,o={keydown:function(e){t.stopScroll&&i.stopEvent();var r,o;if(!(r=e)||!(o=r.keyCode))return;s[o]&&i.custEvent.fire(n,s[o])}},u={init:function(){u.pars(),u.bind()},pars:function(){},bind:function(){for(var t in o)i.addEvent(e,t,o[t])},getKey:function(e){return s[e]},destroy:function(){for(var t in o)i.removeEvent(e,t,o[t])}};return u.init(),n.getKey=u.getKey,n.destroy=u.destroy,n}},aC:function(e,t,n,r){var i=n("b"),s=i.core.util.browser,o={},u=5,a=20,f={t:function(e,t){return e.t>t.h},b:function(e,t){return e.b>t.h},l:function(e,t){return e.l>t.w},r:function(e,t){return e.r>t.w}},l={domSize:function(e){var t=i.core.dom.getSize(e);return{w:Math.max(t.width,i.getStyle(e,"width").replace(/px|auto/gi,"")),h:Math.max(t.height,i.getStyle(e,"height").replace(/px|auto/gi,""))}},mouseXY:function(e){var t={x:e.pageX,y:e.pageY};if(s.IE6||s.IE7){var n=i.core.util.scrollPos();t.x=t.x+n.left,t.y=t.y+n.top}return t},getRows:function(e){var t=e.getClientRects();if(s.IE6||s.IE7){var n=[],r={},i;for(var o=0,u=t.length;o<u;o++){var a=t[o];r[a.top]||(r[a.top]=[]),r[a.top].push(a)}for(var f in r){var l=r[f],u=l.length,c=l[0];u>1&&(c.right=l[u-1].right),n.push(c)}t=n}return t},getTextRect:function(e,t){var n=i.parseParam({evt:""},t),r=i.core.util.scrollPos(),s;if(!e.getClientRects){var o=l.domSize(e);return{width:o.w,height:o.h,left:"",right:"",top:"",bottom:""}}var u={rows:l.getRows(e)},a=l.mouseXY(n.evt),f={x:a.x-r.left,y:a.y-r.top};for(var c=0,h=u.rows.length;c<h;c++){var p=u.rows[c];c==0&&(s=p);if(f.y>p.top&&f.y<p.bottom){s=p;break}}if(i.IE){var o=l.domSize(e);s=i.parseParam({width:o.w,height:o.h,left:"",right:"",top:"",bottom:""},s)}return s},getDistance:function(e,t){var n=i.core.util.winSize(),r=l.getTextRect(e,t);return{win:n,rect:r,w:r.width,h:r.height,t:r.top,l:r.left,r:n.width-r.right,b:n.height-r.bottom}},getSeat:function(e,t,n){var r=i.parseParam({distance:a,priority:"trbl"},n),s=l.getDistance(e,n),o=l.domSize(t);s.area="b";var u=r.priority.split("");for(var c=0,h=u.length;c<h;c++){var p=u[c];if(!f[p])throw'priority error, random use "tbrl" combination';if(f[p](s,o)){s.area=p;break}}return s},setArrow:function(e){var t=i.parseParam({evt:"",node:"",layer:"",arrow:"",css_t:"arrow arrow_b",css_r:"arrow arrow_l",css_b:"arrow arrow_t",css_l:"arrow arrow_r",offset:u,distance:a},e);if(!t.node)throw"target node is undefined";if(!t.layer)throw"layer node is undefined";if(!t.arrow)throw"arrow node is undefined";var n=l.getSeat(t.node,t.layer,t),r=n.area,s=n.rect;t.arrow.className=t["css_"+r];var o=l.domSize(t.layer),f=i.scrollPos(),c,h;r=="t"||r=="b"?(c=r=="t"?s.top+f.top-o.h-t.offset:s.bottom+f.top+t.offset,h=s.left+f.left-t.distance):(c=s.top+f.top-t.distance,h=r=="r"?s.right+f.left+t.offset:s.left+f.left-o.w-t.offset),t.layer.style.top=c+"px",t.layer.style.left=h+"px"},setLayer:function(e){var t=i.parseParam({evt:"",node:"",layer:"",priority:"btrl",offsetX:0,offsetY:0},e);if(!t.node)throw"target node is undefined";if(!t.layer)throw"layer node is undefined";var n=l.getSeat(t.node,t.layer,t),r=n.area,s=n.rect,o=l.domSize(t.layer),u=i.scrollPos(),a,f;r=="t"||r=="b"?(a=r=="t"?s.top+u.top-o.h+t.offsetY:s.bottom+u.top-t.offsetY,f=s.left+u.left+t.offsetX):(a=s.top+u.top+t.offsetY,f=r=="r"?s.right+u.left-t.offsetX:s.left+u.left-o.w+t.offsetX),t.layer.style.top=a+"px",t.layer.style.left=f+"px"}};o.getTextRect=l.getTextRect,o.getDistance=l.getDistance,o.getSeat=l.getSeat,o.setArrow=l.setArrow,o.setLayer=l.setLayer,e.exports=o},ad:function(e,t,n,r){var i=n("b");e.exports=function(e,t,n){if(!i.isNode(t))throw"kit.dom.layerOutElement need element as first parameter";if(t===document.body)return!1;if(!t.parentNode)return!1;if(t.style.display==="none")return!1;var r,s,o,u,a,f,l;r=i.parseParam({pos:"left-bottom",offsetX:0,offsetY:0},n),s=t;if(!s)return!1;while(s!==document.body){s=s.parentNode;if(s.style.display==="none")return!1;f=i.getStyle(s,"position"),l=s.getAttribute("layout-shell");if(f==="absolute"||f==="fixed")break;if(l==="true"&&f==="relative")break}return s.appendChild(e),o=i.position(t,{parent:s}),u={w:t.offsetWidth,h:t.offsetHeight},a=r.pos.split("-"),a[0]==="left"?e.style.left=o.l+r.offsetX+"px":a[0]==="right"?e.style.left=o.l+u.w+r.offsetX+"px":a[0]==="center"&&(e.style.left=o.l+u.w/2+r.offsetX+"px"),a[1]==="top"?e.style.top=o.t+r.offsetY+"px":a[1]==="bottom"?e.style.top=o.t+u.h+r.offsetY+"px":a[1]==="middle"&&(e.style.top=o.t+u.h/2+r.offsetY+"px"),!0}},aD:function(e,t,n,r){var i=n("b"),s=n("ae"),o=n("ad"),u=n("c");e.exports=function(e,t){if(!t||!t.trans||!t.tranName)return;t.path=t.path||"",t.name=t.name||"name",t.key=t.key||"q",t.hasInsert=t.hasInsert||!1,t.notice=t.notice||!1,t.max=t.max||!1,isShow=!1;var n=t.noselectFirst,r={},a,f=t.trans,l=t.tranName,c,h=0,p,d,v=t.item||"item",m,g=u('<div class="layer_menu_list"><ul node-type="suggestWrap"><li class="suggest_title">#L{尚未找到此结果}</li></ul></div>'),y=typeof t.noSuggest=="undefined"?g:t.noSuggest,b=function(e,r){var i=[],s=t.hasInsert;if(e.length==0&&!t.notice)return y;i.push('<div class="layer_menu_list">'),t.notice&&i.push('<div style="padding:5px 10px;">'+t.notice+"</div>"),i.push('<ul node-type="suggestWrap">'),t.hasInsert&&(i.push('<li action-type="item" node-type="item"'),!n&&i.push('class="cur"'),i.push('" value="'+r+'"><a href="javascript:void(0)">'+r+"</a></li>"));var o=e.length,u;for(var a=0;a<o;a++){u=e[a];if(t.max&&a==t["max"])break;if(r==u[t["name"]])continue;i.push('<li action-type="item" node-type="item"'),a==0&&!t.hasInsert&&!n&&i.push('class="cur"'),i.push('" value="'+u[t.name]+'"><a href="javascript:void(0)">'+u[t.name]+"</a></li>")}return i.push("</ul></div>"),i.join("")},w=t.template||b,E={DOM:{},objs:{}},S=function(){a&&setTimeout(function(){i.custEvent.fire(a,"close")},500)},x=function(e){list=i.sizzle("li[class!=suggest_title]",d),list&&list[0]&&i.core.dom.removeClassName(list[h],"cur"),i.core.dom.addClassName(list[e],"cur"),h=e},T=function(){isShow=!1,d.style.display="none",d.innerHTML="",m=""},N=function(){i.custEvent.add(a,"onIndexChange",function(e,t){x(t)}),i.custEvent.add(a,"onSelect",function(e,t,n,s){h=0,i.core.evt.stopEvent();var o=i.sizzle("[node-type='item']",d),u=o[t].getAttribute("value")||"",f=i.core.json.queryToJson(o[t].getAttribute("action-data")||"");n.value=u,setTimeout(function(){i.custEvent.fire(a,"close")},10),i.custEvent.fire(r,"select",f)}),i.custEvent.add(a,"onClose",T),i.custEvent.add(a,"onOpen",function(e,t){isShow=!0,d.style.display="",n||setTimeout(function(){i.custEvent.fire(a,"indexChange",0)},100)})},C={suggestChange:function(n){var s,u;if(!(s=n)||!(u=s.keyCode))return;if(u==13||u==38||u==40)return;var c=i.core.evt.fixEvent(n).target,h=t.data||{};if(m==e.value)return;p&&p.abort(),m=e.value,h[t.key]=e.value;if(!h[t.key]){i.custEvent.fire(a,"close");return}h=i.core.json.merge(h,i.core.json.queryToJson(e.getAttribute("extra")||"")),p=f.getTrans(l,{onComplete:function(n){var s=t.path?n.data[t.path]:n.data;if(!(s.length>0)){i.custEvent.fire(r,"nosuggest"),i.custEvent.fire(a,"close");return}i.custEvent.fire(r,"suggest");var u=w(s,e.value);d.innerHTML=u,i.custEvent.fire(a,"open",e);var f=i.core.dom.getSize(e).height,l=t.width?t.width+"px":"";d.style.cssText=[";z-index:11001;background-color:#ffffff;position:absolute;",";min-width:"+l,";"].join(""),o(d,c,{pos:"left-top",offsetY:t.height||f||20})}}).request(h)}},k=function(){L(),A(),O()},L=function(){if(!e)throw"node 没有定义";c=i.core.dom.getSize(e)},A=function(){d=i.C("div"),a=s({textNode:e,uiNode:d,actionType:v}),i.custEvent.define(r,["select","nosuggest","suggest"]),N()},O=function(){i.addEvent(e,"keyup",C.suggestChange),i.addEvent(e,"blur",S)},M=function(){a&&a.destroy&&a.destroy(),i.removeEvent(e,"keyup",C.suggestChange),i.removeEvent(e,"blur",S),i.custEvent.undefine(r,["select","nosuggest","suggest"])},_=function(e){t.data=e},D=function(){i.custEvent.fire(a,"close")},P=function(e){t.height=e};return k(),r.destroy=M,r.isShow=function(){return isShow},r.setHeight=P,r.setNotice=function(e){t.notice=e+""},r.hide=D,r.setData=_,r}},ae:function(e,t,n,r){var i=n("b"),s=null,o=i.custEvent,u=o.define,a=o.fire,f=o.add,l=i.addEvent,c=i.removeEvent,h=i.stopEvent,p=[],d={},v={ENTER:13,ESC:27,UP:38,DOWN:40,TAB:9},m=function(e){var t=-1,n=[],r=e.textNode,s=e.uiNode,o=i.core.evt.delegatedEvent(s),p=u(r,["open","close","indexChange","onSelect","onIndexChange","onClose","onOpen","openSetFlag"]);p.setFlag=d;var d=function(t){e.flag=t},m=function(){return i.sizzle(["[action-type=",e.actionType,"]"].join(""),s)},g=function(){t=-1,c(r,"keydown",y),o.destroy()},y=function(n){var s,o;if(!(s=n)||!(o=s.keyCode))return;o==v["ENTER"]&&(a(p,"onSelect",[t,r,e.flag]),i.preventDefault());if(o==v["UP"]){h();var u=m().length;return t=t<1?u-1:t-1,a(p,"onIndexChange",[t]),!1}if(o==v["DOWN"]){h();var u=m().length;return t=t==u-1?0:t+1,a(p,"onIndexChange",[t]),!1}if(o==v["ESC"])return h(),g(),a(p,"onClose"),!1;if(o==v["TAB"])return g(),a(p,"onClose"),!1},b=function(t){a(p,"onSelect",[i.core.arr.indexOf(t.el,m()),r,e.flag])},w=function(e){t=i.core.arr.indexOf(e.el,m()),a(p,"onIndexChange",[i.core.arr.indexOf(e.el,m())])};return f(p,"open",function(t,n){r=n,g(),l(n,"keydown",y),o.add(e.actionType,"mouseover",w),o.add(e.actionType,"click",b),a(p,"onOpen",[e.flag])}),f(p,"openSetFlag",function(e,t){d(t)}),f(p,"close",function(){g(),a(p,"onClose",[e.flag])}),f(p,"indexChange",function(n,r){t=r,a(p,"onIndexChange",[t,e.flag])}),p},g=function(e){var t=e.textNode,n=i.core.arr.indexOf(t,p);return d[n]||(p[n=p.length]=t,d[n]=m(e)),d[n]};e.exports=function(e){if(!e.textNode||!e.uiNode)return;return e=i.parseParam({textNode:s,uiNode:s,actionType:"item",actionData:"index",flag:""},e),g(e)}},aE:function(e,t,n,r){e.exports=function(e,t){t=t||!0;var n={},r=function(e,n){for(var i in e){var s=e[i];typeof s=="object"?(n[i]={},r(s,n[i])):t?n[i]=encodeURIComponent(e[i]):n[i]=decodeURIComponent(e[i])}};return r(e,n),n}},af:function(e,t,n,r){var i=n("b"),s=/([a-z\d-]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^\s]+)))?/ig,o=/^on([a-z\d-]*)$/i,u=/&#(x?)([a-z\d]*);?/ig,a=/(javascript|vbscript|expression|applet)/i,f=/^(audio|video|html|object|embed|applet|param|body|head|form|script|iframe|expression|applet|meta|xml|blink|style|frame|frameset|ilayer|layer|bgsound|title|base)$/i,l=function(e){return e.replace(s,function(e,t,n){var r=e.replace(u,function(){var e=arguments[1],t=arguments[2];return String.fromCharCode(e?parseInt(t,16):t)}).replace(/(\s|%20)/g,"");return a.test(r)||o.test(t)?"":e})},c=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return f.test(r)?"":!r||!i?t:n?["</",r,">"].join(""):["<",r," ",l(i),">"].join("")};e.exports=function(e){var t=i.core.str.parseHTML(e);return t=i.foreach(t,c),t.join("")}},aF:function(e,t,n,r){var i=n("b"),s=n("j"),o=n("c");e.exports=function(e,t,n,r){var u={},a,f,l,c=!1,h=!1,p="hide",d,v=o('<div class="pf_item_more clearfix"><div class="tags_more"><a href="javascript:void(0);" action-type="toggle" node-type="toggleLink">'+t+'<span class="W_arrow S_link1">'+'<em node-type="arr" title="#L{展开}">◆</em>'+"</span>"+"</a>"+"</div>"+'<div class="findmore S_line2 S_bg1'+(r?" findmore_narrow ":" ")+'" node-type="commend_list" style="display:none;">'+"</div>"+"</div>"),m={getData:function(){return i.queryToJson(e.getAttribute("data")||"")},setData:function(t){e.setAttribute("data",i.jsonToQuery(t||{}))},show:function(){c?(i.custEvent.fire(u,"open"),f&&(f.style.display=""),l&&(l.className="W_arrow_turn"),l&&l.setAttribute("title",o("#L{收起}")),h=!0):s.getTrans(n,{onSuccess:function(e){i.custEvent.fire(u,"open"),f&&(f.innerHTML=e.data.html,f.style.display=""),c=!0,l&&(l.className="W_arrow_turn"),l&&l.setAttribute("title",o("#L{收起}")),h=!0}}).request(m.getData())},hide:function(){f&&(f.style.display="none"),l&&(l.className=""),l&&l.setAttribute("title",o("#L{展开}")),h=!1},reflash:function(){s.getTrans(n,{onSuccess:function(e){f&&(f.innerHTML=e.data.html,f.style.display=""),l&&(l.className="W_arrow_turn"),l&&l.setAttribute("title",o("#L{收起}")),h=!0}}).request(m.getData())},followBtnReplace:function(e){var t=i.C("a");t.href="javascript:void(0);",t.className="W_btn_a_disable",t.innerHTML=o("<span>#L{已关注}</span>"),i.replaceNode(t,e)}},g={toggle:function(){m[h?"hide":"show"]()},follow:function(e){s.getTrans("follow",{onSuccess:function(t){m.followBtnReplace(e.el)}}).request(e.data)}},y=function(){e.innerHTML=v,a=i.core.dom.builder(e).list,f=a&&a.commend_list&&a.commend_list[0],l=a&&a.toggleLink&&a.toggleLink[0],p=e.getAttribute("state"),p=="show"&&m.show()},b=function(){i.custEvent.define(u,"open"),d=i.delegatedEvent(e),d.add("toggle","click",g.toggle),d.add("follow","click",g.follow)},w=function(){y(),b()},E=function(){d&&(d.remove("toggle","click",g.toggle),d.remove("follow","click",g.follow)),d=null,e.innerHTML=""};return u.show=m.show,u.hide=m.hide,u.setData=m.setData,u.reflash=m.reflash,u.destroy=E,w(),u}},ag:function(e,t,n,r){var i=n("b");e.exports=function(e){if(!i.core.dom.isNode(e))throw"Parameter must be an HTMLEelement!";var t=[];for(var n=0,r=e.childNodes.length;n<r;n++)e.childNodes[n].nodeType==1&&t.push(e.childNodes[n]);return t}},aG:function(e,t,n,r){var i=n("b"),s=n("ah");s(i.E("pl_personalInfo_personalData"))},ah:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("T"),u=n("C"),a=n("e"),f=n("aH"),l=n("I"),c=n("j"),h=n("L"),p=n("m"),d=n("ai"),v=n("aI"),m=n("z"),g=n("aj"),y=n("aJ"),b=n("ak"),w=n("aA"),E=n("X"),S=n("aK"),x=n("M"),T=n("S"),N={};N.realname=f,N.blog=v,N.birthday=d,N.desc=g,N.qq=y,N.msn=b,e.exports=function(e){var t={},n,r,o,f,d,v,g,y,b,S=["realname","blog","birthday","desc","qq","msn"],C,k,L,A=[{index:3,name:"#L{公开,完整显示}"},{index:2,name:"#L{只显示星座}"},{index:1,name:"#L{只显示月日}"},{index:0,name:"#L{保密}"}],O={select:function(e,t){y.setAttribute("value",t.data.index);var n=i.sizzle("[node-type=secrecy_title]",y)[0];n&&(n.innerHTML=t.data.name),setTimeout(function(){g.hide()},100)},show:function(e,t){b||(b=E({act:y,extra:[g.getDom("outer")],delay:50,onmouseover:g.show,onmouseout:g.hide}))},hide:function(e,t){b&&(b.destroy(),b=null)},addClass:function(){i.hasClassName(y,"W_arrow_turn")||i.addClassName(y,"W_arrow_turn")},removeClass:function(){i.hasClassName(y,"W_arrow_turn")&&i.removeClassName(y,"W_arrow_turn")}},M={select:function(e,t){y.setAttribute("value",t.data.index);var n=i.sizzle("[node-type=secrecy_title]",y)[0];n&&(n.innerHTML=t.data.name),setTimeout(function(){v.hide()},100)},show:function(e,t){b||(b=E({act:y,extra:[v.getDom("outer")],delay:50,onmouseover:v.show,onmouseout:v.hide}))},hide:function(e,t){b&&(b.destroy(),b=null)},addClass:function(){i.hasClassName(y,"W_arrow_turn")||i.addClassName(y,"W_arrow_turn")},removeClass:function(){i.hasClassName(y,"W_arrow_turn")&&i.removeClassName(y,"W_arrow_turn")}},_={formCheck:function(e,t){P(t)},close:function(){var e=n.getData();for(var t in e)if(typeof e[t]=="object"){for(var r in e[t])if(e[t][r]!=k[t][r]){d.set.edit();return}}else if(e[t]!=k[t]){d.set.edit();return}d.set.revert()},reset:function(){B.destroy(),d.render.content(L),B.init()}},D={init:function(){B.citySelecter=m(r.citySelect,{city:!0,area:!1,proDef:r.province.getAttribute("defvalue")||"11",cityDef:r.city.getAttribute("defvalue")||""})}},P=function(e,t){t=t||!1;for(var n in e){var i=e[n];if(t&&i.state)continue;var s=r[n+"_tip"];s&&(s.innerHTML=h("newFormTips",{data:i}))}},H={secrecyDate:function(e){i.preventDefault(),y=e.el;if(!v){v=w({items:A});var t=["select","show","hide","addClass","removeClass"];i.custEvent.define(v,t);for(var n=0,r=t.length;n<r;n++){var s=t[n];i.custEvent.add(v,s,M[s])}}i.core.util.browser.IE6||i.core.util.browser.IE7?v.setLayout(e.el,{offsetX:0,offsetY:0}):v.rectsPosition({evt:i.fixEvent(),node:y,offsetX:.5,offsetY:0}),v.show()},secrecy:function(e){i.preventDefault(),y=e.el;if(!g){g=w();var t=["select","show","hide","addClass","removeClass"];i.custEvent.define(g,t);for(var n=0,r=t.length;n<r;n++){var s=t[n];i.custEvent.add(g,s,O[s])}}i.core.util.browser.IE6||i.core.util.browser.IE7?g.setLayout(e.el,{offsetX:0,offsetY:0}):g.rectsPosition({evt:i.fixEvent(),node:y,offsetX:.5,offsetY:0}),g.show()},btn_submit:function(e){i.preventDefault();var t=n.check();if(t){var r=n.getData(),o=i.core.json.merge(e.data,r);o.setting_rid=$CONFIG.setting_rid,C.setLoading(),c.request("personalData",{isEncode:!0,onSuccess:function(t){C.setNormal(),k=n.getData(),L=d.dom.content().innerHTML,C.setNormal();var r=T({showCallback:function(){setTimeout(function(){r&&r.anihide()},500)},hideCallback:function(){r&&r.destroy(),r=undefined},msg:t.msg||s("#L{保存成功}"),type:"succ"});r.setLayerXY(e.el),r.aniShow()},onError:function(t){t.data&&funcs.showTips(t.data);var n=T({showCallback:function(){setTimeout(function(){n&&n.anihide()},500)},hideCallback:function(){n&&n.destroy(),n=undefined,C.setNormal()},msg:t.msg||s("#L{保存失败}"),type:"del"});n.setLayerXY(e.el),n.aniShow()}},o)}else P(n.states(),!0)},btn_reset:function(e){d.handle.close(),i.preventDefault()}},B={loader:function(){d=x(e,{IO:c,IOKey:"personalDataFrame"}),d.is.cached()&&B.init(),i.custEvent.add(d,"renderSuccess",B.init)},init:function(){B.build(),B.pars(),B.bind(),setTimeout(function(){k=n.getData(),k["Date_year"]==""&&(k.Date_year="1"),L=d.dom.content().innerHTML},0)},pars:function(){D.init()},build:function(){n=a(e),r=l(n.domList);for(var t=0,s,o,h,d=S.length;t<d;t++){s=S[t],o=r[s];if(r[s]&&N[s]){h=i.queryToJson(o.getAttribute("action-data")||""),h.hook=n,h.proxy=c,h.iokey="trans";var v=N[s](o,h);n.add(s,v)}}f=u(e),C=p(r.btn_submit)},bind:function(){i.custEvent.define(n,["check"]),i.custEvent.add(n,"check",_.formCheck),i.custEvent.add(d,"close",_.close),i.custEvent.add(d,"afterDiscard",_.reset),o=i.delegatedEvent(e);for(var t in H)o.add(t,"click",H[t])},destroy:function(){i.custEvent.remove(n,"check",_.formCheck),i.custEvent.remove(d,"close",_.close),i.custEvent.remove(d,"afterDiscard",_.reset),o.destroy(),f.destroy()}};return B.loader(),t.destroy=B.destroy,t}},aH:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{请填写真实姓名，方便我们联系你。你的资料不会透露给任何人}",E03:"#L{请输入真实姓名}",E04:"#L{请输入真实姓名}"};e.exports=function(e,t){t=t||{};var n=function(){var e=a.value(),t=!1;if(!a.pars.must&&a.rule.isEmpty(e)){a.msg.state=!0,a.msg.type="empty",a.msg.code="E01";return}!t&&(a.rule.isEmpty(e)||a.valCacheCtrl.isVal(e))&&(t=!0,a.msg.type="err",a.msg.code="E03"),!t&&(!a.rule.isRealName(e)||!a.rule.lenLimit(e,4,16))&&(t=!0,a.msg.type="err",a.msg.code="E04"),t?a.msg.state=!1:(a.msg.state=!0,a.msg.type="ok",a.msg.code="E01")},r={focus:function(){a.cache_value=a.value(),a.msg.state=!1,a.msg.action="focus",a.msg.type="tip",a.msg.code="E02",a.fire()},blur:function(){e.value=a.rule.reNullChar(e.value),a.msg.action="blur",n(),a.fire()}},a=o(e,t,{evtAct:r,check:n}),f=i.core.obj.sup(a,["initPars"]);return a.initPars=function(){f.initPars(),a.errText=s(t.errText||u),a.type="realname"},a.pars.auto&&a.init(),a}},ai:function(e,t,n,r){var i=n("b"),s=n("I"),o=n("f"),u=n("F"),a={DEFAULT:"",DS:"-"},f={E01:"",E02:"#L{请输入完整的生日}",E03:"#L{请选择出生年份}",E04:"#L{请选择出生月份}",E05:"#L{请选择出生日期}"},l=function(e){return e&&e!=="--"?!1:!0},c=function(e){return/\d{4}\-\d{1,2}\-\d{1,2}/.test(e)?!0:/^1\-\-$/.test(e)?!0:!1};e.exports=function(e,t){var n,r;t=t||{};var h={init:function(){h.parseParam(),h.parseDOM(),h.bind(),h.initPlugin(),h.setDefault()},parseParam:function(){a=o(a)},parseDOM:function(){n=s(i.builder(e).list)},initPlugin:function(){r=u(n.birthday_value,t,{check:h.check});var e=i.core.obj.sup(r,["initPars"]);r.initPars=function(){e.initPars(),r.errText=o(f),r.type="birthday"},r.pars.auto&&r.init()},setDefault:function(){var e=r.value().replace(/^\s+|\s+$/g,"");if(/^0001\-00\-00$/.test(e)||/^0000\-00\-00$/.test(e))e="";if(r.rule.isEmpty(e)||!c(e))n.birthday_year.value="1";else{var t=e.split(a.DS);h.reRender(!0),setTimeout(function(){n.birthday_year.value=t[0],n.birthday_month.value=t[1],n.birthday_day.value=t[2]},0)}},check:function(){var e=r.value().replace(/^\s+|\s+$/g,""),t=!1;if(!r.pars.must&&l(e)){r.msg.state=!0,r.msg.type="empty",r.msg.code="E02";return}!t&&(l(e)||r.valCacheCtrl.isVal(e))&&(t=!0,r.msg.type="err",r.msg.code="E02"),!t&&!c(e)&&(t=!0,r.msg.type="err",r.msg.code="E02"),t?r.msg.state=!1:(r.msg.state=!0,r.msg.type="ok",r.msg.code="E01")},bind:function(){for(var e in h.domEvents.change)i.addEvent(n[e],"change",h.domEvents.change[e])},unbind:function(){for(var e in h.domEvents.change)i.removeEvent(n[e],"change",h.domEvents.change[e])},fixValue:function(){n.birthday_value.value=n.birthday_year.value+a.DS+n.birthday_month.value+a.DS+n.birthday_day.value,h.domEvents.update()},createOptions:function(e,t){var n=document.createElement("option");n.value=t,n.innerHTML=e;try{return n}finally{n=null}},renderOptions:function(e,t){var n=e.value;e.innerHTML="",e.appendChild(h.createOptions(a.DEFAULT,""));for(var r=1;r<=t;r++){var i=r;r<10&&(i="0"+r),e.appendChild(h.createOptions(i,i))}!n||(parseInt(n,10)>t&&(n=t+""),e.value=n)},reRender:function(e){n.birthday_year.value=="1"||n.birthday_year.value=="0"?(n.birthday_month.innerHTML="",n.birthday_day.innerHTML=""):n.birthday_month.length==0&&h.renderOptions(n.birthday_month,12),n.birthday_month.value=="02"?h.isLeapyear(n.birthday_year.value)?h.renderOptions(n.birthday_day,29):h.renderOptions(n.birthday_day,28):i.inArray(n.birthday_month.value,["04","06","09","11"])?h.renderOptions(n.birthday_day,30):i.inArray(n.birthday_month.value,["01","03","05","07","08","10","12"])?h.renderOptions(n.birthday_day,31):n.birthday_day.innerHTML="",e&&h.renderOptions(n.birthday_day,31);if(i.core.util.browser.IE7){var t=i.getStyle(n.birthday_month,"height"),r=i.getStyle(n.birthday_day,"height");n.birthday_month.style.height="10px",n.birthday_day.style.height="10px",n.birthday_month.style.height=t,n.birthday_day.style.height=r}},isLeapyear:function(e){return e%400==0&&e%3200!=0||e%4==0&&e%100!=0||e%3200==0&&e%172800==0?!0:!1},domEvents:{change:{birthday_year:function(){h.reRender(),h.fixValue()},birthday_month:function(){h.reRender(),h.fixValue()},birthday_day:function(){h.fixValue()}},update:function(){r.msg.action="change",h.check(),r.fire()}}};return h.init(),r}},aI:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{例如 http://blog.sina.com.cn/sinat}",E03:"#L{请输入博客地址}",E04:"#L{请输入正确博客地址}"};e.exports=function(e,t){t=t||{};var n=function(){var e=a.value(),t=!1;if(!a.pars.must&&a.rule.isEmpty(e)){a.msg.state=!0,a.msg.type="empty",a.msg.code="E01";return}!t&&a.rule.isEmpty(e)&&(t=!0,a.msg.type="warn",a.msg.code="E03"),!t&&!a.rule.isUrl(e)&&(t=!0,a.msg.type="err",a.msg.code="E04"),!t&&!a.rule.lenLimit(e,0,100)&&(t=!0,a.msg.type="err",a.msg.code="E04"),t?a.msg.state=!1:(a.msg.state=!0,a.msg.type="ok",a.msg.code="E01")},r={focus:function(){a.cache_value=a.value(),a.msg.state=!1,a.msg.action="focus",a.msg.type="tip",a.msg.code="E02",a.fire()},blur:function(){e.value=a.rule.reNullChar(e.value),a.msg.action="blur",n(),a.fire()}},a=o(e,t,{evtAct:r,check:n}),f=i.core.obj.sup(a,["initPars"]);return a.initPars=function(){f.initPars(),a.errText=s(u),a.type="blog"},a.init(),a}},aj:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{请不要超过70个字}",E03:"#L{请输入简介}",E04:"#L{请不要超过70个字}"};e.exports=function(e,t){t=t||{};var n=function(){var e=a.value(),n=!1;if(!a.pars.must&&a.rule.isEmpty(e)){a.msg.state=!0,a.msg.type="empty",a.msg.code="E01";return}!n&&(a.rule.isEmpty(e)||a.valCacheCtrl.isVal(e))&&(n=!0,a.msg.type="warn",a.msg.code="E03");var r=t.maxlength||70;!n&&!a.rule.lenLimit(e,0,r*2)&&(n=!0,a.msg.type="err",a.msg.code="E04"),n?a.msg.state=!1:(a.msg.state=!0,a.msg.type="ok",a.msg.code="E01")},r={focus:function(){a.cache_value=a.value(),a.msg.state=!1,a.msg.action="focus",a.msg.type="tip",a.msg.code="E02",a.fire()},blur:function(){e.value=a.rule.reNullChar(e.value),a.msg.action="blur",n(),a.fire()}},a=o(e,t,{evtAct:r,check:n}),f=i.core.obj.sup(a,["initPars"]);return a.initPars=function(){f.initPars(),a.errText=s(t.errText||u),a.type="desc"},a.init(),a}},aJ:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{例如17006666}",E03:"#L{请输入正确的的QQ号}"};e.exports=function(e,t){t=t||{};var n=function(){var e=a.value().replace(/^\s+|\s+$/g,""),t=!1;if(!a.pars.must&&a.rule.isEmpty(e)){a.msg.state=!0,a.msg.type="empty",a.msg.code="E01";return}!t&&(a.rule.isEmpty(e)||a.valCacheCtrl.isVal(e))&&(t=!0,a.msg.type="err",a.msg.code="E02"),!t&&(!a.rule.isNumber(e)||!a.rule.lenLimit(e,5,12))&&(t=!0,a.msg.type="err",a.msg.code="E03"),!t&&e.indexOf("0")==0&&(t=!0,a.msg.type="err",a.msg.code="E03"),t?a.msg.state=!1:(a.msg.state=!0,a.msg.type="ok",a.msg.code="E01")},r={focus:function(){a.cache_value=a.value(),a.msg.state=!1,a.msg.action="focus",a.msg.type="tip",a.msg.code="E02",a.fire()},blur:function(){e.value=a.rule.reNullChar(e.value),a.msg.action="blur",n(),a.fire()}},a=o(e,t,{evtAct:r,check:n}),f=i.core.obj.sup(a,["initPars"]);return a.initPars=function(){f.initPars(),a.errText=s(u),a.type="qq"},a.pars.auto&&a.init(),a}},ak:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{例如demo@hotmail.com}",E03:"#L{请输入正确的MSN地址}"};e.exports=function(e,t){var n;t=t||{};var r=function(){var e=f.value(),t=!1;if(!f.pars.must&&f.rule.isEmpty(e)){f.msg.state=!0,f.msg.type="empty",f.msg.code="E01";return}!t&&f.rule.isEmpty(e)&&(t=!0,f.msg.type="err",f.msg.code="E02"),!t&&!f.rule.isEmail(e)&&(t=!0,f.msg.type="err",f.msg.code="E03"),!t&&!f.rule.lenLimit(e,5,64)&&(t=!0,f.msg.type="err",f.msg.code="E03"),t?f.msg.state=!1:(f.msg.state=!0,f.msg.type="ok",f.msg.code="E01")},a={focus:function(){f.cache_value=f.value(),f.msg.state=!1,f.msg.action="focus",f.msg.type="tip",f.msg.code="E02",f.fire()},blur:function(){e.value=f.rule.reNullChar(e.value),f.msg.action="blur",r(),f.fire()}},f=o(e,t,{evtAct:a,check:r}),l=i.core.obj.sup(f,["initPars"]);return f.initPars=function(){l.initPars(),f.errText=s(u),f.type="msn"},f.init(),f}},aK:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("t");e.exports=function(e){e=e||{};var t=o(e),n=t.getInner(),r=t.getOuter();r.className="W_layer",n.className="bg",e.info=e.info||s("#L{确认要删除这条微博吗？}"),e.icon=e.icon||"icon_ask";var u=e.template||s('<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td><div class="content layer_mini_info"><p class="clearfix" node-type="info"><span node-type="icon" class="'+e.icon+'"></span>'+e.info+"</p>"+'<p class="btn"><a node-type="ok" class="W_btn_d" href="javascript:void(0)"><span>#L{确定}</span></a><a class="W_btn_b" node-type="cancel" href="javascript:void(0)"><span>#L{取消}</span></a></p>'+"</div>"+"</td></tr></tbody>"+"</table>"),a=i.builder(u);t.setContent(a.box);if(!a.list.ok)return t;var f=a.list.ok[0],l=a.list.cancel[0];t.setIcon=function(e){a.list.info.className=e,t.setTipWH()},t.setInfo=function(n){a.list.info[0].innerHTML='<span node-type="icon" class="'+e.icon+'"></span>'+n,t.setTipWH()},t.cancelCallback=function(){i.getType(e.cancelCallback)=="function"&&e.cancelCallback()},t.okCallback=function(){i.getType(e.okCallback)=="function"&&e.okCallback()};var c=function(){t.anihide(),t.cancelCallback()},h=function(){t.anihide(),t.okCallback()};i.addEvent(l,"click",c),i.addEvent(f,"click",h);var p=t.destroy;return t.destroy=function(){i.removeEvent(l,"click",c),i.removeEvent(f,"click",h),p(),t=null},t}},al:function(e,t,n,r){var i=n("b"),s=n("aL");s(i.E("pl_personalInfo_education"))},aL:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("X"),u=n("e"),a=n("am"),f=n("C"),l=n("L"),c=n("aA"),h=n("aM"),p=n("aD"),d=n("ag"),v=n("Q"),m=n("aE"),g=n("af"),y=n("aF"),b=n("j"),w=n("N"),E=n("S"),S=n("M"),x={};x.classname=a;var T={TEMPL_OUT_1_EDIT:s('<div class="pf_item clearfix" node-type="edu_1"><div class="label S_txt2">#L{大学}</div><div node-type="edulist_1" class="con"></div>'),TEMPL_OUT_2_EDIT:s('<div class="pf_item clearfix" node-type="edu_2"><div class="label S_txt2">#L{高中}</div><div node-type="edulist_2" class="con"></div>'),TEMPL_OUT_3_EDIT:s('<div class="pf_item clearfix" node-type="edu_3"><div class="label S_txt2">#L{中专技校}</div><div node-type="edulist_3" class="con"></div>'),TEMPL_OUT_4_EDIT:s('<div class="pf_item clearfix" node-type="edu_4"><div class="label S_txt2">#L{初中}</div><div node-type="edulist_4" class="con"></div>'),TEMPL_OUT_5_EDIT:s('<div class="pf_item clearfix" node-type="edu_5"><div class="label S_txt2">#L{小学}</div><div node-type="edulist_5" class="con"></div>')},N=s('<#et morelist data><div class="hideblock" node-type="edulist_item" action-type="edulist_item"><p class="limited"><a href="${data.href}" target="_blank" node-type="edulist_item_school" schoolid="${data.rowid}" changed="changed">${data.school}</a><span node-type="edulist_item_time"><#if (data.time)>(${data.time}#L{年})</#if></span><span class="visibility S_txt2">${data.privacy}</span></p><p class="bsp" node-type="edulist_item_class">${data.className}</p><div class="action"><a href="javascript:void(0)" class="W_ico12 icon_edit" action-type="edu_edit" action-data="${data.datastr}"></a><a href="javascript:void(0)" class="W_ico12 icon_close" action-type="edu_delete" action-data="rowid=${data.rowid}"></a></div><div node-type="commend" data="id=${data.rowid}" state="show"></div></div></#et>');e.exports=function(e){var t={},n,r,a,p=["class"],v,C,k,L,A,O,M,_=!1,D,P,H,B=!0,j,F,I,q,R,U={},z=[],W={clearDepartOptions:function(){q.options.length=0,q.options[q.options.length]=new Option(s("#L{请选择院系}"),"0")},showTips:function(e){var t,r,i;for(i in e)t=e[i],r=n[i+"_tip"][0],r&&(r.innerHTML=l("newFormTips",{data:t})),r.style.display=""},replaceClassInput:function(e){I.value=i.queryToJson(I.getAttribute("action-data")).text,e=="select"?!i.core.dom.contains(document.body,R)&&i.core.dom.contains(document.body,I)&&(i.getStyle(q,"visibility")=="hidden"&&i.setStyle(q,"visibility","visible"),i.replaceNode(R,I)):e=="input"&&!i.core.dom.contains(document.body,I)&&i.core.dom.contains(document.body,R)&&i.replaceNode(I,R),n.class_tip[0].innerHTML=""},renderCommend:function(){var e=n.commend||[];for(var t=0,r=z.length;t<r;t++)z[t]&&z[t].destroy&&z[t].destroy();for(var t=0,r=e.length;t<r;t++){var o=y(e[t],s("#L{推荐同学}"),"eduCommend");i.custEvent.add(o,"open",function(){for(var e=0,t=z.length;e<t;e++)z[e].hide()}),e[t]&&z.push(o)}},editReset:function(e){var t=[s("#L{仅自己可见}"),s("#L{我关注的人可见}"),s("#L{所有人可见}")];e.type&&(n.school_type[0].value=e.type),J.change(),W.clearDepartOptions(),n.school[0].value=decodeURIComponent(e.school)||i.queryToJson(n.school[0].getAttribute("action-data")).text,e.type==1?n["class"][0].value="":n["class"][0].value=e["class"]||i.queryToJson(n["class"][0].getAttribute("action-data")).text,e.start&&(n.start[0].value=e.start);var r=i.sizzle("[action-type=secrecy]",A)[0],o=i.sizzle("[node-type=secrecy_title]",A)[0];r.setAttribute("value",e.secrecy),o.innerHTML=t[e.secrecy]},save:function(e,t){B=!1,P&&(e.id=P),e["school_type"]==1&&(e.remark=q.value==0?"":q.value),b.request("edu",{onSuccess:function(r){var o=r.data.id||"",u=r.data.desc||"";O.render.concise(u);var a={school:e.name,href:"http://weibo.com/find/f?type=3&search=1&scho="+encodeURIComponent(e.name),school_name:encodeURIComponent(e.name),className:e.remark,department:e.remark,rowid:o||"",province:e.school_province,school_id:e.school_id,school_type:e.school_type,time:e.start||"",visible:e.privacy};for(var f in a)a[f]=g(a[f]);var l=i.core.json.jsonToQuery(m(a));a.datastr=decodeURIComponent(l),a.privacy=n.secrecy_title[0].innerHTML;var c=i.core.util.easyTemplate(N,a).toString(),h=i.builder(c).box,p;for(var d=0;d<h.childNodes.length;d++)if(h.childNodes[d].nodeType==1){p=h.childNodes[d];break}var v=i.builder(p).list.commend;if(A.parentNode){var b=n["edulist_"+e.school_type]&&n["edulist_"+e.school_type][0];if(!b){var w=i.builder(T["TEMPL_OUT_"+e.school_type+"_EDIT"]).box;for(var d=parseInt(e.school_type)-1;d>=0;d--){if(n["edu_"+d]&&n["edu_"+d].length>0){i.core.dom.insertAfter(w,n["edu_"+d][0]);break}if(d==0){i.core.dom.insertAfter(w,A);break}}n["edu_"+e.school_type]=[b=i.sizzle("[node-type=edu_"+e.school_type+"]")[0]],n["edulist_"+e.school_type]=[b=i.sizzle("[node-type=edulist_"+e.school_type+"]")[0]]}h&&i.core.dom.insertElement(b,h,"afterbegin"),n.start[0].options[0].selected=!0,n.edulist_item||(n.edulist_item=[]),n.edulist_item.push(p),i.removeNode(A),_=!1,M.style.display="";for(var d=0,E=z.length;d<E;d++)z[d].hide();var S=y(v[0],s("#L{推荐同学}"),"eduCommend");i.custEvent.add(S,"open",function(){for(var e=0,t=z.length;e<t;e++)z[e].hide()}),z.push(S),t&&t.successCallback&&t.successCallback()}for(var d=0;d<n.edulist_item.length;d++)n["edulist_item"][d]==H&&n.edulist_item.splice(d,d+1);i.removeNode(H),H=undefined,B=!0,P=undefined,W.removeEmpty()},onError:function(e){e.data&&W.showTips(e.data);var n=E({showCallback:function(){setTimeout(function(){n&&n.anihide()},2e3)},hideCallback:function(){n&&n.destroy(),n=undefined},msg:e.msg||s("#L{保存失败}"),type:"del"});n.setLayerXY(t.el),n.aniShow(),B=!0}},e)},removeEmpty:function(){var e,t;for(var r=1;r<6;r++)e=n["edulist_"+r]&&n["edulist_"+r][0],e&&d(e).length==0&&(t=n["edu_"+r]&&n["edu_"+r][0],t&&(t&&i.removeNode(t),n["edulist_"+r][0]&&n["edulist_"+r].pop(),n["edu_"+r][0]&&n["edu_"+r].pop()))},fetchDepartment:function(e,t){b.request("departmentlist",{onSuccess:function(e){var n=e.data;q.options.length=0,q.options[q.options.length]=new Option(s("#L{请选择院系}"),"0");for(var r=0,i=n.length;r<i;r++)q.options[q.options.length]=new Option(n[r].department,n[r].department);q.value=t||"0"},onError:function(){W.clearDepartOptions()},onFail:function(){W.clearDepartOptions()}},e)}},X={select:function(e,t){k.setAttribute("value",t.data.index);var n=i.sizzle("[node-type=secrecy_title]",k)[0];n&&(n.innerHTML=t.data.name),setTimeout(function(){C.hide()},100)},show:function(e,t){D||(D=o({act:k,extra:[C.getDom("outer")],delay:200,onmouseover:C.show,onmouseout:C.hide}))},hide:function(e,t){D&&(D.destroy(),D=null)}},V={formCheck:function(e,t){W.showTips(t)},schoolSelect:function(e,t){n.school[0].value=t.schoolName,n.start[0].value=t.time,n.school_type[0].value=t.schooltype,J.change(),U.name=t.schoolName,U.school_id=t.schoolId,U.school_province=t.province,U.school_type=t.schooltype,U.department_id=t.departmentId,U.department_name=t.departmentName,t["schooltype"]==1&&W.fetchDepartment({id:t.schoolId},t.departmentName),t["schoolId"]=="-1"?W.showTips({school:{msg:s("#L{该学校不存在}"),state:!1,type:"err"}}):W.showTips({school:{msg:"",state:!0,type:"ok"}})},close:function(){if(_){var e=i.queryToJson(n.school[0].getAttribute("action-data")),t=i.core.dom.dir(n.secrecy_title[0],{dir:"parent",expr:"[action-type=secrecy]"});if(n["school"][0].value!=e["text"]&&n["school"][0].value!=""||t[0]&&t[0].getAttribute("value")!="2"){O.set.edit();return}n.edulist_item&&n.edulist_item.length?(M.style.display="",i.removeNode(A),_=!1):W.editReset({type:"1",school:"","class":"",secrecy:"2",start:""})}else if(!n.edulist_item||!n.edulist_item.length)M.style.display="none",_=!0,A.style.display="",W.editReset({type:"1",school:"","class":"",secrecy:"2",start:""});O.set.revert()},reset:function(){A.parentNode&&(H&&(H.style.display=""),!n.edulist_item||!n.edulist_item.length?(M.style.display="none",_=!0,A.style.display="",W.editReset({type:"1",school:"","class":"",secrecy:"2",start:""})):(M.style.display="",i.removeNode(A),_=!1)),H=undefined,P=undefined}},J={showSchoolSelector:function(){try{n.school[0].blur()}catch(t){}F||(F=h({searchIO:b,searchKey:"schoollist",suggestIO:b,suggestKey:"schoollist",isSimple:!1,city:!0}),i.custEvent.add(F,"enter",V.schoolSelect));var r=i.core.dom.position(e);F.setPosition({t:r.t,l:r.l});var s=arguments.callee;s.done||(n.start[0].options[0].value="-1",s.done=1)},change:function(){var e=n.school_type[0].value,t=n.schoolLabel[0];e=="1"?(t&&(t.innerHTML=s("#L{院系}")),W.replaceClassInput("select")):(t&&(t.innerHTML=s("#L{班级}")),W.replaceClassInput("input"))}},K={secrecy:function(e){i.preventDefault(),k=e.el,i.hasClassName(k,"W_arrow_turn")||i.addClassName(k,"W_arrow_turn");if(!C){C=c();var t=["select","show","hide","addClass","removeClass"];i.custEvent.define(C,t);for(var n=0,r=t.length;n<r;n++){var s=t[n];i.custEvent.add(C,s,X[s])}}i.custEvent.add(C,"addClass",function(){i.hasClassName(k,"W_arrow_turn")||i.addClassName(k,"W_arrow_turn")}),i.custEvent.add(C,"removeClass",function(){i.hasClassName(k,"W_arrow_turn")&&i.removeClassName(k,"W_arrow_turn")}),i.core.util.browser.IE6||i.core.util.browser.IE7?C.setLayout(e.el,{offsetX:0,offsetY:0}):C.rectsPosition({evt:i.fixEvent(),node:k,offsetX:.5,offsetY:0}),C.show()},add:function(e){if(_)return;i.core.dom.insertElement(edulistOut,A,"afterbegin"),_=!0,A.style.display="",M.style.display="none",W.editReset({type:"1",school:"","class":"",secrecy:"2",start:""}),W.showTips({school:{state:!1,type:"empty"}}),W.showTips({"class":{state:!1,type:"empty"}}),i.preventDefault()},edit:function(e){H&&(H.style.display="");var t=e.data;P=t.rowid;var n=i.core.dom.dir(e.el,{expr:"[node-type=edulist_item]"});H=n&&n[0],i.core.dom.insertElement(edulistOut,A,"afterbegin"),_=!0,M.style.display="none",A.style.display="",W.editReset({school:decodeURIComponent(t.school_name),"class":t.department,start:t.time||0,type:t.school_type,secrecy:t.visible}),W.showTips({school:{msg:"",state:!0,type:"ok"}}),t.department?W.showTips({"class":{msg:"",state:!0,type:"ok"}}):W.showTips({"class":{state:!1,type:"empty"}}),U.name=t.school_name,U.id=t.rowid,U.school_id=t.school_id,U.school_province=t.province,U.school_type=t.school_type,t["school_type"]==1&&setTimeout(function(){W.fetchDepartment({id:t.school_id},t.department)},20)},del:function(e){var t=i.core.dom.dir(e.el,{expr:"[node-type=edulist_item]"});t=t&&t[0];var r=!1;_&&H==t&&(r=!0),w(s("#L{确认是否删除此学校信息？}"),{OK:function(){var t=e.data;b.getTrans("eduDel",{onSuccess:function(t){r&&(i.removeNode(A),M.style.display="",_=!1,H=undefined,P=undefined);var s=t.data.desc||"";O.render.concise(s);var o=i.core.dom.dir(e.el,{expr:"[node-type=edulist_item]"});o=o&&o[0];for(var u=0;u<n.edulist_item.length;u++)n["edulist_item"][u]==o&&n.edulist_item.splice(u,u+1);i.removeNode(o),W.removeEmpty(),B=!0,P=undefined,i.core.dom.firstChild(edulistOut)||K.add()},onError:function(t){var n=E({showCallback:function(){setTimeout(function(){n&&n.anihide()},600)},hideCallback:function(){n&&n.destroy(),n=undefined},msg:t&&t.data.msg,type:"error"});n.setLayerXY(e.el),n.aniShow(),B=!0}}).request({id:t.rowid})}}),i.preventDefault()},save:function(e){if(!B)return;var t=i.htmlToJson(A);t=a.getData();if(STK.core.util.browser.IE){var r=i.sizzle('[action-type="secrecy"]',A)[0];t.privacy=r&&r.getAttribute("value")||0}t.start==s("#L{请选择}")&&delete t.start,t.school_province=U.school_province,t.school_id=U.school_id,t.school_type=U.school_type;if(t.school_id=="-1")return;var o=a.check();if(o){var u=n.school[0],f=i.queryToJson(u.getAttribute("action-data")||"").text;t.name=i.trim(t.name),t.name&&t["name"]!=f?W.save(t,e):W.showTips({school:{msg:s("#L{请输入学校名称}"),state:!1,type:"err"}})}else W.showTips(a.states());i.preventDefault()},cancel:function(){A.parentNode&&(H&&(H.style.display=""),A.style.display="none",M.style.display="",_=!1),P=undefined,H=undefined,i.preventDefault()}},Q={loader:function(){O=S(e,{IO:b,IOKey:"eduFrame"}),O.is.cached()&&Q.init(),i.custEvent.add(O,"renderSuccess",Q.init)},init:function(){Q.parseDOM(),Q.initPlugin(),Q.buildCheck(),Q.bind(),W.renderCommend(),J.change(),W.clearDepartOptions()},parseDOM:function(){var t,r=i.C("span");n=i.core.dom.builder(e).list,A=n&&n.editor&&n.editor[0],M=i.sizzle("[action-type=add]",e)[0],edulistOut=n&&n.edulist_out&&n.edulist_out[0],A.style.display==""&&(_=!0),I=n&&n["class"]&&n["class"][0],q=i.C("select"),R=i.C("div"),t=i.C("span"),R.className="input_sel",t.className="rsp",q.setAttribute("name",I.getAttribute("name")),q.setAttribute("node-type","department"),t.appendChild(q),r.innerHTML="&nbsp;",t.appendChild(r),R.appendChild(t)},initPlugin:function(){},buildCheck:function(){a=u(e),ctl=a.domList[p[0]]&&a.domList[p[0]][0];var t=i.queryToJson(ctl.getAttribute("action-data")||"");t.hook=a,t.proxy=b,t.iokey="checkform",a.add(p[0],x.classname(ctl,t)),r=f(e)},bind:function(){i.addEvent(n.school[0],"focus",J.showSchoolSelector),i.addEvent(n.school_type[0],"change",J.change),i.custEvent.define(a,["check"]),i.custEvent.add(a,"check",V.formCheck),i.custEvent.add(O,"close",V.close),i.custEvent.add(O,"afterDiscard",V.reset),v=O.dEvt(),v.add("edit","click",K.switchEdit),v.add("secrecy","click",K.secrecy),v.add("add","click",K.add),v.add("save","click",K.save),v.add("cancel","click",K.cancel),v.add("edu_edit","click",K.edit),v.add("edu_delete","click",K.del),v.add("quickedit","click",K.quickedit)}},G=function(){C&&C.destroy&&C.destroy(),F&&F.destroy&&F.destroy(),i.removeEvent(n.school[0],"focus",J.showSchoolSelector),i.custEvent.remove(a,"check",V.formCheck),i.custEvent.remove(F,"enter",V.schoolSelect),i.custEvent.undefine(a,["check"]),i.removeEvent(n.school_type[0],"change",J.change),v.remove("edit","click",K.switchEdit),v.remove("secrecy","click",K.secrecy),v.remove("add","click",K.add),v.remove("save","click",K.save),v.remove("cancel","click",K.cancel),v.remove("edu_edit","click",K.edit),v.remove("edu_delete","click",K.del),v.remove("quickedit","click",K.quickedit)};return t.destroy=G,Q.loader(),t}},am:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{可以填写班级名称，70字符以内}",E03:"#L{最多可以输入70字符以內的班级名称}",E04:"#L{请输入正确的班级名称}"};e.exports=function(e,t){t=t||{};var n=function(){var e=a.value().replace(/^\s+|\s+$/g,""),t=!1;if(!a.pars.must&&a.rule.isEmpty(e)){a.msg.state=!0,a.msg.type="empty",a.msg.code="E01";return}!t&&a.rule.isEmpty(e)&&(t=!0,a.msg.type="warn",a.msg.code="E02"),!t&&!a.rule.lenLimit(e,0,70)&&(t=!0,a.msg.type="err",a.msg.code="E03"),!t&&!a.rule.isName(e)&&(t=!0,a.msg.type="err",a.msg.code="E04"),t?a.msg.state=!1:(a.msg.state=!0,a.msg.type="ok",a.msg.code="E01")},r={focus:function(){a.cache_value=a.value(),a.msg.state=!1,a.msg.action="focus",a.msg.type="tip",a.msg.code="E02",a.fire()},blur:function(){a.msg.action="blur",n(),a.fire()}},a=o(e,t,{evtAct:r,check:n}),f=i.core.obj.sup(a,["initPars"]);return a.initPars=function(){f.initPars(),a.errText=s(u),a.type="class"},a.init(),a}},aM:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("an"),u=n("aN"),a=n("aO"),f=n("ab"),l=n("p");e.exports=function(e){e=i.parseParam({value:"11",searchIO:"",searchKey:"",suggestIO:"",suggestKey:"",isSimple:!1,listTemplete:"",departmentIO:"",departmentKey:"",listDepartment:"",areaKey:"",areaIO:"",defaultDepart:undefined},e);var t=e.departmentIO!="";if(!e.searchIO||!e.searchKey)throw"no search trans!";var n={},r,c,h,p,d,v=typeof document.body.style.maxHeight=="undefined",m=function(){var e=[],t=(new Date).getFullYear(),n=1900;for(var r=n;r<=t;r++)e.push('<option value="#year">#year</option>'.replace(/#year/g,r));return e.push('<option selected="selected" value="-1">'+s("#L{请选择}")+"</option>"),e.reverse(),e.join("")},g=s('<div class="W_layer" node-type="outer" style="display:none;position:absolute;z-index:10001;"><div class="bg"><table border="0" cellspacing="0" cellpadding="0"><tr><td><div class="content" node-type="layoutContent"><div class="title" node-type="title"><span node-type="title_content">#L{添加学校}</span></div><a href="javascript:void(0);" class="W_close" title="#L{关闭}" node-type="close"></a><div node-type="inner" class="layer_search_school clearfix '+(e.isSimple?' layer_search_school_S">':'  ">')+'<div class="filter" node-type="schoolproperty">'+'<div class="info_list left">'+'<div class="tit">'+"<i>*</i>#L{学校类型}："+"</div>"+'<div class="inp">'+'<select node-type="schooltype" tabindex="100">'+'<option value="1">#L{大学}</option><option  value="2">#L{高中}</option>'+'<option  value="3">#L{中专技校}</option>'+'<option  value="4">#L{初中}</option><option value="5">#L{小学}</option>'+"</select></div></div>"+'<div class="info_list left">'+'<div class="tit">#L{学校所在地}：</div>'+'<div class="inp local" node-type="citySelect">'+'<select node-type="province" tabindex="101"></select><select node-type="city" tabindex="102"></select><select node-type="area" style="max-width:150px;_width:150px;"></select>'+"</div></div>"+'<div class="info_list">'+'<div class="tit"><i>*</i>#L{学校名称}：</div>'+'<div class="inp"><input type="text"  tabindex="104" class="W_input" value="" node-type="schoolName">'+"</div>"+'<div class="tip"><p class="warn"><a node-type="other" href="javascript:void(0)" tabindex="105"><span class="icon_warnS"></span>#L{找不到我的学校}</a></p></div> '+"</div>"+'<div class="info_list">'+'<div class="tit"><i>*</i>#L{入学年份}：</div>'+'<div class="inp">'+'<select node-type="time" tabindex="103">'+m()+"</select></div></div>"+'<div class="info_list" style="display:none;" node-type="depart">'+'<div class="tit" ><i></i>#L{院系名称}：</div>'+'<div class="inp"><span  style="outline:none;" hideFocus="true" class="dept active" node-type="department" tabindex="106" defaultmsg="'+s("#L{请从右侧选择你的院系}")+'" nodatamsg="'+s("#L{没有该校的院系信息}")+'"></span></div>'+"</div>"+'<div class="info_list">'+'<div class="inp"><a href="javascript:void(0);" style="outline:none;" hideFocus="true" node-type="enter" class="W_btn_g" tabindex="107"><span>#L{提交}</span></a></div>'+"</div></div>"+'<div class="school_list" >'+'<span class="scl_arrow" node-type="arrow">◆<em>◆</em></span>'+'<div class="alphabet" node-type="filter">'+'<a  title="A" href="javascript:void(0)" action-type="filter" action-data="keyword=A">A</a><a  title="B" href="javascript:void(0)" action-type="filter" action-data="keyword=B">B</a>'+'<a  title="C" href="javascript:void(0)" action-type="filter" action-data="keyword=C">C</a><a  title="D" href="javascript:void(0)" action-type="filter" action-data="keyword=D">D</a>'+'<a  title="E" href="javascript:void(0)" action-type="filter" action-data="keyword=E">E</a><a  title="F" href="javascript:void(0)" action-type="filter" action-data="keyword=F">F</a>'+'<a  title="G" href="javascript:void(0)" action-type="filter" action-data="keyword=G">G</a><a  title="H" href="javascript:void(0)" action-type="filter" action-data="keyword=H">H</a>'+'<a  title="I" href="javascript:void(0)" action-type="filter" action-data="keyword=I">I</a><a  title="J" href="javascript:void(0)" action-type="filter" action-data="keyword=J">J</a>'+'<a  title="K" href="javascript:void(0)" action-type="filter" action-data="keyword=K">K</a><a  title="L" href="javascript:void(0)" action-type="filter" action-data="keyword=L">L</a>'+'<a  title="M" href="javascript:void(0)" action-type="filter" action-data="keyword=M">M</a><a  title="N" href="javascript:void(0)" action-type="filter" action-data="keyword=N">N</a>'+'<a  title="O" href="javascript:void(0)" action-type="filter" action-data="keyword=O">O</a><a  title="P" href="javascript:void(0)" action-type="filter" action-data="keyword=P">P</a>'+'<a  title="Q" href="javascript:void(0)" action-type="filter"  action-data="keyword=Q">Q</a><a  title="R" href="javascript:void(0)" action-type="filter" action-data="keyword=R">R</a>'+'<a  title="S" href="javascript:void(0)" action-type="filter" action-data="keyword=S">S</a><a  title="T" href="javascript:void(0)" action-type="filter" action-data="keyword=T">T</a>'+'<a  title="U" href="javascript:void(0)" action-type="filter" action-data="keyword=U">U</a><a  title="V" href="javascript:void(0)" action-type="filter" action-data="keyword=V">V</a>'+'<a  title="W" href="javascript:void(0)" action-type="filter" action-data="keyword=W">W</a><a  title="X" href="javascript:void(0)" action-type="filter" action-data="keyword=X">X</a>'+'<a  title="Y" href="javascript:void(0)" action-type="filter" action-data="keyword=Y">Y</a><a  title="Z" href="javascript:void(0)" action-type="filter" action-data="keyword=Z">Z</a></a></div>'+'<div node-type="schoolContain"><ul></ul></div>'+"</td></tr>"+"</table>"+"</div>"+"</div>"),y={dialogHide:function(){f.show()},dialogShow:function(){if(v){var e=i.sizzle("select",d.getInner());f.hide({except:e})}t&&T(),N()},dispDeptData:function(e,t){var n=h.getIsDepartment();if(!n){var i=r.getParam(),s={school_id:i.schoolId,keyword:""};y.deptPos(),h.requestDepartment(s,"nochange")}},departMsgChange:function(e,t){r.setDepartMsg(t)},select:function(e,n){r.setSchoolJson(n);if(t){var i=r.getParam();i.schooltype=="1"&&i.province!="400"&&(c.reset(),r.focusDepartment(n))}},selectDepart:function(e,t){r.setDepartmentJson(t)},cityChange:function(e,t){c.reset();var n=y.getParam(t);y.schoolPos(),h.request(n)},schoolPos:function(){var e=i.core.dom.position(p.schoolName[0]),t=i.core.dom.position(p.filter[0]),n=i.core.dom.getSize(p.schoolName[0]);i.setStyle(p.arrow[0],"top",e.t-t.t+n.height/2-4+"px")},deptPos:function(){var e=i.core.dom.position(p.depart[0]),t=i.core.dom.position(p.filter[0]),n=i.core.dom.getSize(p.depart[0]);i.setStyle(p.arrow[0],"top",e.t-t.t+n.height/2-10+"px")},school:function(e,t){c.reset(),y.schoolPos();var n=y.getParam(t);h.request(n)},department:function(e,t){y.deptPos(),h.requestDepartment(t)},filterChange:function(e,n){var i=r.getParam(),s,o=t&&h.getIsDepartment();o?s={school_id:i.schoolId}:(s=y.getParam(i),delete s.schoolId,delete s.schoolName),s.keyword=n.keyword.toLowerCase();if(o){var u=i.departmentId!="-1"?"nochange":!1;y.deptPos(),h.requestDepartment(s,u)}else y.schoolPos(),h.request(s)},enter:function(e,t){i.custEvent.fire(n,"enter",t),d.hide()},getParam:function(e){var t={};return t.province=e.province,t.city=e.city,e.schoolId&&(t.schoolId=e.schoolId),e.city&&(t.city=e.city),e.area&&(t.area=e.area),e.schooltype&&(t.type=e.schooltype),t}},b=function(){w(),E()},w=function(){d=l({isHold:!0,template:g}),p=i.builder(d.getOuter()).list;var t=p.schoolproperty[0],s=p.filter[0],f=p.schoolContain[0];r=u(t,e),c=o(s),h=a(f,e);var v=y.getParam(r.getParam()||{});h.request(v),i.custEvent.define(n,["enter"])},E=function(){i.custEvent.add(h,"select",y.select),i.custEvent.add(r,"cityChange",y.cityChange),i.custEvent.add(r,"school",y.school),i.custEvent.add(r,"department",y.department),i.custEvent.add(c,"filterChange",y.filterChange),i.custEvent.add(r,"enter",y.enter),t&&(i.custEvent.add(h,"selectDepart",y.selectDepart),i.custEvent.add(h,"departMsgChange",y.departMsgChange),i.custEvent.add(r,"dispDeptData",y.dispDeptData)),i.custEvent.add(d,"show",y.dialogShow),i.custEvent.add(d,"hide",y.dialogHide)},S=function(t){r.reset(e),c.reset();var n=y.getParam(r.getParam()||{});y.schoolPos(),h.request(n)},x=function(){i.custEvent.remove(d,"show",y.dialogShow),i.custEvent.remove(d,"hide",y.dialogHide),i.custEvent.remove(r,"school",y.school),i.custEvent.remove(r,"department",y.department),i.custEvent.remove(h,"select",y.select),i.custEvent.remove(r,"cityChange",y.cityChange),i.custEvent.remove(c,"filterChange",y.filterChange),i.custEvent.remove(r,"enter",y.enter),t&&(i.custEvent.remove(h,"selectDepart",y.selectDepart),i.custEvent.remove(h,"departMsgChange",y.departMsgChange),i.custEvent.remove(r,"dispDeptData",y.dispDeptData)),h&&h.destroy&&h.destroy(),r&&r.destroy&&r.destroy(),i.custEvent.undefine(n,["enter"]),c&&c.destroy&&c.destroy(),h=c=p=null},T=function(){var e=r.getParam();e.schoolId=="-1"&&r.getSchoolInfo()},N=function(){var e=h.getIsDepartment();e?y.deptPos():y.schoolPos()},C=function(){d.show(),d.setMiddle()},k=function(){d.hide()},L=function(e){d.show(),d.setPosition(e)};return b(),n.destroy=x,n.reset=S,n.hide=k,n.show=C,n.setPosition=L,n.dialog=d,n}},an:function(e,t,n,r){var i=n("b");e.exports=function(e,t){var n={},r,s,o={filter:function(e){var t=e.data;s&&i.removeClassName(s,"W_letters_curr"),i.addClassName(e.el,"W_letters_curr"),s=e.el,i.custEvent.fire(n,"filterChange",t)}},u=function(){a(),l()},a=function(){if(!i.isNode(e))throw"node 没有定义"},f=function(){s&&i.removeClassName(s,"W_letters_curr"),s=undefined},l=function(){r=i.core.evt.delegatedEvent(e),r.add("filter","click",o.filter),i.custEvent.define(n,["filterChange"])},c=function(){i.custEvent.undefine(n),r&&r.destroy(),s=null,r=null};return u(),n.destroy=c,n.reset=f,n}},aN:function(e,t,n,r){var i=n("b"),s=n("z"),o=n("c"),u=n("ao"),a=n("O"),f=n("ad"),l=n("I"),c=n("ab"),h=n("aD");e.exports=function(e,t){function Q(){E.options[0].selected=!0}var n={},r,p;t=i.parseParam({text:o("请选择"),value:"11",suggestIO:"",suggestKey:"",isSimple:!1,areaKey:"",areaIO:"",departmentIO:"",defaultDepart:undefined},t);var d=t.departmentIO!="",v,m=t.suggestIO,g=t.suggestKey,y=m&&g,b,w,E,S,x,T,N,C={},k={},L,A,O,M,_,D,P,H=typeof document.body.style.maxHeight=="undefined",B=function(){if(!i.isNode(e))throw"node 没有定义"},j=function(e){var t={};return e=="1"?(t.city=!1,t.area=!1):e=="5"?(t.city=!0,t.area=!1):(t.city=!0,t.area=!0),t},F={schoolEnter:function(){if(d)return;var e=N.isActive();if(e)return;F.submit()},dispDeptData:function(e){i.custEvent.fire(n,"dispDeptData",{});var t=x.innerHTML,r=x.getAttribute("nodatamsg");t===r&&i.addClassName(x,"active")},changeDepartment:function(e){e=i.fixEvent();var t=e.keyCode||e.which;if(t==9||e.shiftKey)return;i.preventDefault(e),q.noSchoolBubble("department"),q.noSchoolBubbleShow("department"),clearTimeout(v),v=setTimeout(I,1e3)},department:function(e){var t=x,n=t.innerHTML,r=t.getAttribute("defaultmsg"),i=n===r;if(!i)return;clearTimeout(P);var s=[];for(var o=0;o<6;o++)o%2==1?s.push("red"):s.push("#FFB941");var u=function(){if(!s.length)return;var e=s.pop();t.style.borderColor=e,P=setTimeout(u,150)};u()},cityChange:function(e,t){R();var r=w.value;t.schooltype=r,t.type=r,N&&N.setData(t),i.custEvent.fire(n,"cityChange",t)},schoolFocus:function(){H&&i.addClassName(S,"W_input_focus"),F.getSchoolInfo()},school:function(e){F.getSchoolInfo()},getSchoolInfo:function(){d&&clearTimeout(P);var e=p.getSelectOpts(),t=w.value;e.schooltype=t,i.custEvent.fire(n,"school",e),_&&_.hide(),d&&(i.removeClassName(x,"active"),i.setStyle(x,"borderColor",""))},schoolblur:function(){H&&i.removeClassName(S,"W_input_focus");if(i.trim(S.value)==""||!C.schoolId)q.noSchoolBubble("school"),q.noSchoolBubbleShow("school")},schoolTypeChange:function(){R(),_&&_.hide();var e=w.value,t=p.getSelectOpts();t.type=e,N&&N.setData(t);var r=j(e);r.proDef=t.province,r.city&&(r.cityDef=t.city),p.reset(r),t=p.getSelectOpts(),t.schooltype=e,i.custEvent.fire(n,"school",t)},other:function(){Y({school_id:"-1",value:o("#L{其他}")}),d&&(et(t.defaultDepart||{name:o("#L{其他}"),value:"-1"}),i.setStyle(T,"display","none"));var e=rt();i.custEvent.fire(n,"enter",e)},enter:function(e){e=i.getEvent(e);var t=e.type;F.submit(t)},submit:function(e){e=e||"click",isClick=e=="click",N&&N.hide();var t=rt();if(!t.schoolId){q.noSchoolBubble("school"),q.noSchoolBubbleShow("school");return}var r=t.time;t.schoolId=="-1"&&(r=t.time=E.value="-1");if(r=="-1"&&t.schoolId!="-1"){q.noSchoolBubble("time"),q.noSchoolBubbleShow("time");return}i.custEvent.fire(n,"enter",t)},schoolYearChange:function(){var e=E.value;e!="0"&&_&&_.hide()}},I=function(){d&&clearTimeout(v),_&&_.hide()},q={noSchoolBubble:function(e){var t,n;switch(e){case"school":t=S,n="#L{请选择一所学校}";break;case"department":t=x,n="#L{请从右侧选择你的院系}";break;case"time":t=E,n="#L{入学年份为必填，请选择}"}if(!_){var r=o('<div  class="layer_form_tips" node-type="outer"><div class="bg"><div class="content" node-type="layoutContent"><a class="W_ico12 icon_close" href="javascript:void(0);"  node-type="close" action-type="close"></a><div  node-type="inner"><p class="tips"><span class="icon_errorS" node-type="tipmsg"></span>'+n+"</p></div>"+"</div>"+'<div class="arrow arrow_tips" node-type="arrow" style="'+(e=="time"?"left:33px":"")+'"></div>'+"</div></div>");_=a(r);var s=i.core.dom.getSize(t);f(_.getOuter(),t,{offsetY:-(s.height+37)}),D=i.delegatedEvent(_.getOuter()),D.add("close","click",I)}else{var u=l(i.builder(_.getOuter()).list);u.tipmsg.nextSibling.nodeValue=o(n);var s=i.core.dom.getSize(t);f(_.getOuter(),t,{offsetY:-(s.height+37)}),e=="time"?u.arrow.style.left="33px":u.arrow.style.left=""}},noSchoolBubbleShow:function(e){var t;switch(e){case"school":t=S;break;case"department":t=x;break;case"time":t=E}e==="school"&&i.addClassName(S,"W_input_error");var n=i.core.dom.getSize(t);f(_.getOuter(),t,{offsetY:-(n.height+37)}),_&&_.show(),c.buildIframe(_.getOuter(),{redo:!0})}},R=function(){S.value="",C={},k={}},U=function(){r=i.builder(e).list,w=r.schooltype[0],E=r.time[0],L=r.province[0],A=r.city[0],S=r.schoolName[0],O=r.enter[0],M=r.other[0],d&&(x=r.department[0],T=r.depart[0])},z=function(e){i.setStyle(T,"display",""),W(e)},W=function(e){i.custEvent.fire(n,"department",e)},X=function(){p=s(r.citySelect[0],{proDef:t.value,areaKey:t.areaKey,areaIO:t.areaIO}),i.custEvent.add(p,"cityChange",F.cityChange),y&&(N=h(S,{trans:m,tranName:g,path:"item",template:function(e){var t=[];t.push('<div class="layer_menu_list"><ul node-type="suggestWrap">');var n=e.length,r;for(var i=0;i<n;i++)r=e[i],t.push('<li action-type="item" node-type="item"'),i==0&&t.push('class="cur"'),t.push('action-data="school_id='+r.id+"&value="+r.school_name+"&department="),r.department&&t.push(r.department),t.push('" value="'+r.school_name+'"><a href="javascript:void(0)">'+r.school_name+"</a></li>");return t.push("</ul></div>"),t.join("")},noSuggest:'<div class="W_tips tips_warn clearfix" style="width:133px;"><p class="icon"><span class="icon_warnS"></span></p><p class="txt">'+o("#L{没有符合条件的学校}")+"</p>"+"</div>",data:{province:L.value==t.text?"":L.value,type:w.value}}),i.custEvent.add(N,"select",K.select)),i.custEvent.define(n,["department","school","cityChange","enter","dispDeptData"])},V=function(){i.addEvent(w,"change",F.schoolTypeChange),i.addEvent(S,"focus",F.schoolFocus),i.addEvent(S,"blur",F.schoolblur),i.addEvent(E,"change",F.schoolYearChange),d&&(i.addEvent(x,"click",F.department),i.addEvent(x,"keydown",F.changeDepartment),i.addEvent(x,"focus",F.dispDeptData)),i.addEvent(M,"click",F.other),i.addEvent(O,"click",F.enter),i.hotKey.add(S,"enter",F.schoolEnter,{type:"keydown"})},J=function(){S.value!=C.name&&(window.clearInterval(b),C={},k={},d&&(Z(null,"hide"),F.school()))},K={select:function(e,t){Y(t),d&&z(t)}},G,Y=function(e){G&&G!=e.school_id&&G!="-1"&&Q(),R(),C.name=decodeURIComponent(e.value),C.schoolId=e.school_id,G=e.school_id,S.value=decodeURIComponent(e.value),i.removeClassName(S,"W_input_error"),_&&_.hide(),b&&window.clearInterval(b),b=window.setInterval(function(){J()},200)},Z=function(e,t){if(t)i.setStyle(T,"display","none"),x.innerHTML="";else{e=e||{};if(e.noChange)return;e.data=e.data||{},e.data.count=e.data.count||0;var n=e.data.count;try{e.data[0]&&e.data[0].department&&(n=3)}catch(r){}i.addClassName(x,"active"),n==0?x.innerHTML=x.getAttribute("nodatamsg"):x.innerHTML=x.getAttribute("defaultmsg")}},et=function(e){k.departmentId=e.value,k.name=e.name,e.value!="-1"&&e.name!=(t.defaultDepart||{}).name&&(i.removeClassName(x,"active"),i.setStyle(x,"borderColor",""),x.innerHTML=e.name)},tt=function(){i.removeEvent(w,"change",F.schoolTypeChange),i.removeEvent(S,"focus",F.schoolFocus),i.removeEvent(S,"blur",F.schoolblur),i.removeEvent(E,"change",F.schoolYearChange),d&&(i.removeEvent(x,"click",F.department),i.removeEvent(x,"keydown",F.changeDepartment),i.removeEvent(x,"focus",F.dispDeptData)),i.removeEvent(M,"click",F.other),i.removeEvent(O,"click",F.enter),i.hotKey.remove(S,"enter",F.schoolEnter,{type:"keydown"}),i.custEvent.undefine(n,["department","school","cityChange","enter"]),N&&N.destroy&&N.destroy(),b&&window.clearInterval(b),p.destroy()},nt=function(){B(),U(),X(),V()},rt=function(){var e={};e.schooltype=w.value,e.province=L.value,e.time=E.value,e.schooltype=w.value,C.schoolId&&C.name&&(e.schoolId=C.schoolId,e.schoolName=C.name),(!k.departmentId||!k.name)&&d&&et(t.defaultDepart||{name:o("#L{其他}"),value:"-1"}),d&&(e.departmentId=k.departmentId,e.departmentName=k.name);var n=p.getSelectOpts();return e=u(e,n),e};return nt(),n.destroy=tt,n.focusDepartment=z,n.getParam=rt,n.getSchoolInfo=F.getSchoolInfo,n.setSchoolJson=Y,n.setDepartmentJson=et,n.setDepartMsg=Z,n}},ao:function(e,t,n,r){e.exports=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}},aO:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("s");e.exports=function(e,t){t=i.parseParam({searchIO:"",searchKey:"",listTemplete:"",departmentIO:"",departmentKey:""},t);var n=t.departmentIO!="",r=[],u=[],a=t.searchIO,f=t.departmentIO,l=t.departmentKey,c=t.searchKey,h={},p,d,v=!1,m=function(e){var t=[];t.push("<ul>");var n=e.length,r;for(var i=0;i<n;i++)r=e[i],t.push('<li action-type="select"'),t.push('action-data="school_id='+r.id+"&value="+encodeURIComponent(r.name)+"&department="),t.push(r.department?r.department:""),t.push('"><a  truevalue= "'+r.id+'" title="'+r.name+'" href="javascript:void(0);">'+r.name+"</a></li>");return t.push("</ul>"),t.join("")},g=function(e){var t=[];t.push("<ul>");var n=e.length,r;for(var i=0;i<n;i++)r=e[i],t.push('<li action-type="selectdepart"'),t.push('action-data="name='+r.department+"&value="+r.department_id),t.push('"><a  title="'+r.department+'" href="javascript:void(0);">'+r.department+"</a></li>");return t.push("</ul>"),t.join("")},y=function(n,r,o,a){var f='<div class="noschool"><span class="icon_errorM"></span>'+(o?s("#L{没有符合条件的院系}"):s("#L{抱歉，尚没有当前学校的院系信息，请直接提交}"))+"</div>";if(r&&r.data&&r.data.length>0){var l=t.listDepartment||g;f=l(r.data)}u[n]=r,e.innerHTML=f,r.noChange=a,i.custEvent.fire(h,"departMsgChange",r),v=!0},b=function(n,i,o){var u='<div class="noschool"><span class="icon_errorM"></span>'+s("#L{没找到符合条件的学校}")+"</div>";i!="0"&&(u='<div class="noschool"><span class="icon_errorM"></span>'+s("#L{抱歉，尚没有当前学校的院系信息，请直接提交}")+"</div>");if(o&&o.data&&o.data.item&&o.data.item.length>0){var a=t.listTemplete||m;u=a(o.data.item)}r[n]=o,e.innerHTML=u,v=!1},w={select:function(e){i.custEvent.fire(h,"select",e.data)},selectDepart:function(e){i.custEvent.fire(h,"selectDepart",e.data)},requestDepartment:function(e,t){d&&d.abort();var n=e.school_id+"_"+(e.keyword||"");if(u[n]){y(n,u[n],e.keyword,t);return}var r=s("#L{院系数据获取失败}"),i={id:e.school_id};d=f.getTrans(l,{onSuccess:function(r){y(n,r,e.keyword,t)},onFail:function(e){o(e.msg||r)},onError:function(r){y(n,r,e.keyword,t)}}),d.request(i)},requestData:function(e){d&&d.abort(),e.area=="1000"&&delete e.area;var t=e.province,n=e.city||"c",i=e.area||"a",u=e.keyword||0,f=e.type||"t",l=e.schoolId||"0",h=t+"_"+n+"_"+i+"_"+u+"_"+f+"_"+l;if(r[h]){b(h,l,r[h]);return}var p=s("#L{学校数据获取失败}");d=a.getTrans(c,{onSuccess:function(e){b(h,l,e)},onFail:function(e){o(e.msg||p)},onError:function(e){o(e.msg||p)}}),d.request(e)}},E=function(){S(),T()},S=function(){if(!i.isNode(e))throw"node 没有定义"},x=function(){return v},T=function(){p=i.core.evt.delegatedEvent(e),p.add("select","click",w.select),n&&p.add("selectdepart","click",w.selectDepart),i.custEvent.define(h,["select","selectDepart","departMsgChange"])},N=function(){p&&p.destroy(),p=r=u=null,i.custEvent.undefine(h)};return E(),h.destroy=N,h.getIsDepartment=x,h.request=w.requestData,h.requestDepartment=w.requestDepartment,h}},ap:function(e,t,n,r){var i=n("b"),s=n("aP");s(i.E("pl_personalInfo_address"))},aP:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("X"),u=n("e"),a=n("aH"),f=n("aq"),l=n("aQ"),c=n("ar"),h=n("aR"),p=n("as"),d=n("aS"),v=n("C"),m=n("at"),g=n("S"),y=n("N"),b=n("aE"),w=n("af"),E=n("j"),S=n("L"),x=n("ag"),T=n("M"),N=n("p"),C={};C.realname=a,C.detailAddr=f,C.zipCode=l,C.telNumber=c,C.areaCode=h,C.phoneNumber=p,C.extension=d,e.exports=function(e){var t={},n,r,o,a,f=["realname","detailAddr","zipCode","telNumber","areaCode","phoneNumber","extension"],l,c,h,p,d=!1,b,w,k,L=1,A,O,M={checkPhoneNumber:function(){var e=o.ctls.areaCode.check(),t=o.ctls.phoneNumber.check(),n=o.ctls.extension.check();return e.type=="err"||t.type=="err"||n.type=="err"?e.type=="err"?e:t.type=="err"?t:n:e.type=="empty"^t.type=="empty"?{type:"err",msg:s("#L{座机号码不正确}")}:e.type=="empty"&&n.type!="empty"?{type:"err",msg:s("#L{座机号码不正确}")}:e.type=="empty"?{type:"empty"}:{type:"ok"}},showTips:function(e){var t,r,i;for(i in e){t=e[i];if(i=="realname"||t.msg==s("#L{请输入真实姓名}"))t.type=="err"?t.msg=s("#L{请输入真实的收货人姓名}"):t.type=="tip"&&(t.msg=s("#L{请填写真实姓名}"));if(i=="areaCode"||i=="extension")i="phoneNumber";if(i=="phoneNumber"){var u=o.ctls.telNumber.check();t.type=="tip"?u.type!="err"&&(n.telNumber_tip[0].innerHTML=""):(t=M.checkPhoneNumber(),t.type=="empty"&&u.type=="empty"&&(t={type:"err",msg:s("#L{手机号码与座机号码至少填一项}")}))}else if(i=="telNumber"){var a=M.checkPhoneNumber();t.type=="tip"?a.type!="err"&&(n.phoneNumber_tip[0].innerHTML=""):t.type=="empty"&&a.type=="empty"&&(t={type:"err",msg:s("#L{手机号码与座机号码至少填一项}")})}r=n[i+"_tip"][0],r&&(r.innerHTML=S("newFormTips",{data:t}))}},save:function(e,t){k?(e.id=k,e.page=L):e.page=1,e.isdefault=="on"?e.isdefault=1:e.isdefault=0,e.detailAddr=e.detailAddr.replace(/\\|\"/ig,""),e.detailAddr=encodeURIComponent(e.detailAddr),E.request("addresscommit",{onSuccess:function(e){k||(L=1);var t=e.data.desc||"";A.render.concise(t),k=undefined,w=undefined,i.removeNode(h),p.style.display="",d=!1,M.setContent(e.data.html)},onError:function(e){if(e["code"]=="100012")M.emailActiveDialog();else{e.data&&M.showTips(e.data);var n=g({showCallback:function(){setTimeout(function(){n&&n.anihide()},2e3)},hideCallback:function(){n&&n.destroy(),n=undefined},msg:e.msg||e.data.msg||s("#L{保存失败}"),type:"del"});n.setLayerXY(t.el),n.aniShow()}}},e)},editReset:function(e){n.title[0].innerHTML=e.type,n.realname[0].value=e.realname&&decodeURIComponent(e.realname)||i.queryToJson(n.realname[0].getAttribute("action-data")).text;if(e.location){e.location=e.location.split(",");var t=i.trim(e.location[0]),r=i.trim(e.location[1]),s=i.trim(e.location[2]);c.reset({proDef:t,cityDef:r,areaDef:s})}n.detailAddr[0].value=e.detailAddr||i.queryToJson(n.detailAddr[0].getAttribute("action-data")).text,n.zipCode[0].value=e.zipCode||i.queryToJson(n.zipCode[0].getAttribute("action-data")).text,n.telNumber[0].value=e.telNumber||i.queryToJson(n.telNumber[0].getAttribute("action-data")).text,n.areaCode[0].value=e.areaCode||i.queryToJson(n.areaCode[0].getAttribute("action-data")).text,n.phoneNumber[0].value=e.phoneNumber||i.queryToJson(n.phoneNumber[0].getAttribute("action-data")).text,n.extension[0].value=e.extension||i.queryToJson(n.extension[0].getAttribute("action-data")).text,n.isdefault[0].checked=e.isdefault,M.showTips({realname:{state:!1,type:"empty"}}),M.showTips({cityselector:{state:!1,type:"empty"}}),M.showTips({detailAddr:{state:!1,type:"empty"}}),M.showTips({zipCode:{state:!1,type:"empty"}}),n.telNumber_tip[0].innerHTML="",n.phoneNumber_tip[0].innerHTML=""},removeEmpty:function(){var e,t;e=n.joblist&&n.joblist[0],e&&x(e).length==0&&(t=n.job_1&&n.job_1[0],t&&(i.removeNode(t),n.joblist[0]&&(n.joblist[0]=undefined),n.job_1[0]&&(n.job_1[0]=undefined)))},checkState:function(e){var t=o.check();if(t){var n=!1,r=!1;return e.areaCode&&e.phoneNumber&&(n=!0),e.telNumber&&(r=!0),n||r}return!1},setContent:function(e){e==null&&(e=""),a.innerHTML=e},emailActiveDialog:function(){O||(O=N()),O.setTitle(s("#L{帐号验证}")),O.getInner().innerHTML='<iframe allowtransparency="true" scrolling="no" frameborder="0" height="240" width="380" src="http://weibo.com/a/verify/email"></iframe>',O.show(),O.setMiddle()}},_={formCheck:function(e,t){M.showTips(t)},close:function(){if(d){var e=i.queryToJson(n.realname[0].getAttribute("action-data")),t=i.queryToJson(n.areaCode[0].getAttribute("action-data")),r=i.queryToJson(n.phoneNumber[0].getAttribute("action-data")),o=i.queryToJson(n.extension[0].getAttribute("action-data"));if(n["realname"][0].value!=e["text"]||n["province"][0].value!="11"||n["city"][0].value!="1"||n["detailAddr"][0].value!=""||n["zipCode"][0].value!=""||n["telNumber"][0].value!=""||n["areaCode"][0].value!=t["text"]||n["phoneNumber"][0].value!=r["text"]||n["extension"][0].value!=o["text"]||n["isdefault"][0].checked!=0){A.set.edit();return}x(a).length?(p.style.display="",i.removeNode(h),d=!1):M.editReset({type:s("#L{新增收货地址}"),realname:"",location:"11,1,1",detailAddr:"",zipCode:"",telNumber:"",phoneNumber:"",isdefault:!1})}else x(a).length||(p.style.display="none",d=!0,h.style.display="",M.editReset({type:s("#L{新增收货地址}"),realname:"",location:"11,1,1",detailAddr:"",zipCode:"",telNumber:"",phoneNumber:"",isdefault:!1}));A.set.revert()},reset:function(){h.parentNode&&(w&&(w.style.display=""),x(a).length?(p.style.display="",i.removeNode(h),d=!1):(p.style.display="none",d=!0,h.style.display="",M.editReset({type:s("#L{新增收货地址}"),realname:"",location:"11,1,1",detailAddr:"",zipCode:"",telNumber:"",phoneNumber:"",isdefault:!1}))),w=undefined,k=undefined}},D={add:function(e){if(d)return;w=undefined,k=undefined,M.showTips({realname:{state:!1,type:"empty"}}),M.showTips({cityselector:{state:!1,type:"empty"}}),M.showTips({detailAddr:{state:!1,type:"empty"}}),M.showTips({zipCode:{state:!1,type:"empty"}}),i.core.dom.insertElement(a,h,"beforebegin"),M.editReset({type:s("#L{新增收货地址}"),realname:"",location:"11,1,0",detailAddr:"",zipCode:"",telNumber:"",phoneNumber:"",isdefault:!1}),d=!0,h.style.display="",p.style.display="none",i.preventDefault()},edit:function(e){i.preventDefault();var t=e.data;k=t.rowid;var n=i.core.dom.dir(e.el,{expr:"[node-type=addrlist_item]"});if(n&&w==n[0])return;w=n&&n[0],i.core.dom.insertElement(a,h,"beforebegin");var r=e.el.getAttribute("detailAddr")||"";M.editReset({type:s("#L{修改收货地址}"),realname:t.realname,location:t.location,detailAddr:r,zipCode:t.zipCode,telNumber:t.telNumber,phoneNumber:t.phoneNumber,isdefault:t.isdefault,areaCode:t.areaCode,extension:t.extension}),d=!0,h.style.display="",p.style.display="none"},del:function(e){var t=i.core.dom.dir(e.el,{expr:"[node-type=addrlist_item]"});t=t&&t[0];var n=!1;d&&w==t&&(n=!0),y(s("#L{确认删除该条地址吗？}"),{OK:function(){var t=i.builder(a).list.addrlist_item.length;t==1&&L!=1&&L--;var r=e.data;E.getTrans("addressdel",{onSuccess:function(e){n&&(i.removeNode(h),p.style.display="",d=!1,w=undefined,k=undefined);var t=e.data.desc||"";A.render.concise(t),M.setContent(e.data.html),e.data.html||D.add()},onError:function(t){if(t["code"]=="100012")M.emailActiveDialog();else{var n=g({showCallback:function(){setTimeout(function(){n&&n.anihide()},600)},hideCallback:function(){n&&n.destroy(),n=undefined},msg:t&&t.msg||t.data.msg,type:"error"});n.setLayerXY(e.el),n.aniShow()}}}).request({id:r.rowid,page:L})}}),i.preventDefault()},save:function(e){var t=i.htmlToJson(h);t=o.getData();var n=o.check(),r=o.states();r["areaCode"].type=="empty"^r["phoneNumber"].type=="empty"&&(n=!1),r["areaCode"].type=="empty"&&r["extension"].type!="empty"?n=!1:r["telNumber"].type=="empty"&&r["areaCode"].type=="empty"&&(n=!1),n?M.save(t,e):M.showTips(o.states()),i.preventDefault()},cancel:function(){h.parentNode&&(w&&(w.style.display=""),p.style.display="",h.style.display="none",d=!1),w=undefined,k=undefined,i.preventDefault()},setIndex:function(e){e.data["index"]!=L&&E.getTrans("setIndex",{onSuccess:function(t){L=e.data.index,M.setContent(t.data.html)},onError:function(t){var n=g({showCallback:function(){setTimeout(function(){n&&n.anihide()},600)},hideCallback:function(){n&&n.destroy(),n=undefined},msg:t&&t.msg||t.data.msg,type:"error"});n.setLayerXY(e.el),n.aniShow()}}).request({page:e.data.index}),i.preventDefault()},setDefault:function(e){E.getTrans("setDefault",{onSuccess:function(e){L=1,M.setContent(e.data.html)},onError:function(t){var n=g({showCallback:function(){setTimeout(function(){n&&n.anihide()},600)},hideCallback:function(){n&&n.destroy(),n=undefined},msg:t&&t.msg||t.data.msg,type:"error"});n.setLayerXY(e.el),n.aniShow()}}).request({id:e.data.rowid}),i.preventDefault()},pre:function(e){var t=parseInt(L,10)-1;E.getTrans("setIndex",{onSuccess:function(e){L=t,M.setContent(e.data.html)},onError:function(t){var n=g({showCallback:function(){setTimeout(function(){n&&n.anihide()},600)},hideCallback:function(){n&&n.destroy(),n=undefined},msg:t&&t.msg||t.data.msg,type:"error"});n.setLayerXY(e.el),n.aniShow()}}).request({page:t}),i.preventDefault()},next:function(e){var t=parseInt(L,10)+1;E.getTrans("setIndex",{onSuccess:function(e){L=t,M.setContent(e.data.html)},onError:function(t){var n=g({showCallback:function(){setTimeout(function(){n&&n.anihide()},600)},hideCallback:function(){n&&n.destroy(),n=undefined},msg:t&&t.msg||t.data.msg,type:"error"});n.setLayerXY(e.el),n.aniShow()}}).request({page:t}),i.preventDefault()}},P={loader:function(){A=T(e,{IO:E,IOKey:"receiveFrame"}),A.is.cached()&&P.init(),i.custEvent.add(A,"renderSuccess",P.init)},init:function(){P.parseDOM(),P.initPlugin(),P.buildCheck(),P.bind()},parseDOM:function(){n=i.core.dom.builder(e).list,h=n&&n.editor&&n.editor[0],p=i.sizzle("[action-type=add]",e)[0],a=n&&n.receivelist_out&&n.receivelist_out[0],receivelist=n&&n.receivelist&&n.receivelist[0],h.style.display==""&&(d=!0)},initPlugin:function(){c=m(n.cityselector[0],{city:!0,area:!0,proDef:"11",cityDef:"1",areaDef:"",provinceIO:E,provinceKey:"province",cityIO:E,cityKey:"city",areaIO:E,areaKey:"area"})},buildCheck:function(){o=u(e);for(var t=0,n=f.length,s,a;t<n;t++)s=o.domList[f[t]]&&o.domList[f[t]][0],a=i.queryToJson(s.getAttribute("action-data")||""),a.hook=o,o.add(f[t],C[f[t]](s,a));r=v(e)},bind:function(){i.custEvent.define(o,["check"]),i.custEvent.add(o,"check",_.formCheck),i.custEvent.add(A,"close",_.close),i.custEvent.add(A,"afterDiscard",_.reset),l=A.dEvt(),l.add("add","click",D.add),l.add("save","click",D.save),l.add("cancel","click",D.cancel),l.add("addr_edit","click",D.edit),l.add("addr_delete","click",D.del),l.add("addr_setDefault","click",D.setDefault),l.add("index","click",D.setIndex),l.add("next","click",D.next),l.add("pre","click",D.pre)}},H=function(){c&&c.destroy&&c.destroy(),i.custEvent.remove(o,"check",_.formCheck),i.custEvent.undefine(o,["check"]),l.remove("add","click",D.add),l.remove("save","click",D.save),l.remove("cancel","click",D.cancel),l.remove("addr_edit","click",D.edit),l.remove("addr_delete","click",D.del),l.remove("addr_setDefault","click",D.setDefault),l.remove("index","click",D.setIndex),l.remove("next","click",D.next),l.remove("pre","click",D.pre)};return t.destroy=H,P.loader(),t}},aq:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{请填写详细地址}",E03:"#L{请输入5-40个字的详细地址}"};e.exports=function(e,t){var n;t=t||{};var r=function(){var e=f.value(),t=!1;e=e.replace(/\\|\"/ig,"");if(!f.pars.must&&f.rule.isEmpty(e)){f.msg.state=!0,f.msg.type="empty",f.msg.code="E01";return}!t&&f.rule.isEmpty(e)&&(t=!0,f.msg.type="err",f.msg.code="E02"),!t&&!f.rule.lenLimit(e,10,80)&&(t=!0,f.msg.type="err",f.msg.code="E03"),t?f.msg.state=!1:(f.msg.state=!0,f.msg.type="ok",f.msg.code="E01")},a={focus:function(){f.cache_value=f.value(),f.msg.state=!1,f.msg.action="focus",f.msg.type="tip",f.msg.code="E02",f.fire()},blur:function(){e.value=f.rule.reNullChar(e.value),f.msg.action="blur",r(),f.fire()}},f=o(e,t,{evtAct:a,check:r}),l=i.core.obj.sup(f,["initPars"]);return f.initPars=function(){l.initPars(),f.errText=s(u),f.type="detailAddr"},f.pars.auto&&f.init(),f}},aQ:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{请输入邮政编码}",E03:"#L{请输入正确的邮政编码}"};e.exports=function(e,t){var n;t=t||{};var r=function(){var e=f.value(),t=!1;if(!f.pars.must&&f.rule.isEmpty(e)){f.msg.state=!0,f.msg.type="empty",f.msg.code="E01";return}!t&&f.rule.isEmpty(e)&&(t=!0,f.msg.type="err",f.msg.code="E02"),!t&&!f.rule.lenLimit(e,1,10)&&(t=!0,f.msg.type="err",f.msg.code="E03"),!t&&!f.rule.isNumber(e)&&(t=!0,f.msg.type="err",f.msg.code="E03"),!t&&parseInt(e,10)>2147483647&&(t=!0,f.msg.type="err",f.msg.code="E03"),t?f.msg.state=!1:(f.msg.state=!0,f.msg.type="ok",f.msg.code="E01")},a={focus:function(){f.cache_value=f.value(),f.msg.state=!1,f.msg.action="focus",f.msg.type="tip",f.msg.code="E02",f.fire()},blur:function(){e.value=f.rule.reNullChar(e.value),f.msg.action="blur",r(),f.fire()}},f=o(e,t,{evtAct:a,check:r}),l=i.core.obj.sup(f,["initPars"]);return f.initPars=function(){l.initPars(),f.errText=s(u),f.type="zipCode"},f.pars.auto&&f.init(),f}},ar:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{手机号码与座机号码至少填一项}",E03:"#L{请输入正确的手机号码}"};e.exports=function(e,t){var n;t=t||{};var r=function(){var e=f.value(),t=!1;if(!f.pars.must&&f.rule.isEmpty(e)){f.msg.state=!0,f.msg.type="empty",f.msg.code="E01";return}!t&&f.rule.isEmpty(e)&&(t=!0,f.msg.type="err",f.msg.code="E02"),!t&&!f.rule.lenLimit(e,1,15)&&(t=!0,f.msg.type="err",f.msg.code="E03"),!t&&!f.rule.isNumber(e)&&(t=!0,f.msg.type="err",f.msg.code="E03"),t?f.msg.state=!1:(f.msg.state=!0,f.msg.type="ok",f.msg.code="E01")},a={focus:function(){f.cache_value=f.value(),f.msg.state=!1,f.msg.action="focus",f.msg.type="tip",f.msg.code="E02",f.fire()},blur:function(){e.value=f.rule.reNullChar(e.value),f.msg.action="blur",r(),f.fire()}},f=o(e,t,{evtAct:a,check:r}),l=i.core.obj.sup(f,["initPars"]);return f.initPars=function(){l.initPars(),f.errText=s(t.errText||u),f.type="telNumber"},f.pars.auto&&f.init(),f}},aR:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{手机号码与座机号码至少填一项}",E03:"#L{区号请不要超过4位}",E04:"#L{区号格式不正确}"};e.exports=function(e,t){var n;t=t||{};var r=function(){var e=f.value(),t=!1;if(!f.pars.must&&f.rule.isEmpty(e)){f.msg.state=!0,f.msg.type="empty",f.msg.code="E01";return}!t&&f.rule.isEmpty(e)&&(t=!0,f.msg.type="err",f.msg.code="E02"),!t&&!f.rule.lenLimit(e,0,4)&&(t=!0,f.msg.type="err",f.msg.code="E03"),!t&&!f.rule.isNumber(e)&&(t=!0,f.msg.type="err",f.msg.code="E04"),t?f.msg.state=!1:(f.msg.state=!0,f.msg.type="ok",f.msg.code="E01")},a={focus:function(){f.cache_value=f.value(),f.msg.state=!1,f.msg.action="focus",f.msg.type="tip",f.msg.code="E02",f.fire()},blur:function(){e.value=f.rule.reNullChar(e.value),f.msg.action="blur",r(),f.fire()}},f=o(e,t,{evtAct:a,check:r}),l=i.core.obj.sup(f,["initPars"]);return f.initPars=function(){l.initPars(),f.errText=s(u),f.type="areaCode"},f.pars.auto&&f.init(),f}},as:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{手机号码与座机号码至少填一项}",E03:"#L{座机号码请不要超过8位}",E04:"#L{座机号码格式不正确}"};e.exports=function(e,t){var n;t=t||{};var r=function(){var e=f.value(),t=!1;if(!f.pars.must&&f.rule.isEmpty(e)){f.msg.state=!0,f.msg.type="empty",f.msg.code="E01";return}!t&&f.rule.isEmpty(e)&&(t=!0,f.msg.type="err",f.msg.code="E02"),!t&&!f.rule.lenLimit(e,0,8)&&(t=!0,f.msg.type="err",f.msg.code="E03"),!t&&!f.rule.isNumber(e)&&(t=!0,f.msg.type="err",f.msg.code="E04"),t?f.msg.state=!1:(f.msg.state=!0,f.msg.type="ok",f.msg.code="E01")},a={focus:function(){f.cache_value=f.value(),f.msg.state=!1,f.msg.action="focus",f.msg.type="tip",f.msg.code="E02",f.fire()},blur:function(){e.value=f.rule.reNullChar(e.value),f.msg.action="blur",r(),f.fire()}},f=o(e,t,{evtAct:a,check:r}),l=i.core.obj.sup(f,["initPars"]);return f.initPars=function(){l.initPars(),f.errText=s(u),f.type="phoneNumber"},f.pars.auto&&f.init(),f}},aS:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{手机号码与座机号码至少填一项}",E03:"#L{分机号请不要超过5位}",E04:"#L{分机格式不正确}"};e.exports=function(e,t){var n;t=t||{};var r=function(){var e=f.value(),t=!1;if(!f.pars.must&&f.rule.isEmpty(e)){f.msg.state=!0,f.msg.type="empty",f.msg.code="E01";return}!t&&f.rule.isEmpty(e)&&(t=!0,f.msg.type="err",f.msg.code="E02"),!t&&!f.rule.lenLimit(e,0,5)&&(t=!0,f.msg.type="err",f.msg.code="E03"),!t&&!f.rule.isNumber(e)&&(t=!0,f.msg.type="err",f.msg.code="E04"),t?f.msg.state=!1:(f.msg.state=!0,f.msg.type="ok",f.msg.code="E01")},a={focus:function(){f.cache_value=f.value(),f.msg.state=!1,f.msg.action="focus",f.msg.type="tip",f.msg.code="E02",f.fire()},blur:function(){e.value=f.rule.reNullChar(e.value),f.msg.action="blur",r(),f.fire()}},f=o(e,t,{evtAct:a,check:r}),l=i.core.obj.sup(f,["initPars"]);return f.initPars=function(){l.initPars(),f.errText=s(u),f.type="extension"},f.pars.auto&&f.init(),f}},at:function(e,t,n,r){var i=n("b"),s=n("I"),o=n("c");e.exports=function(e,t){t=t||{};var n={},r,o,u,a,f={};i.custEvent.define(n,["cityChange"]),t=i.core.json.merge({city:!1,area:!1,proDef:"11",cityDef:"1",areaDef:"",provinceIO:null,provinceKey:"",cityIO:null,cityKey:"",areaIO:null,areaKey:""},t);var l,c,h,p={DOM:{}},d={provinceAjax:function(){if(!o)return;var e=f;if(i.objIsEmpty(e))t.provinceIO&&t.provinceKey&&t.provinceIO.request(t.provinceKey,{onSuccess:function(e){var n=e.data;if(i.objIsEmpty(n)){o.style.display="none";return}o.style.display="",o.options.length=0;for(var r in n){var s=new Option(n[r],r);o.options.add(s),f[r]={name:n[r],city:{}}}var u=o.value;o.value=l;if(o.value==""||o.value==u)o.value=u,l=u;t.city&&d.cityAjax()},onError:function(e){}});else{var n=o.value;o.value=l;if(o.value==""||o.value==n)o.value=n,l=n;t.city&&d.cityAjax()}},cityAjax:function(){if(!t.city)return;var e=f[l].city;if(i.objIsEmpty(e))t.cityIO&&t.cityKey&&t.cityIO.request(t.cityKey,{onSuccess:function(n){var r=n.data;if(i.objIsEmpty(r)){a.style.display="none";return}a.style.display="",a.options.length=0;for(var s in r){var o=new Option(r[s],s);a.options.add(o),e[s]={name:r[s],area:{}}}var u=a.value;a.value=c;if(a.value==""||a.value==u)a.value=u,c=u;t.area&&d.areaAjax()},onError:function(e){}},{province:l});else{a.style.display="",a.options.length=0;for(var n in e){var r=new Option(e[n].name,n);a.options.add(r)}var s=a.value;a.value=c;if(a.value==""||a.value==s)a.value=s,c=s;t.area&&d.areaAjax()}},areaAjax:function(){if(!t.area)return;var e=f[l].city,n=e[c].area;if(i.objIsEmpty(n))t.areaIO&&t.areaKey&&t.areaIO.request(t.areaKey,{onSuccess:function(e){var t=e.data;if(i.objIsEmpty(t)){u.style.display="none";return}u.style.display="",u.options.length=0;for(var r in t){var s=new Option(t[r],r);u.options.add(s),n[r]=t[r]}var o=u.value;u.value=h;if(u.value==""||u.value==o)u.value=o,h=o},onError:function(e){}},{province:l,city:c});else{u.style.display="",u.options.length=0;for(var r in n){var s=new Option(n[r],r);u.options.add(s)}var o=u.value;u.value=h;if(u.value==""||u.value==o)u.value=o,h=o}}},v={provinceChange:function(){l=o.value,t.city&&(c="",t.area&&(h=""),d.cityAjax())},cityChange:function(){c=a.value,t.area&&(h="",d.areaAjax())},areaChange:function(){h=u.value,i.custEvent.fire(n,"cityChange")}},m=function(){g(),y(),w(),E()},g=function(){if(!i.isNode(e))throw"node 没有定义"},y=function(){p.DOM=s(i.builder(e).list),o=p.DOM.province,u=p.DOM.area,a=p.DOM.city;if(!o||!u||!a)throw"节点不完整";b()},b=function(){t.city?t.proDef=="100"?a&&(a.style.display="none"):a&&(a.style.display=""):(t.proDef=="400"?a&&(a.style.display=""):a&&(a.style.display="none"),u&&(u.style.display="none")),t.area&&t.areaDef!="0"&&t.areaDef!=""&&t.areaIO&&t.areaKey?t.city&&a&&u&&(u.style.display=""):u&&(u.style.display="none")},w=function(){l=t.proDef,c=t.cityDef,h=t.areaDef,d.provinceAjax()},E=function(){i.addEvent(o,"change",v.provinceChange),t.city&&(i.addEvent(a,"change",v.cityChange),t.area&&i.addEvent(u,"change",v.areaChange))},S=function(e){e=e||{},t=i.core.json.merge(t,e),b(),w()};m();var x=function(){var e={};return e.province=l,t.city&&(e.city=c,t.area&&(e.area=h)),e},T=function(){i.custEvent.undefine(n),f=null,i.removeEvent(o,"change",v.provinceChange),t.city&&(i.removeEvent(a,"change",v.cityChange),t.area&&i.removeEvent(u,"change",v.areaChange))};return n.destroy=T,n.reset=S,n.getSelectOpts=x,n}},aT:function(e,t,n,r){var i=n("b"),s=n("au");s(i.E("pl_personalInfo_enterpriseInfo"))},au:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("T"),u=n("C"),a=n("e"),f=n("aU"),l=n("I"),c=n("j"),h=n("L"),p=n("m"),d=n("aj"),v=n("E"),m=n("av"),g=n("aA"),y=n("X"),b=n("aK"),w=n("M"),E=n("S"),S={};S.realname=f,S.desc=d,S.email=v,S.enterTelNumber=m,e.exports=function(e){var t={},n,r,o,f,d,v,m,g,y,b=["realname","email","enterTelNumber","desc"],x,T,N,C={realname:{E01:"",E02:"#L{请填写真实姓名，方便我们联系你。你的资料不会透露给任何人}",E03:"#L{请输入真实姓名}",E04:"#L{请输入真实姓名}"},email:{E01:"",E02:"#L{请输入邮箱地址}",E03:"#L{请输入正确的邮箱地址}",E04:"#L{微博已停止使用雅虎邮箱}"},mobile:{E01:"",E02:"#L{请输入电话号码}",E03:"#L{请输入正确的电话号码}"},desc:{E01:"",E02:"#L{请输入简介}",E03:"#L{请输入简介}",E04:"#L{请不要超过500个字}"}},k={formCheck:function(e,t){L(t)},close:function(){var e=n.getData();for(var t in e)if(typeof e[t]=="object"){for(var r in e[t])if(e[t][r]!=T[t][r]){d.set.edit();return}}else if(e[t]!=T[t]){d.set.edit();return}d.set.revert()},reset:function(){O.destroy(),d.render.content(N),O.init()}},L=function(e,t){t=t||!1;for(var n in e){var i=e[n];if(t&&i.state)continue;var s=r[n+"_tip"];s&&(s.innerHTML=h("newFormTips",{data:i}))}},A={btn_submit:function(e){i.preventDefault();var t=n.check();if(t){var r=n.getData(),o=i.core.json.merge(e.data,r);o.setting_rid=$CONFIG.setting_rid,x.setLoading(),c.request("enterpriseInfo",{isEncode:!0,onSuccess:function(t){x.setNormal(),T=n.getData(),N=d.dom.content().innerHTML,x.setNormal();var r=E({showCallback:function(){setTimeout(function(){r&&r.anihide()},500)},hideCallback:function(){r&&r.destroy(),r=undefined},msg:t.msg||s("#L{保存成功}"),type:"succ"});r.setLayerXY(e.el),r.aniShow()},onError:function(t){t.data&&funcs.showTips(t.data);var n=E({showCallback:function(){setTimeout(function(){n&&n.anihide()},500)},hideCallback:function(){n&&n.destroy(),n=undefined,x.setNormal()},msg:t.msg||s("#L{保存失败}"),type:"del"});n.setLayerXY(e.el),n.aniShow()}},o)}else L(n.states(),!0)},btn_reset:function(e){d.handle.close(),i.preventDefault()}},O={loader:function(){d=w(e,{IO:c,IOKey:"enterpriseInfoFrame"}),d.is.cached()&&O.init(),i.custEvent.add(d,"renderSuccess",O.init)},init:function(){O.build(),O.bind(),setTimeout(function(){T=n.getData(),N=d.dom.content().innerHTML},0)},build:function(){n=a(e),r=l(n.domList);for(var t=0,s,o,c,h=b.length;t<h;t++){s=b[t],o=r[s];if(r[s]&&S[s]){c=i.queryToJson(o.getAttribute("action-data")||""),c.hook=n,c.errText=C[s],s=="desc"&&(c.maxlength=500);var d=S[s](o,c);n.add(s,d)}}f=u(e),x=p(r.btn_submit)},bind:function(){i.custEvent.define(n,["check"]),i.custEvent.add(n,"check",k.formCheck),i.custEvent.add(d,"close",k.close),i.custEvent.add(d,"afterDiscard",k.reset),o=i.delegatedEvent(e);for(var t in A)o.add(t,"click",A[t])},destroy:function(){i.custEvent.remove(n,"check",k.formCheck),i.custEvent.remove(d,"close",k.close),i.custEvent.remove(d,"afterDiscard",k.reset),o.destroy(),f.destroy()}};return O.loader(),t.destroy=O.destroy,t}},aU:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{请填写真实姓名，方便我们联系你。你的资料不会透露给任何人}",E03:"#L{请输入真实姓名}",E04:"#L{请输入真实姓名}"};e.exports=function(e,t){t=t||{};var n=function(){var e=a.value(),t=!1;if(!a.pars.must&&a.rule.isEmpty(e)){a.msg.state=!0,a.msg.type="empty",a.msg.code="E01";return}!t&&(a.rule.isEmpty(e)||a.valCacheCtrl.isVal(e))&&(t=!0,a.msg.type="err",a.msg.code="E03"),t?a.msg.state=!1:(a.msg.state=!0,a.msg.type="ok",a.msg.code="E01")},r={focus:function(){a.cache_value=a.value(),a.msg.state=!1,a.msg.action="focus",a.fire()},blur:function(){e.value=a.rule.reNullChar(e.value),a.msg.action="blur",n(),a.fire()}},a=o(e,t,{evtAct:r,check:n}),f=i.core.obj.sup(a,["initPars"]);return a.initPars=function(){f.initPars(),a.errText=s(t.errText||u),a.type="realname"},a.pars.auto&&a.init(),a}},av:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{手机号码与座机号码至少填一项}",E03:"#L{请输入正确的电话号码}"};e.exports=function(e,t){var n;t=t||{};var r=function(){var e=f.value(),t=!1;if(!f.pars.must&&f.rule.isEmpty(e)){f.msg.state=!0,f.msg.type="empty",f.msg.code="E01";return}!t&&f.rule.isEmpty(e)&&(t=!0,f.msg.type="err",f.msg.code="E02"),!t&&!/^[0-9\-\ ]+$/.test(e)&&(t=!0,f.msg.type="err",f.msg.code="E03"),t?f.msg.state=!1:(f.msg.state=!0,f.msg.type="ok",f.msg.code="E01")},a={focus:function(){f.cache_value=f.value(),f.msg.state=!1,f.msg.action="focus",f.fire()},blur:function(){e.value=f.rule.reNullChar(e.value),f.msg.action="blur",r(),f.fire()}},f=o(e,t,{evtAct:a,check:r}),l=i.core.obj.sup(f,["initPars"]);return f.initPars=function(){l.initPars(),f.errText=s(t.errText||u),f.type="enterTelNumber"},f.pars.auto&&f.init(),f}},aV:function(e,t,n,r){var i=n("b"),s=n("aw");s(i.E("pl_personalInfo_qcode"))},aw:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("I"),u=n("j"),a=n("M");e.exports=function(e){var t={},n,r={close:function(){},reset:function(){}},s={loader:function(){n=a(e,{IO:u,IOKey:"qcodeFrame"}),n.is.cached()&&s.init(),i.custEvent.add(n,"renderSuccess",s.init)},init:function(){s.bind()},bind:function(){i.custEvent.add(n,"close",r.close),i.custEvent.add(n,"afterDiscard",r.reset)},destroy:function(){i.custEvent.remove(n,"close",r.close),i.custEvent.remove(n,"afterDiscard",r.reset)}};return s.loader(),t.destroy=s.destroy,t}},aW:function(e,t,n,r){var i=n("b"),s=n("ax");s(i.E("pl_personalInfo_tag"))},ax:function(e,t,n,r){var i=n("b"),s=n("j"),o=n("c"),u=n("aD"),a=n("T"),f=n("M"),l=n("S"),c=n("m"),h=n("C"),p=10,d=14;e.exports=function(e){var t={},n,r,v,m,g,y,b,w,E,S,x,T,N,C,k=[],L=!1,A,O={buildTag:function(e,t,n){var r,s,o;return e=i.trim(e),temp=n==0?'<div class="W_btn_arrow tag" node-type="tag_item" data=""><span class="S_func1"><i node-type="tag_name"></i><a href="javascript:void(0);" action-type="tag_del" action-data="value='+e+"&tagid="+t+'" class="W_ico12 icon_close"></a></span></div>':n==1?'<a href="http://weibo.com/find/f?type=1&search=1&tag1='+encodeURIComponent(e)+'" target="_blank" class="W_btn_arrow tag" node-type="tag_item" data=""><span class="S_func1"><i node-type="tag_name"></i></span></a>':n==2?'<a href="javascript:void(0);" node-type="tag_item" action-type="tag_add" action-data="value='+e+'" class="W_btn_arrow tag"><span class="S_func1"><em class="addicon">+</em>'+e+"</span></a>":"",r=i.builder(temp).list,s=r.tag_item&&r.tag_item[0],o=r.tag_name&&r.tag_name[0],s&&s.setAttribute("data","value="+e+"&tagid="+t),o&&o.appendChild(document.createTextNode(e)),s},hasTag:function(e){for(var t=0,n=k.length;t<n;t++)if(k[t]["value"]==e)return k[t];return!1},submitInput:function(e,t){e=i.trim(e);if(e==""||e==A["text"]){if(t){var r;k.length?r=o("#L{保存成功}"):r=x>0?o("#L{保存成功}"):o("#L{请输入标签后再保存}"),x=k.length;var u=l({showCallback:function(){setTimeout(function(){u&&u.anihide()},300)},hideCallback:function(){u&&u.destroy(),u=undefined},msg:r,type:"succ"});u.setLayerXY(n.btn_submit[0]),u.aniShow()}return}var a;e=i.trim(v.value),v.value=e;if(a=O.hasTag(e))return setTimeout(function(){i.removeClassName(a.dom,"highlight")},1e3),setTimeout(function(){v.value=e},10),i.addClassName(a.dom,"highlight"),!1;t&&S.setLoading(),s.getTrans("tagadd",{onSuccess:function(e){var r=e.data.rtn[0].tagid,s=e.data.rtn[0].tag,u=e.data.desc||"";C.render.concise(u),newTag=O.buildTag(s,r,0),i.core.dom.insertBefore(newTag,v.parentNode),k.push({dom:newTag,value:s,id:r}),k.length>=p?v.style.display="none":v.style.display="",t?v.value=A.text:v.value="",g.hide(),b&&b.style&&(b.style.display="none");if(t){S.setNormal(),x=k.length;var a=l({showCallback:function(){setTimeout(function(){a&&a.anihide()},300)},hideCallback:function(){a&&a.destroy(),a=undefined,S.setNormal()},msg:e.msg||o("#L{保存成功}"),type:"succ"});a.setLayerXY(n.btn_submit[0]),a.aniShow()}},onError:function(e){t&&S.setNormal(),w&&(w.innerHTML=e.msg),b&&(b.style.display="")},onFail:this.onError}).request({tag:e})}},M={addTag:function(e){var t=e.data.value,n,r;if(r=O.hasTag(t))setTimeout(function(){i.removeClassName(r.dom,"highlight")},1e3),i.addClassName(r.dom,"highlight");else{if(k.length>=p){D.showTagWarnFull();return}s.getTrans("tagadd",{onSuccess:function(t){var r=t.data.rtn[0].tagid,s=t.data.rtn[0].tag,o=t.data.desc||"";C.render.concise(o),n=O.buildTag(s,r,0),i.core.dom.insertBefore(n,v.parentNode),k.push({dom:n,id:t.data.rtn[0].tagid,value:t.data.rtn[0].tag}),e.el.removeAttribute("action-type"),i.addClassName(e.el,"disable"),k.length>=p?v.style.display="none":v.style.display="",b&&b.style&&(b.style.display="none")},onError:function(e){w&&(w.innerHTML=e.msg),b&&(b.style.display="")},onFail:this.onError}).request({tag:t})}},delTag:function(e){var t=e.data.value,n=e.data.tagid,r;for(var o=0,u=k.length;o<u;o++)if(t==k[o]["value"]){r=k[o].dom;break}o<u&&s.getTrans("tagdel",{onSuccess:function(e){var t=e.data&&e.data.desc||"";C.render.concise(t),i.removeNode(r),k.splice(o,1),b&&b.style&&(b.style.display="none"),k.length>=p?v.style.display="none":v.style.display="",v.focus()},onError:function(e){w&&(w.innerHTML=e.msg),b&&(b.style.display=""),v.focus()},onFail:this.onError}).request({tagid:n})},changeTag:function(e){s.getTrans("tagsuggest",{onSuccess:function(e){var t=e.data;y.innerHTML="";for(var n=0,r=t.length;n<r;n++)y.appendChild(O.buildTag(t[n].tag,t[n].tagid,2))}}).request()},hideWarn:function(){b&&b.style&&(b.style.display="none")},btn_submit:function(){i.preventDefault(),O.submitInput(v.value,!0)},btn_reset:function(){C.handle.close(),i.preventDefault()}},_={suggestChangeNotice:function(){var e=k.length,t=e<p-1?o("#L{限7个字，空格分开}"):o("#L{限7个字，最多10个标签}");g.setNotice(t)},suggestSelect:function(){v.focus(),a.selectText(v,v.value.length,v.value.length),k.length>=p&&(v.value="")},close:function(){v.value!==""&&v.value!=A["text"]?C.set.edit():(b&&b.style&&(b.style.display="none"),C.set.revert())},reset:function(){b&&b.style&&(b.style.display="none"),v.value=A.text}},D={tagInput:function(e){e=e||window.event;var t=e.keyCode||e.which,n=v.value,r,o;t==8?n.length==1?b&&b.style&&(b.style.display="none"):n==""&&k.length&&!L&&(s.getTrans("tagdel",{onSuccess:function(e){var t=e.data&&e.data.desc||"";C.render.concise(t),o=k.pop(),i.removeNode(o.dom),g.hide(),b&&b.style&&(b.style.display="none"),k.length>=p?v.style.display="none":v.style.display="",L=!1},onError:function(e){w&&(w.innerHTML=e.msg),b&&(b.style.display=""),L=!1},onFail:this.onError}).request({tagid:k[k.length-1].id}),L=!0):(t==32||t==10)&&O.submitInput(n)},tagInputLength:function(){var e=k.length>=p?0:d;k.length>=p&&D.showTagWarnFull(),i.bLength(v.value)>=e&&setTimeout(function(){v.value=i.leftB(v.value,e)},5)},inputFocus:function(){k.length<p&&v.focus()},showTagWarnFull:function(){k.length>=p&&(b.style.display="",w.innerHTML=o("#L{最多可添加10个标签}"))}},P={loader:function(){C=f(e,{IO:s,IOKey:"tagFrame"}),C.is.cached()&&P.init(),i.custEvent.add(C,"renderSuccess",P.init)},init:function(){P.parseDOM(),P.tagListInit(),P.initPlugin(),P.bind()},parseDOM:function(){n=i.core.dom.builder(e).list,r=n&&n.tag&&n.tag[0],v=n&&n.input&&n.input[0],b=n&&n.tag_warn&&n.tag_warn[0],w=n&&n.tag_warn_msg&&n.tag_warn_msg[0],y=n&&n.tag_interest&&n.tag_interest[0],m=v.parentNode.parentNode,S=c(n.btn_submit[0]),T=h(m,{focusCS:""}),A=i.queryToJson(v.getAttribute("action-data")),v.value=A.text},tagListInit:function(){var e=n.tag_item||[];for(var t=0,r=e.length;t<r;t++){var s=i.queryToJson(e[t].getAttribute("data"));k.push({dom:e[t],id:s.tagid,value:s.value})}x=k.length},initPlugin:function(){g=u(v,{trans:s,tranName:"tagchooser",name:"tags_name",path:"item",key:"key",max:4,height:i.core.util.browser.IE6?0:36,noSuggest:" "});var e=k.length,t=e<p-1?o("#L{限7个字，空格分开}"):o("#L{限7个字，最多10个标签}");g.setNotice(t)},bind:function(){N=C.dEvt(),i.addEvent(v,"keydown",D.tagInput),i.addEvent(v,"keyup",D.tagInputLength),i.addEvent(m,"click",D.inputFocus),i.addEvent(v,"focus",D.showTagWarnFull),N.add("tag_del","click",M.delTag),N.add("tag_add","click",M.addTag),N.add("tag_change","click",M.changeTag),N.add("edit","click",M.switchEdit),N.add("quickedit","click",M.quickedit),N.add("hide_warn","click",M.hideWarn),N.add("btn_submit","click",M.btn_submit),N.add("btn_reset","click",M.btn_reset),i.custEvent.add(g,"suggest",_.suggestChangeNotice),i.custEvent.add(g,"select",_.suggestSelect),i.custEvent.add(C,"close",_.close),i.custEvent.add(C,"afterDiscard",_.reset)}},H=function(){i.removeEvent(v,"keydown",D.tagInput),i.removeEvent(v,"keyup",D.tagInputLength),i.removeEvent(m,"click",D.inputFocus),i.removeEvent(v,"focus",D.showTagWarnFull),N.remove("tag_del","click",M.delTag),N.remove("tag_add","click",M.addTag),N.remove("tag_change","click",M.changeTag),N.remove("edit","click",M.switchEdit),N.remove("quickedit","click",M.quickedit),N.remove("btn_submit","click",M.btn_submit),N.remove("btn_reset","click",M.btn_reset),i.custEvent.remove(g,"suggest",D.suggestChangeNotice),i.custEvent.remove(g,"select",D.suggestSelect),N=null};return t.destroy=H,P.loader(),t}},aX:function(e,t,n,r){var i=n("b"),s=n("ay");s(i.E("pl_personalInfo_domain"))},ay:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("T"),u=n("C"),a=n("e"),f=n("aY"),l=n("I"),c=n("j"),h=n("L"),p=n("m"),d=n("M"),v=n("az"),m=n("aZ"),g=n("N"),y=n("S"),b=n("ad"),w=n("X"),E={};E.domainname=f,e.exports=function(e){var t={},n,r,o,f,w,S,x=["domainname"],T,N,C={formCheck:function(e,t){k(t)},close:function(){var e=i.queryToJson(o.domainname.getAttribute("action-data"));o["domainname"].value!=""&&o["domainname"].value!=e["text"]?n.set.edit():n.set.revert()},reset:function(){o.domainname.value="",o.domainname_tip.innerHTML=""}},k=function(e,t){t=t||!1;for(var n in e){var r=e[n];if(t&&r.state)continue;var i=o[n+"_tip"];i&&(i.innerHTML=h("newFormTips",{data:r}))}},L={mouseover:function(e){var e=i.fixEvent(e),t=e.target||e.srcElement;t.focus(),t.select()},showLayer:function(e){var e=e||window.event,t=e.target||e.srcElement;b(o.layer_tips,t,{pos:"left-bottom",offsetX:-10,offsetY:10}),o.layer_tips.style.display=""},hideLayer:function(){o.layer_tips.style.display="none"}},A={btn_submit:function(e){i.preventDefault();var t=r.check();if(t){var u=r.getData(),a=i.core.json.merge(e.data,u);g(s("#L{确定要使用这个域名吗？保存后将不能修改}"),{title:s("#L{提示}"),OKText:s("#L{确定}"),OK:function(){T.setLoading(),c.request("domaincommit",{onSuccess:function(e){T.setNormal();var t=e.data;n.render.concise(t.weibo_domain),o.domainname.value="",o.web.innerHTML=s("网页版：")+t.weibo_domain,o.mobile.innerHTML=s("手机版：")+t.phone_domain,o.link.value=t.weibo_domain,o.settle.style.display="none",o.result.style.display=""},onError:function(t){T.setNormal(),t.data&&k(t.data);var n=y({showCallback:function(){setTimeout(function(){n&&n.anihide()},2e3)},hideCallback:function(){n&&n.destroy(),n=undefined},msg:t.msg||s("#L{保存失败}"),type:"del"});n.setLayerXY(e.el),n.aniShow()}},a)},cancelText:s("#L{取消}")})}else k(r.states(),!0)},btn_cancel:function(){n.handle.close(),i.preventDefault()},btn_display:function(e){var t=o.link_box.style,n=t.display;t.display=n==""?"none":"";var r=e.el;i.hasClassName(r,"W_arrow_turn")?i.removeClassName(r,"W_arrow_turn"):i.addClassName(r,"W_arrow_turn"),i.preventDefault()},btn_favorite:function(){o["link_box"].style.display==""&&v(s("我的微博"),o.link.value),i.preventDefault()},btn_copy:function(){m({text:o.link.value}),i.preventDefault()}},O={loader:function(){n=d(e,{IO:c,IOKey:"domainFrame"}),n.is.cached()&&O.init(),i.custEvent.add(n,"renderSuccess",O.init)},init:function(){O.pars(),O.build(),O.bind()},pars:function(){},build:function(){r=a(e),o=l(r.domList);for(var t=0,n,s,f,c=x.length;t<c;t++){n=x[t],s=o[n];if(o[n]&&E[n]){f=i.queryToJson(s.getAttribute("action-data")||""),f.hook=r;var h=E[n](s,f);r.add(n,h)}}w=u(e),T=p(o.btn_submit),o.link.setAttribute("readonly","")},bind:function(){i.custEvent.define(r,["check"]),i.custEvent.add(r,"check",C.formCheck),i.custEvent.add(n,"close",C.close),i.custEvent.add(n,"afterDiscard",C.reset),i.addEvent(o.link,"mouseover",L.mouseover),i.addEvent(o.showLayer,"mouseover",L.showLayer),i.addEvent(o.showLayer,"mouseout",L.hideLayer),f=n.dEvt();for(var e in A)f.add(e,"click",A[e])},destroy:function(){i.custEvent.remove(r,"check",C.formCheck),i.removeEvent(o.link,"mouseover",L.mouseover),i.removeEvent(o.showLayer,"mouseover",L.showLayer),i.removeEvent(o.showLayer,"mouseout",L.hideLayer);for(var e in A)f.remove(e,"click",A[e]);w.destroy()}};return O.loader(),t.destroy=O.destroy,t}},aY:function(e,t,n,r){var i=n("b"),s=n("f"),o=n("F"),u={E01:"",E02:"#L{个性化域名请使用长度为4～20个字符的数字或者字母}",E03:"#L{个性化域名输入不正确，请使用长度为4～20个字符的数字或者字母}",E04:'#L{拥有微号即可有纯数字个性域名，快来申请微号吧。<a href="http://hao.weibo.com/" target="_blank">立即获取<em>&gt;&gt;</em></a>}'};e.exports=function(e,t){var n;t=t||{};var r=function(){var e=f.value(),t=!1;if(!f.pars.must&&f.rule.isEmpty(e)){f.msg.state=!0,f.msg.type="empty",f.msg.code="E01";return}!t&&f.rule.isEmpty(e)&&(t=!0,f.msg.type="err",f.msg.code="E02"),!t&&!f.rule.lenLimit(e,4,20)&&(t=!0,f.msg.type="err",f.msg.code="E03"),!t&&f.rule.isNumber(e)&&(t=!0,f.msg.type="err",f.msg.code="E04"),!t&&!RegExp("^[a-zA-Z0-9]*[a-zA-Z]+[a-zA-Z0-9]*$").test(e)&&(t=!0,f.msg.type="err",f.msg.code="E03"),t?f.msg.state=!1:(f.msg.state=!0,f.msg.type="ok",f.msg.code="E01")},a={focus:function(){f.value(""),f.cache_value=f.value(),f.rule.isEmpty(f.cache_value)&&(f.msg.state=!1,f.msg.action="focus",f.msg.type="tip",f.msg.code="E02",f.fire())},blur:function(){e.value=f.rule.reNullChar(e.value),f.msg.action="blur",r(),f.fire()}},f=o(e,t,{evtAct:a,check:r}),l=i.core.obj.sup(f,["initPars"]);return f.initPars=function(){l.initPars(),f.errText=s(u),f.type="domainname"},f.pars.auto&&f.init(),f}},az:function(e,t,n,r){var i=n("b"),s=n("s"),o=n("c"),u=window;e.exports=function(e,t){try{i.IE?u.external.addFavorite(t,e):u.sidebar?u.sidebar.addPanel(e,t,""):s(o("你的浏览器不支持调用收藏夹"),{icon:"warning"})}catch(n){s(o("你的浏览器不支持调用收藏夹"),{icon:"warning"})}}},aZ:function(e,t,n,r){var i=n("b"),s=n("s"),o=n("c"),u=function(e){var t=function(){var e=navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]?navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin:0;if(e){var t=navigator.plugins["Shockwave Flash"].description.split(" ");for(var n=0;n<t.length;++n){if(isNaN(parseInt(t[n],10)))continue;var r=t[n]}return r>=10}if(i.IE)try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash.10"),!0}catch(s){return!1}};if(window.clipboardData&&i.core.util.browser.IE6)return window.clipboardData.clearData(),window.clipboardData.setData("Text",e);if(!t()){var l="flashcopier";if(!i.E(l)){var c=i.C("div");c.id=l,document.body.appendChild(c)}e=e.replace(/%/g,escape("%")).replace(/&/g,escape("&"));var h='<embed src="/view/js/clipboard.swf" FlashVars="clipboard='+e+'" width="0" height="0" type="application/x-shockwave-flash"></embed>';return i.E(l).innerHTML=h,!0}if(i.IE)try{return window.clipboardData.clearData(),window.clipboardData.setData("Text",e)}catch(n){return!1}try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var r=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!r)return;var s=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!s)return;s.addDataFlavor("text/unicode");var o={},u={};o=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);var a=e;o.data=a,s.setTransferData("text/unicode",o,a.length*2);var f=Components.interfaces.nsIClipboard;return r?(r.setData(s,null,f.kGlobalClipboard),!0):!1}catch(n){return!1}};e.exports=function(e){var t=i.parseParam({text:"",succText:o("链接复制成功！ 你可以利用快捷方式Ctrl+V键粘贴到UC、QQ或MSN等聊天工具中。 "),errorText:o("你的浏览器不支持脚本复制或你拒绝了浏览器安全确认，请尝试手动[Ctrl+C]复制。"),icon:"success"},e||{});u(t["text"]||"")==0&&(t.succText=t.errorText,t.icon="warning"),s(t.succText,{icon:t.icon}),i.stopEvent()}},Aa:function(e,t,n,r){n("AA")},AA:function(e,t,n,r){var i=n("b"),s=n("Ab");s(i.E("pl_account_changeLanguage"))},Ab:function(e,t,n,r){var i=n("b"),s=n("c"),o=n("s"),u=n("N"),a=n("j"),f;e.exports=function(e){if(!f){var t,n={init:function(){n.pars(),n.bind()},pars:function(){f={},t=i.parseParam({login:1},i.queryToJson(e.getAttribute("action-data")||"")),t.login=parseInt(t.login)},bind:function(){i.addEvent(e,"change",l.change)},destroy:function(){i.removeEvent(e,"change",l.change)}},r=function(){var e=function(e){window.location.reload()},t=function(e){o(e.msg)},n=a.getTrans("language",{onSuccess:e,onError:t});return function(e){n.request({language:e,uid:$CONFIG.uid})}}(),l={change:function(){var n=e.value,o=e.options[e.selectedIndex];u(s("#L{确认切换到}")+o.innerHTML+s("#L{版吗？}"),{OK:function(){i.preventDefault();if(t.login)r(n);else{var e=window.location.href;/\?/.test(e)?/(\?|\&)lang=([^&]+)/.test(e)?e=e.replace(/(\?|\&)lang=([^&]+)/,"$1lang="+n):e=e+"&lang="+n:e=e+"?lang="+n,window.location.href=e}},cancel:function(){i.preventDefault(),e.value=$CONFIG.lang}})}};return n.init(),f.destroy=i.core.func.empty,f}return f}},AB:function(e,t,n,r){}});